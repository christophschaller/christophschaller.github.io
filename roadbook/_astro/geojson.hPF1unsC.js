import{g as Xs}from"./index.DMLNaFWj.js";var Gn={exports:{}},Gt={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xi;function Us(){if(Xi)return Gt;Xi=1;var l=Symbol.for("react.transitional.element"),f=Symbol.for("react.fragment");function o(v,c,y){var p=null;if(y!==void 0&&(p=""+y),c.key!==void 0&&(p=""+c.key),"key"in c){y={};for(var w in c)w!=="key"&&(y[w]=c[w])}else y=c;return c=y.ref,{$$typeof:l,type:v,key:p,ref:c!==void 0?c:null,props:y}}return Gt.Fragment=f,Gt.jsx=o,Gt.jsxs=o,Gt}var Ui;function Vs(){return Ui||(Ui=1,Gn.exports=Us()),Gn.exports}var Za=Vs();function vr(l,f,o){if(l!==null)for(var v,c,y,p,w,F,b,x=0,E=0,C,I=l.type,N=I==="FeatureCollection",T=I==="Feature",R=N?l.features.length:1,D=0;D<R;D++){b=N?l.features[D].geometry:T?l.geometry:l,C=b?b.type==="GeometryCollection":!1,w=C?b.geometries.length:1;for(var O=0;O<w;O++){var L=0,z=0;if(p=C?b.geometries[O]:b,p!==null){F=p.coordinates;var q=p.type;switch(x=0,q){case null:break;case"Point":if(f(F,E,D,L,z)===!1)return!1;E++,L++;break;case"LineString":case"MultiPoint":for(v=0;v<F.length;v++){if(f(F[v],E,D,L,z)===!1)return!1;E++,q==="MultiPoint"&&L++}q==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(v=0;v<F.length;v++){for(c=0;c<F[v].length-x;c++){if(f(F[v][c],E,D,L,z)===!1)return!1;E++}q==="MultiLineString"&&L++,q==="Polygon"&&z++}q==="Polygon"&&L++;break;case"MultiPolygon":for(v=0;v<F.length;v++){for(z=0,c=0;c<F[v].length;c++){for(y=0;y<F[v][c].length-x;y++){if(f(F[v][c][y],E,D,L,z)===!1)return!1;E++}z++}L++}break;case"GeometryCollection":for(v=0;v<p.geometries.length;v++)if(vr(p.geometries[v],f)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Hs(l,f={}){if(l.bbox!=null&&f.recompute!==!0)return l.bbox;const o=[1/0,1/0,-1/0,-1/0];return vr(l,v=>{o[0]>v[0]&&(o[0]=v[0]),o[1]>v[1]&&(o[1]=v[1]),o[2]<v[0]&&(o[2]=v[0]),o[3]<v[1]&&(o[3]=v[1])}),o}function Zs(l,f,o={}){const v={type:"Feature"};return(o.id===0||o.id)&&(v.id=o.id),o.bbox&&(v.bbox=o.bbox),v.properties=f||{},v.geometry=l,v}function un(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ws(l,f){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}function Js(l,f={}){var o=typeof f=="object"?f.mutate:f;if(!l)throw new Error("geojson is required");var v=Ws(l),c=[];switch(v){case"LineString":c=qn(l,v);break;case"MultiLineString":case"Polygon":un(l).forEach(function(p){c.push(qn(p,v))});break;case"MultiPolygon":un(l).forEach(function(p){var w=[];p.forEach(function(F){w.push(qn(F,v))}),c.push(w)});break;case"Point":return l;case"MultiPoint":var y={};un(l).forEach(function(p){var w=p.join("-");Object.prototype.hasOwnProperty.call(y,w)||(c.push(p),y[w]=!0)});break;default:throw new Error(v+" geometry not supported")}return l.coordinates?o===!0?(l.coordinates=c,l):{type:v,coordinates:c}:o===!0?(l.geometry.coordinates=c,l):Zs({type:v,coordinates:c},l.properties,{bbox:l.bbox,id:l.id})}function qn(l,f){var o=un(l);if(o.length===2&&!Vi(o[0],o[1]))return o;var v=[],c=o.length-1,y=v.length;v.push(o[0]);for(var p=1;p<c;p++){var w=v[v.length-1];o[p][0]===w[0]&&o[p][1]===w[1]||(v.push(o[p]),y=v.length,y>2&&Hi(v[y-3],v[y-1],v[y-2])&&v.splice(v.length-2,1))}if(v.push(o[o.length-1]),y=v.length,(f==="Polygon"||f==="MultiPolygon")&&Vi(o[0],o[o.length-1])&&y<4)throw new Error("invalid polygon");return f==="LineString"&&y<3||Hi(v[y-3],v[y-1],v[y-2])&&v.splice(v.length-2,1),v}function Vi(l,f){return l[0]===f[0]&&l[1]===f[1]}function Hi(l,f,o){var v=o[0],c=o[1],y=l[0],p=l[1],w=f[0],F=f[1],b=v-y,x=c-p,E=w-y,C=F-p,I=b*C-x*E;return I!==0?!1:Math.abs(E)>=Math.abs(C)?E>0?y<=v&&v<=w:w<=v&&v<=y:C>0?p<=c&&c<=F:F<=c&&c<=p}function Ks(l,f,o={}){const v={type:"Feature"};return(o.id===0||o.id)&&(v.id=o.id),o.bbox&&(v.bbox=o.bbox),v.properties=f||{},v.geometry=l,v}function Qs(l,f,o={}){if(!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Zi(l[0])||!Zi(l[1]))throw new Error("coordinates must contain numbers");return Ks({type:"Point",coordinates:l},f,o)}function Zi(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}function $s(l,f={}){const o=Hs(l),v=(o[0]+o[2])/2,c=(o[1]+o[3])/2;return Qs([v,c],f.properties,f)}var on={exports:{}},js=on.exports,Wi;function ea(){return Wi||(Wi=1,function(l,f){(function(o,v){l.exports=v()})(js,function(){function o(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function v(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function c(r,e,t){return e&&v(r.prototype,e),t&&v(r,t),r}function y(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&w(r,e)}function p(r){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(r)}function w(r,e){return w=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},w(r,e)}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(r,e,t){return b=F()?Reflect.construct:function(n,i,s){var a=[null];a.push.apply(a,i);var u=new(Function.bind.apply(n,a));return s&&w(u,s.prototype),u},b.apply(null,arguments)}function x(r){var e=typeof Map=="function"?new Map:void 0;return x=function(t){if(t===null||(n=t,Function.toString.call(n).indexOf("[native code]")===-1))return t;var n;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return b(t,arguments,p(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),w(i,t)},x(r)}function E(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function C(r,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(r)}function I(r){var e=F();return function(){var t,n=p(r);if(e){var i=p(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return C(this,t)}}function N(r,e,t){return N=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,i,s){var a=function(h,g){for(;!Object.prototype.hasOwnProperty.call(h,g)&&(h=p(h))!==null;);return h}(n,i);if(a){var u=Object.getOwnPropertyDescriptor(a,i);return u.get?u.get.call(s):u.value}},N(r,e,t||r)}function T(r){return function(e){if(Array.isArray(e))return D(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||R(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function R(r,e){if(r){if(typeof r=="string")return D(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?D(r,e):void 0}}function D(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function O(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=R(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,u=!1;return{s:function(){t=t.call(r)},n:function(){var h=t.next();return a=h.done,h},e:function(h){u=!0,s=h},f:function(){try{a||t.return==null||t.return()}finally{if(u)throw s}}}}var L=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=r.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=r.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==r.JOIN_ROUND&&(this._quadrantSegments=r.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(e){this._joinStyle=e}},{key:"setSimplifyFactor",value:function(e){this._simplifyFactor=e<0?0:e}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(e){this._endCapStyle=e}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(e){this._mitreLimit=e}},{key:"setSingleSided",value:function(e){this._isSingleSided=e}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=r.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=r.CAP_ROUND,this._joinStyle=r.JOIN_ROUND,this._mitreLimit=r.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=r.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setQuadrantSegments(e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.setQuadrantSegments(t),this.setEndCapStyle(n)}else if(arguments.length===4){var i=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(s),this.setJoinStyle(a),this.setMitreLimit(u)}}}},{key:"bufferDistanceError",value:function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)}}]),r}();L.CAP_ROUND=1,L.CAP_FLAT=2,L.CAP_SQUARE=3,L.JOIN_ROUND=1,L.JOIN_MITRE=2,L.JOIN_BEVEL=3,L.DEFAULT_QUADRANT_SEGMENTS=8,L.DEFAULT_MITRE_LIMIT=5,L.DEFAULT_SIMPLIFY_FACTOR=.01;var z=function(r){y(t,r);var e=I(t);function t(n){var i;return o(this,t),(i=e.call(this,n)).name=Object.keys({Exception:t})[0],i}return c(t,[{key:"toString",value:function(){return this.message}}]),t}(x(Error)),q=function(r){y(t,r);var e=I(t);function t(n){var i;return o(this,t),(i=e.call(this,n)).name=Object.keys({IllegalArgumentException:t})[0],i}return t}(z),B=function(){function r(){o(this,r)}return c(r,[{key:"filter",value:function(e){}}]),r}();function V(){}function J(){}function X(){}var ue,se,le,_e,Y,ne,oe,ge,ke=function(){function r(){o(this,r)}return c(r,null,[{key:"equalsWithTolerance",value:function(e,t,n){return Math.abs(e-t)<=n}}]),r}(),xe=function(){function r(e,t){o(this,r),this.low=t||0,this.high=e||0}return c(r,null,[{key:"toBinaryString",value:function(e){var t,n="";for(t=2147483648;t>0;t>>>=1)n+=(e.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)n+=(e.low&t)===t?"1":"0";return n}}]),r}();function U(){}function Se(){}U.NaN=NaN,U.isNaN=function(r){return Number.isNaN(r)},U.isInfinite=function(r){return!Number.isFinite(r)},U.MAX_VALUE=Number.MAX_VALUE,U.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,U.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(ne=2146435072,oe=new Float64Array(1),ge=new Int32Array(oe.buffer),U.doubleToLongBits=function(r){oe[0]=r;var e=0|ge[0],t=0|ge[1];return(t&ne)===ne&&1048575&t&&e!==0&&(e=0,t=2146959360),new xe(t,e)},U.longBitsToDouble=function(r){return ge[0]=r.low,ge[1]=r.high,oe[0]}):(ue=1023,se=Math.log2,le=Math.floor,_e=Math.pow,Y=function(){for(var r=53;r>0;r--){var e=_e(2,r)-1;if(le(se(e))+1===r)return e}return 0}(),U.doubleToLongBits=function(r){var e,t,n,i,s,a,u,h,g;if(r<0||1/r===Number.NEGATIVE_INFINITY?(a=1<<31,r=-r):a=0,r===0)return new xe(h=a,g=0);if(r===1/0)return new xe(h=2146435072|a,g=0);if(r!=r)return new xe(h=2146959360,g=0);if(i=0,g=0,(e=le(r))>1)if(e<=Y)(i=le(se(e)))<=20?(g=0,h=e<<20-i&1048575):(g=e%(t=_e(2,n=i-20))<<32-n,h=e/t&1048575);else for(n=e,g=0;(n=le(t=n/2))!==0;)i++,g>>>=1,g|=(1&h)<<31,h>>>=1,t!==n&&(h|=524288);if(u=i+ue,s=e===0,e=r-e,i<52&&e!==0)for(n=0;;){if((t=2*e)>=1?(e=t-1,s?(u--,s=!1):(n<<=1,n|=1,i++)):(e=t,s?--u==0&&(i++,s=!1):(n<<=1,i++)),i===20)h|=n,n=0;else if(i===52){g|=n;break}if(t===1){i<20?h|=n<<20-i:i<52&&(g|=n<<52-i);break}}return h|=u<<20,new xe(h|=a,g)},U.longBitsToDouble=function(r){var e,t,n,i,s=r.high,a=r.low,u=s&1<<31?-1:1;for(n=((2146435072&s)>>20)-ue,i=0,t=1<<19,e=1;e<=20;e++)s&t&&(i+=_e(2,-e)),t>>>=1;for(t=1<<31,e=21;e<=52;e++)a&t&&(i+=_e(2,-e)),t>>>=1;if(n===-1023){if(i===0)return 0*u;n=-1022}else{if(n===1024)return i===0?u/0:NaN;i+=1}return u*i*_e(2,n)});var Ee=function(r){y(t,r);var e=I(t);function t(n){var i;return o(this,t),(i=e.call(this,n)).name=Object.keys({RuntimeException:t})[0],i}return t}(z),Te=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,null,[{key:"constructor_",value:function(){if(arguments.length===0)Ee.constructor_.call(this);else if(arguments.length===1){var n=arguments[0];Ee.constructor_.call(this,n)}}}]),t}(Ee),te=function(){function r(){o(this,r)}return c(r,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)r.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new Te("Should never reach here"+(e!==null?": "+e:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var e=arguments[0];r.isTrue(e,null)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(!t)throw n===null?new Te:new Te(n)}}},{key:"equals",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];r.equals(e,t,null)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],s=arguments[2];if(!i.equals(n))throw new Te("Expected "+n+" but encountered "+i+(s!==null?": "+s:""))}}}]),r}(),Ke=new ArrayBuffer(8),Ar=new Float64Array(Ke),$n=new Int32Array(Ke),k=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getM",value:function(){return U.NaN}},{key:"setOrdinate",value:function(e,t){switch(e){case r.X:this.x=t;break;case r.Y:this.y=t;break;case r.Z:this.setZ(t);break;default:throw new q("Invalid ordinate index: "+e)}}},{key:"equals2D",value:function(){if(arguments.length===1){var e=arguments[0];return this.x===e.x&&this.y===e.y}if(arguments.length===2){var t=arguments[0],n=arguments[1];return!!ke.equalsWithTolerance(this.x,t.x,n)&&!!ke.equalsWithTolerance(this.y,t.y,n)}}},{key:"setM",value:function(e){throw new q("Invalid ordinate index: "+r.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(e){switch(e){case r.X:return this.x;case r.Y:return this.y;case r.Z:return this.getZ()}throw new q("Invalid ordinate index: "+e)}},{key:"equals3D",value:function(e){return this.x===e.x&&this.y===e.y&&(this.getZ()===e.getZ()||U.isNaN(this.getZ())&&U.isNaN(e.getZ()))}},{key:"equals",value:function(e){return e instanceof r&&this.equals2D(e)}},{key:"equalInZ",value:function(e,t){return ke.equalsWithTolerance(this.getZ(),e.getZ(),t)}},{key:"setX",value:function(e){this.x=e}},{key:"compareTo",value:function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(e){this.z=e}},{key:"clone",value:function(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return te.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.getZ()-e.getZ();return Math.sqrt(t*t+n*n+i*i)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(e){this.y=e}},{key:"distance",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return e=37*(e=37*e+r.hashCode(this.x))+r.hashCode(this.y)}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}},{key:"interfaces_",get:function(){return[V,J,X]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)r.constructor_.call(this,0,0);else if(arguments.length===1){var e=arguments[0];r.constructor_.call(this,e.x,e.y,e.getZ())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];r.constructor_.call(this,t,n,r.NULL_ORDINATE)}else if(arguments.length===3){var i=arguments[0],s=arguments[1],a=arguments[2];this.x=i,this.y=s,this.z=a}}},{key:"hashCode",value:function(e){return Ar[0]=e,$n[0]^$n[1]}}]),r}(),Dr=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"compare",value:function(e,t){var n=r.compare(e.x,t.x);if(n!==0)return n;var i=r.compare(e.y,t.y);return i!==0?i:this._dimensionsToTest<=2?0:r.compare(e.getZ(),t.getZ())}},{key:"interfaces_",get:function(){return[Se]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)r.constructor_.call(this,2);else if(arguments.length===1){var e=arguments[0];if(e!==2&&e!==3)throw new q("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}}},{key:"compare",value:function(e,t){return e<t?-1:e>t?1:U.isNaN(e)?U.isNaN(t)?0:-1:U.isNaN(t)?1:0}}]),r}();k.DimensionalComparator=Dr,k.NULL_ORDINATE=U.NaN,k.X=0,k.Y=1,k.Z=2,k.M=3;var fe=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(e){if(!(e instanceof r))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()}},{key:"intersection",value:function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new r;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny;return new r(t,this._maxx<e._maxx?this._maxx:e._maxx,n,this._maxy<e._maxy?this._maxy:e._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof r){var t=arguments[0];return!this.isNull()&&!t.isNull()&&t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof r){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof k){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){if(arguments[0]instanceof k&&arguments[1]instanceof k){var n=arguments[0],i=arguments[1];if(this.isNull())return!1;var s=n.x<i.x?n.x:i.x;if(s>this._maxx)return!1;var a=n.x>i.x?n.x:i.x;if(a<this._minx)return!1;var u=n.y<i.y?n.y:i.y;if(u>this._maxy)return!1;var h=n.y>i.y?n.y:i.y;return!(h<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],d=arguments[1];return!this.isNull()&&!(g>this._maxx||g<this._minx||d>this._maxy||d<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return Math.sqrt(e*e+t*t)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof k){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof r){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0}},{key:"translate",value:function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(e){return!(!this.isNull()&&!e.isNull())||e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t}},{key:"expandBy",value:function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof r){var e=arguments[0];return this.covers(e)}if(arguments[0]instanceof k){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.covers(n,i)}}},{key:"centre",value:function(){return this.isNull()?null:new k((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof k){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof r){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],u=arguments[2],h=arguments[3];s<a?(this._minx=s,this._maxx=a):(this._minx=a,this._maxx=s),u<h?(this._miny=u,this._maxy=h):(this._miny=h,this._maxy=u)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return e=37*(e=37*(e=37*(e=37*e+k.hashCode(this._minx))+k.hashCode(this._maxx))+k.hashCode(this._miny))+k.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[V,X]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof k){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof r){var t=arguments[0];this.init(t)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],u=arguments[2],h=arguments[3];this.init(s,a,u,h)}}},{key:"intersects",value:function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}if(arguments.length===4){var i=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],h=Math.min(a.x,u.x),g=Math.max(a.x,u.x),d=Math.min(i.x,s.x),_=Math.max(i.x,s.x);return!(d>g)&&!(_<h)&&(h=Math.min(a.y,u.y),g=Math.max(a.y,u.y),d=Math.min(i.y,s.y),_=Math.max(i.y,s.y),!(d>g)&&!(_<h))}}}]),r}(),Z=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(e){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(e){return this===e||this.equalsExact(e,0)}},{key:"geometryChanged",value:function(){this.apply(r.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(e){return e!==null&&this.norm().equalsExact(e.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var e;if(arguments.length===1){var t=arguments[0];return e=t,this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(arguments.length===2){var n=arguments[0],i=arguments[1];return e=n,this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(e){if(e.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION)throw new q("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n}},{key:"norm",value:function(){var e=this.copy();return e.normalize(),e}},{key:"reverse",value:function(){var e=this.reverseInternal();return this.envelope!=null&&(e.envelope=this.envelope.copy()),e.setSRID(this.getSRID()),e}},{key:"copy",value:function(){var e=this.copyInternal();return e.envelope=this._envelope==null?null:this._envelope.copy(),e._SRID=this._SRID,e._userData=this._userData,e}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new fe(this._envelope)}},{key:"setSRID",value:function(e){this._SRID=e}},{key:"setUserData",value:function(e){this._userData=e}},{key:"compare",value:function(e,t){for(var n=e.iterator(),i=t.iterator();n.hasNext()&&i.hasNext();){var s=n.next(),a=i.next(),u=s.compareTo(a);if(u!==0)return u}return n.hasNext()?1:i.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(e){return this.getClass()===e.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===r.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===r.TYPECODE_MULTIPOINT||this.getTypeCode()===r.TYPECODE_MULTILINESTRING||this.getTypeCode()===r.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[J,V,X]}},{key:"getClass",value:function(){return r}}],[{key:"hasNonEmptyElements",value:function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1}}]),r}();Z.constructor_=function(r){r&&(this._envelope=null,this._userData=null,this._factory=r,this._SRID=r.getSRID())},Z.TYPECODE_POINT=0,Z.TYPECODE_MULTIPOINT=1,Z.TYPECODE_LINESTRING=2,Z.TYPECODE_LINEARRING=3,Z.TYPECODE_MULTILINESTRING=4,Z.TYPECODE_POLYGON=5,Z.TYPECODE_MULTIPOLYGON=6,Z.TYPECODE_GEOMETRYCOLLECTION=7,Z.TYPENAME_POINT="Point",Z.TYPENAME_MULTIPOINT="MultiPoint",Z.TYPENAME_LINESTRING="LineString",Z.TYPENAME_LINEARRING="LinearRing",Z.TYPENAME_MULTILINESTRING="MultiLineString",Z.TYPENAME_POLYGON="Polygon",Z.TYPENAME_MULTIPOLYGON="MultiPolygon",Z.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Z.geometryChangedFilter={get interfaces_(){return[B]},filter:function(r){r.geometryChangedAction()}};var m=function(){function r(){o(this,r)}return c(r,null,[{key:"toLocationSymbol",value:function(e){switch(e){case r.EXTERIOR:return"e";case r.BOUNDARY:return"b";case r.INTERIOR:return"i";case r.NONE:return"-"}throw new q("Unknown location value: "+e)}}]),r}();m.INTERIOR=0,m.BOUNDARY=1,m.EXTERIOR=2,m.NONE=-1;var Xe=function(){function r(){o(this,r)}return c(r,[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),r}(),Bt=function(r){y(t,r);var e=I(t);function t(n){var i;return o(this,t),(i=e.call(this,n)).name=Object.keys({NoSuchElementException:t})[0],i}return t}(z),tt=function(r){y(t,r);var e=I(t);function t(n){var i;return o(this,t),(i=e.call(this,n)).name=Object.keys({UnsupportedOperationException:t})[0],i}return t}(z),jn=function(r){y(t,r);var e=I(t);function t(){return o(this,t),e.apply(this,arguments)}return c(t,[{key:"contains",value:function(){}}]),t}(Xe),dn=function(r,e){y(n,r);var t=I(n);function n(i){var s;return o(this,n),(s=t.call(this)).map=new Map,i instanceof Xe&&s.addAll(i),s}return c(n,[{key:"contains",value:function(i){var s=i.hashCode?i.hashCode():i;return!!this.map.has(s)}},{key:"add",value:function(i){var s=i.hashCode?i.hashCode():i;return!this.map.has(s)&&!!this.map.set(s,i)}},{key:"addAll",value:function(i){var s,a=O(i);try{for(a.s();!(s=a.n()).done;){var u=s.value;this.add(u)}}catch(h){a.e(h)}finally{a.f()}return!0}},{key:"remove",value:function(){throw new tt}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Fr(this.map)}},{key:e,value:function(){return this.map}}]),n}(jn,Symbol.iterator),Fr=function(){function r(e){o(this,r),this.iterator=e.values();var t=this.iterator.next(),n=t.done,i=t.value;this.done=n,this.value=i}return c(r,[{key:"next",value:function(){if(this.done)throw new Bt;var e=this.value,t=this.iterator.next(),n=t.done,i=t.value;return this.done=n,this.value=i,e}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new tt}}]),r}(),A=function(){function r(){o(this,r)}return c(r,null,[{key:"opposite",value:function(e){return e===r.LEFT?r.RIGHT:e===r.RIGHT?r.LEFT:e}}]),r}();A.ON=0,A.LEFT=1,A.RIGHT=2;var ei=function(r){y(t,r);var e=I(t);function t(n){var i;return o(this,t),(i=e.call(this,n)).name=Object.keys({EmptyStackException:t})[0],i}return t}(z),ti=function(r){y(t,r);var e=I(t);function t(n){var i;return o(this,t),(i=e.call(this,n)).name=Object.keys({IndexOutOfBoundsException:t})[0],i}return t}(z),at=function(r){y(t,r);var e=I(t);function t(){return o(this,t),e.apply(this,arguments)}return c(t,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}]),t}(Xe),Gr=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),(n=e.call(this)).array=[],n}return c(t,[{key:"add",value:function(n){return this.array.push(n),!0}},{key:"get",value:function(n){if(n<0||n>=this.size())throw new ti;return this.array[n]}},{key:"push",value:function(n){return this.array.push(n),n}},{key:"pop",value:function(){if(this.array.length===0)throw new ei;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new ei;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(n){return this.array.indexOf(n)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}]),t}(at);function ee(r,e){return r.interfaces_&&r.interfaces_.indexOf(e)>-1}var Tt=function(){function r(e){o(this,r),this.str=e}return c(r,[{key:"append",value:function(e){this.str+=e}},{key:"setCharAt",value:function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)}},{key:"toString",value:function(){return this.str}}]),r}(),Xt=function(){function r(e){o(this,r),this.value=e}return c(r,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(e){return this.value<e?-1:this.value>e?1:0}}],[{key:"compare",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"isNan",value:function(e){return Number.isNaN(e)}},{key:"valueOf",value:function(e){return new r(e)}}]),r}(),_n=function(){function r(){o(this,r)}return c(r,null,[{key:"isWhitespace",value:function(e){return e<=32&&e>=0||e===127}},{key:"toUpperCase",value:function(e){return e.toUpperCase()}}]),r}(),Q=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"le",value:function(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<=e._lo}},{key:"extractSignificantDigits",value:function(e,t){var n=this.abs(),i=r.magnitude(n._hi),s=r.TEN.pow(i);(n=n.divide(s)).gt(r.TEN)?(n=n.divide(r.TEN),i+=1):n.lt(r.ONE)&&(n=n.multiply(r.TEN),i-=1);for(var a=i+1,u=new Tt,h=r.MAX_PRINT_DIGITS-1,g=0;g<=h;g++){e&&g===a&&u.append(".");var d=Math.trunc(n._hi);if(d<0)break;var _=!1,S=0;d>9?(_=!0,S="9"):S="0"+d,u.append(S),n=n.subtract(r.valueOf(d)).multiply(r.TEN),_&&n.selfAdd(r.TEN);var P=!0,M=r.magnitude(n._hi);if(M<0&&Math.abs(M)>=h-g&&(P=!1),!P)break}return t[0]=i,u.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof r){var e=arguments[0];return this.add(e.negate())}if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof r){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof r){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(e){return this.le(e)?this:e}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof r){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1],s=null,a=null,u=null,h=null,g=null,d=null,_=null,S=null;return g=this._hi/n,S=(s=(d=r.SPLIT*g)-(s=d-g))*(u=(S=r.SPLIT*n)-(u=S-n))-(_=g*n)+s*(h=n-u)+(a=g-s)*u+a*h,S=g+(d=(this._hi-_-S+this._lo-g*i)/n),this._hi=S,this._lo=g-S+d,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof r){var e=arguments[0],t=null,n=null,i=null,s=null,a=null,u=null,h=null,g=null;n=(a=this._hi/e._hi)-(t=(u=r.SPLIT*a)-(t=u-a)),g=t*(i=(g=r.SPLIT*e._hi)-(i=g-e._hi))-(h=a*e._hi)+t*(s=e._hi-i)+n*i+n*s;var d=g=a+(u=(this._hi-h-g+this._lo-a*e._lo)/e._hi),_=a-g+u;return new r(d,_)}if(typeof arguments[0]=="number"){var S=arguments[0];return U.isNaN(S)?r.createNaN():r.copy(this).selfDivide(S,0)}}},{key:"ge",value:function(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>=e._lo}},{key:"pow",value:function(e){if(e===0)return r.valueOf(1);var t=new r(this),n=r.valueOf(1),i=Math.abs(e);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(t),(i/=2)>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n}},{key:"ceil",value:function(){if(this.isNaN())return r.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new r(e,t)}},{key:"compareTo",value:function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof r){var e=arguments[0];return this.init(e),this}if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}}},{key:"max",value:function(e){return this.ge(e)?this:e}},{key:"sqrt",value:function(){if(this.isZero())return r.valueOf(0);if(this.isNegative())return r.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=r.valueOf(t),i=this.subtract(n.sqr())._hi*(.5*e);return n.add(i)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof r){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}if(typeof arguments[0]=="number"){var t=arguments[0],n=null,i=null,s=null,a=null,u=null,h=null;return a=(s=this._hi+t)-(u=s-this._hi),i=(h=(a=t-u+(this._hi-a))+this._lo)+(s-(n=s+h)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(arguments.length===2){var g=arguments[0],d=arguments[1],_=null,S=null,P=null,M=null,H=null,W=null,j=null;M=this._hi+g,S=this._lo+d,H=M-(W=M-this._hi),P=S-(j=S-this._lo);var he=(_=M+(W=(H=g-W+(this._hi-H))+S))+(W=(P=d-j+(this._lo-P))+(W+(M-_))),ye=W+(_-he);return this._hi=he,this._lo=ye,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof r){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1],s=null,a=null,u=null,h=null,g=null,d=null;s=(g=r.SPLIT*this._hi)-this._hi,d=r.SPLIT*n,s=g-s,a=this._hi-s,u=d-n;var _=(g=this._hi*n)+(d=s*(u=d-u)-g+s*(h=n-u)+a*u+a*h+(this._hi*i+this._lo*n)),S=d+(s=g-_);return this._hi=_,this._lo=S,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return r.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new r(e,t)}},{key:"negate",value:function(){return this.isNaN()?this:new r(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return null;throw e}}},{key:"multiply",value:function(){if(arguments[0]instanceof r){var e=arguments[0];return e.isNaN()?r.createNaN():r.copy(this).selfMultiply(e)}if(typeof arguments[0]=="number"){var t=arguments[0];return U.isNaN(t)?r.createNaN():r.copy(this).selfMultiply(t,0)}}},{key:"isNaN",value:function(){return U.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var e=r.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),i=t[0]+1,s=n;if(n.charAt(0)===".")s="0"+n;else if(i<0)s="0."+r.stringOfChar("0",-i)+n;else if(n.indexOf(".")===-1){var a=i-n.length;s=n+r.stringOfChar("0",a)+".0"}return this.isNegative()?"-"+s:s}},{key:"reciprocal",value:function(){var e,t,n,i,s=null,a=null,u=null,h=null;e=(n=1/this._hi)-(s=(u=r.SPLIT*n)-(s=u-n)),a=(h=r.SPLIT*this._hi)-this._hi;var g=n+(u=(1-(i=n*this._hi)-(h=s*(a=h-a)-i+s*(t=this._hi-a)+e*a+e*t)-n*this._lo)/this._hi);return new r(g,n-g+u)}},{key:"toSciNotation",value:function(){if(this.isZero())return r.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),i=r.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var s="";n.length>1&&(s=n.substring(1));var a=n.charAt(0)+"."+s;return this.isNegative()?"-"+a+i:a+i}},{key:"abs",value:function(){return this.isNaN()?r.NaN:this.isNegative()?this.negate():new r(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<e._lo}},{key:"add",value:function(){if(arguments[0]instanceof r){var e=arguments[0];return r.copy(this).selfAdd(e)}if(typeof arguments[0]=="number"){var t=arguments[0];return r.copy(this).selfAdd(t)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof r){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}}},{key:"gt",value:function(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>e._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?r.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[X,V,J]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof r){var t=arguments[0];this.init(t)}else if(typeof arguments[0]=="string"){var n=arguments[0];r.constructor_.call(this,r.parse(n))}}else if(arguments.length===2){var i=arguments[0],s=arguments[1];this.init(i,s)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];return r.determinant(r.valueOf(e),r.valueOf(t),r.valueOf(n),r.valueOf(i))}if(arguments[3]instanceof r&&arguments[2]instanceof r&&arguments[0]instanceof r&&arguments[1]instanceof r){var s=arguments[0],a=arguments[1],u=arguments[2],h=arguments[3],g=s.multiply(h).selfSubtract(a.multiply(u));return g}}},{key:"sqr",value:function(e){return r.valueOf(e).selfMultiply(e)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var e=arguments[0];return r.parse(e)}if(typeof arguments[0]=="number"){var t=arguments[0];return new r(t)}}},{key:"sqrt",value:function(e){return r.valueOf(e).sqrt()}},{key:"parse",value:function(e){for(var t=0,n=e.length;_n.isWhitespace(e.charAt(t));)t++;var i=!1;if(t<n){var s=e.charAt(t);s!=="-"&&s!=="+"||(t++,s==="-"&&(i=!0))}for(var a=new r,u=0,h=0,g=0,d=!1;!(t>=n);){var _=e.charAt(t);if(t++,_n.isDigit(_)){var S=_-"0";a.selfMultiply(r.TEN),a.selfAdd(S),u++}else{if(_!=="."){if(_==="e"||_==="E"){var P=e.substring(t);try{g=Xt.parseInt(P)}catch(he){throw he instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+P+" in string "+e):he}break}throw new NumberFormatException("Unexpected character '"+_+"' at position "+t+" in string "+e)}h=u,d=!0}}var M=a;d||(h=u);var H=u-h-g;if(H===0)M=a;else if(H>0){var W=r.TEN.pow(H);M=a.divide(W)}else if(H<0){var j=r.TEN.pow(-H);M=a.multiply(j)}return i?M.negate():M}},{key:"createNaN",value:function(){return new r(U.NaN,U.NaN)}},{key:"copy",value:function(e){return new r(e)}},{key:"magnitude",value:function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=t&&(i+=1),i}},{key:"stringOfChar",value:function(e,t){for(var n=new Tt,i=0;i<t;i++)n.append(e);return n.toString()}}]),r}();Q.PI=new Q(3.141592653589793,12246467991473532e-32),Q.TWO_PI=new Q(6.283185307179586,24492935982947064e-32),Q.PI_2=new Q(1.5707963267948966,6123233995736766e-32),Q.E=new Q(2.718281828459045,14456468917292502e-32),Q.NaN=new Q(U.NaN,U.NaN),Q.EPS=123259516440783e-46,Q.SPLIT=134217729,Q.MAX_PRINT_DIGITS=32,Q.TEN=Q.valueOf(10),Q.ONE=Q.valueOf(1),Q.SCI_NOT_EXPONENT_CHAR="E",Q.SCI_NOT_ZERO="0.0E0";var pn=function(){function r(){o(this,r)}return c(r,null,[{key:"orientationIndex",value:function(e,t,n){var i=r.orientationIndexFilter(e,t,n);if(i<=1)return i;var s=Q.valueOf(t.x).selfAdd(-e.x),a=Q.valueOf(t.y).selfAdd(-e.y),u=Q.valueOf(n.x).selfAdd(-t.x),h=Q.valueOf(n.y).selfAdd(-t.y);return s.selfMultiply(h).selfSubtract(a.selfMultiply(u)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof Q&&arguments[2]instanceof Q&&arguments[0]instanceof Q&&arguments[1]instanceof Q){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3],s=e.multiply(i).selfSubtract(t.multiply(n));return s.signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var a=arguments[0],u=arguments[1],h=arguments[2],g=arguments[3],d=Q.valueOf(a),_=Q.valueOf(u),S=Q.valueOf(h),P=Q.valueOf(g),M=d.multiply(P).selfSubtract(_.multiply(S));return M.signum()}}},{key:"intersection",value:function(e,t,n,i){var s=new Q(e.y).selfSubtract(t.y),a=new Q(t.x).selfSubtract(e.x),u=new Q(e.x).selfMultiply(t.y).selfSubtract(new Q(t.x).selfMultiply(e.y)),h=new Q(n.y).selfSubtract(i.y),g=new Q(i.x).selfSubtract(n.x),d=new Q(n.x).selfMultiply(i.y).selfSubtract(new Q(i.x).selfMultiply(n.y)),_=a.multiply(d).selfSubtract(g.multiply(u)),S=h.multiply(u).selfSubtract(s.multiply(d)),P=s.multiply(g).selfSubtract(h.multiply(a)),M=_.selfDivide(P).doubleValue(),H=S.selfDivide(P).doubleValue();return U.isNaN(M)||U.isInfinite(M)||U.isNaN(H)||U.isInfinite(H)?null:new k(M,H)}},{key:"orientationIndexFilter",value:function(e,t,n){var i=null,s=(e.x-n.x)*(t.y-n.y),a=(e.y-n.y)*(t.x-n.x),u=s-a;if(s>0){if(a<=0)return r.signum(u);i=s+a}else{if(!(s<0)||a>=0)return r.signum(u);i=-s-a}var h=r.DP_SAFE_EPSILON*i;return u>=h||-u>=h?r.signum(u):2}},{key:"signum",value:function(e){return e>0?1:e<0?-1:0}}]),r}();pn.DP_SAFE_EPSILON=1e-15;var ie=function(){function r(){o(this,r)}return c(r,[{key:"getM",value:function(e){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(e,t)}return U.NaN}},{key:"setOrdinate",value:function(e,t,n){}},{key:"getZ",value:function(e){return this.hasZ()?this.getOrdinate(e,2):U.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(e,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(e){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(e){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(e){}},{key:"copy",value:function(){}},{key:"getY",value:function(e){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[J]}}]),r}();ie.X=0,ie.Y=1,ie.Z=2,ie.M=3;var $=function(){function r(){o(this,r)}return c(r,null,[{key:"index",value:function(e,t,n){return pn.orientationIndex(e,t,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var e=arguments[0],t=e.length-1;if(t<3)throw new q("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],i=0,s=1;s<=t;s++){var a=e[s];a.y>n.y&&(n=a,i=s)}var u=i;do(u-=1)<0&&(u=t);while(e[u].equals2D(n)&&u!==i);var h=i;do h=(h+1)%t;while(e[h].equals2D(n)&&h!==i);var g=e[u],d=e[h];if(g.equals2D(n)||d.equals2D(n)||g.equals2D(d))return!1;var _=r.index(g,n,d),S=null;return S=_===0?g.x>d.x:_>0,S}if(ee(arguments[0],ie)){var P=arguments[0],M=P.size()-1;if(M<3)throw new q("Ring has fewer than 4 points, so orientation cannot be determined");for(var H=P.getCoordinate(0),W=0,j=1;j<=M;j++){var he=P.getCoordinate(j);he.y>H.y&&(H=he,W=j)}var ye=null,Ne=W;do(Ne-=1)<0&&(Ne=M),ye=P.getCoordinate(Ne);while(ye.equals2D(H)&&Ne!==W);var be=null,ze=W;do ze=(ze+1)%M,be=P.getCoordinate(ze);while(be.equals2D(H)&&ze!==W);if(ye.equals2D(H)||be.equals2D(H)||ye.equals2D(be))return!1;var et=r.index(ye,H,be);return et===0?ye.x>be.x:et>0}}}]),r}();$.CLOCKWISE=-1,$.RIGHT=$.CLOCKWISE,$.COUNTERCLOCKWISE=1,$.LEFT=$.COUNTERCLOCKWISE,$.COLLINEAR=0,$.STRAIGHT=$.COLLINEAR;var qr=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var e=this._minDe.getEdge().getCoordinates();te.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],i=$.index(this._minCoord,n,t),s=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&i===$.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&i===$.CLOCKWISE)&&(s=!0),s&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(e,t){var n=e.getEdge().getCoordinates();if(t<0||t+1>=n.length||n[t].y===n[t+1].y)return-1;var i=A.LEFT;return n[t].y<n[t+1].y&&(i=A.RIGHT),i}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(this._minCoord===null||t[n].x>this._minCoord.x)&&(this._minDe=e,this._minIndex=n,this._minCoord=t[n])}},{key:"findRightmostEdgeAtNode",value:function(){var e=this._minDe.getNode().getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}te.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===A.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),r}(),Qe=function(r){y(t,r);var e=I(t);function t(n,i){var s;return o(this,t),(s=e.call(this,i?n+" [ "+i+" ]":n)).pt=i?new k(i):void 0,s.name=Object.keys({TopologyException:t})[0],s}return c(t,[{key:"getCoordinate",value:function(){return this.pt}}]),t}(Ee),Yr=function(){function r(){o(this,r),this.array=[]}return c(r,[{key:"addLast",value:function(e){this.array.push(e)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}]),r}(),K=function(r,e){y(n,r);var t=I(n);function n(i){var s;return o(this,n),(s=t.call(this)).array=[],i instanceof Xe&&s.addAll(i),s}return c(n,[{key:"interfaces_",get:function(){return[at,Xe]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(i){return arguments.length===1?this.array.push(i):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(i){var s,a=O(i);try{for(a.s();!(s=a.n()).done;){var u=s.value;this.array.push(u)}}catch(h){a.e(h)}finally{a.f()}}},{key:"set",value:function(i,s){var a=this.array[i];return this.array[i]=s,a}},{key:"iterator",value:function(){return new zr(this)}},{key:"get",value:function(i){if(i<0||i>=this.size())throw new ti;return this.array[i]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(i){i?this.array.sort(function(s,a){return i.compare(s,a)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(i){for(var s=0,a=this.array.length;s<a;s++)if(this.array[s]===i)return!!this.array.splice(s,1);return!1}},{key:e,value:function(){return this.array.values()}}]),n}(at,Symbol.iterator),zr=function(){function r(e){o(this,r),this.arrayList=e,this.position=0}return c(r,[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Bt;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(e){return this.arrayList.set(this.position-1,e)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),r}(),Br=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"clearVisitedEdges",value:function(){for(var e=this._dirEdgeList.iterator();e.hasNext();)e.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){t=i;break}}if(t===null)throw new Qe("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var s=e.getEdges().iterator();s.hasNext();){var a=s.next();a.setVisited(!0),this.copySymDepths(a)}}},{key:"computeDepth",value:function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(A.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(A.RIGHT)>=1&&t.getDepth(A.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(e){var t=new dn,n=new Yr,i=e.getNode();for(n.addLast(i),t.add(i),e.setVisited(!0);!n.isEmpty();){var s=n.removeFirst();t.add(s),this.computeNodeDepth(s);for(var a=s.getEdges().iterator();a.hasNext();){var u=a.next().getSym();if(!u.isVisited()){var h=u.getNode();t.contains(h)||(n.addLast(h),t.add(h))}}}}},{key:"compareTo",value:function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var e=new fe,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)e.expandToInclude(n[i]);this._env=e}return this._env}},{key:"addReachable",value:function(e){var t=new Gr;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}}},{key:"copySymDepths",value:function(e){var t=e.getSym();t.setDepth(A.LEFT,e.getDepth(A.RIGHT)),t.setDepth(A.RIGHT,e.getDepth(A.LEFT))}},{key:"add",value:function(e,t){e.setVisited(!0),this._nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var s=i.getSym().getNode();s.isVisited()||t.push(s)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new K,this._nodes=new K,this._rightMostCoord=null,this._env=null,this._finder=new qr}}]),r}(),kn=function(){function r(){o(this,r)}return c(r,null,[{key:"intersection",value:function(e,t,n,i){var s=e.x<t.x?e.x:t.x,a=e.y<t.y?e.y:t.y,u=e.x>t.x?e.x:t.x,h=e.y>t.y?e.y:t.y,g=n.x<i.x?n.x:i.x,d=n.y<i.y?n.y:i.y,_=n.x>i.x?n.x:i.x,S=n.y>i.y?n.y:i.y,P=((s>g?s:g)+(u<_?u:_))/2,M=((a>d?a:d)+(h<S?h:S))/2,H=e.x-P,W=e.y-M,j=t.x-P,he=t.y-M,ye=n.x-P,Ne=n.y-M,be=i.x-P,ze=i.y-M,et=W-he,gt=j-H,Dt=H*he-j*W,Ft=Ne-ze,Et=be-ye,zi=ye*ze-be*Ne,Bi=et*Et-Ft*gt,Dn=(gt*zi-Et*Dt)/Bi,Fn=(Ft*Dt-et*zi)/Bi;return U.isNaN(Dn)||U.isInfinite(Dn)||U.isNaN(Fn)||U.isInfinite(Fn)?null:new k(Dn+P,Fn+M)}}]),r}(),Me=function(){function r(){o(this,r)}return c(r,null,[{key:"arraycopy",value:function(e,t,n,i,s){for(var a=0,u=t;u<t+s;u++)n[i+a]=e[u],a++}},{key:"getProperty",value:function(e){return{"line.separator":`
`}[e]}}]),r}(),Ct=function(){function r(){o(this,r)}return c(r,null,[{key:"log10",value:function(e){var t=Math.log(e);return U.isInfinite(t)||U.isNaN(t)?t:t/r.LOG_10}},{key:"min",value:function(e,t,n,i){var s=e;return t<s&&(s=t),n<s&&(s=n),i<s&&(s=i),s}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],s=arguments[1],a=arguments[2];return i<s?s:i>a?a:i}}},{key:"wrap",value:function(e,t){return e<0?t- -e%t:e%t}},{key:"max",value:function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],i=e;return t>i&&(i=t),n>i&&(i=n),i}if(arguments.length===4){var s=arguments[0],a=arguments[1],u=arguments[2],h=arguments[3],g=s;return a>g&&(g=a),u>g&&(g=u),h>g&&(g=h),g}}},{key:"average",value:function(e,t){return(e+t)/2}}]),r}();Ct.LOG_10=Math.log(10);var Ue=function(){function r(){o(this,r)}return c(r,null,[{key:"segmentToSegment",value:function(e,t,n,i){if(e.equals(t))return r.pointToSegment(e,n,i);if(n.equals(i))return r.pointToSegment(i,e,t);var s=!1;if(fe.intersects(e,t,n,i)){var a=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x);if(a===0)s=!0;else{var u=(e.y-n.y)*(i.x-n.x)-(e.x-n.x)*(i.y-n.y),h=((e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))/a,g=u/a;(g<0||g>1||h<0||h>1)&&(s=!0)}}else s=!0;return s?Ct.min(r.pointToSegment(e,n,i),r.pointToSegment(t,n,i),r.pointToSegment(n,e,t),r.pointToSegment(i,e,t)):0}},{key:"pointToSegment",value:function(e,t,n){if(t.x===n.x&&t.y===n.y)return e.distance(t);var i=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),s=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;if(s<=0)return e.distance(t);if(s>=1)return e.distance(n);var a=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/i;return Math.abs(a)*Math.sqrt(i)}},{key:"pointToLinePerpendicular",value:function(e,t,n){var i=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),s=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/i;return Math.abs(s)*Math.sqrt(i)}},{key:"pointToSegmentString",value:function(e,t){if(t.length===0)throw new q("Line array must contain at least one vertex");for(var n=e.distance(t[0]),i=0;i<t.length-1;i++){var s=r.pointToSegment(e,t[i],t[i+1]);s<n&&(n=s)}return n}}]),r}(),ni=function(){function r(){o(this,r)}return c(r,[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||ee(arguments[0],ie);else if(arguments.length!==2){if(arguments.length===3){var e=arguments[0],t=arguments[1];return this.create(e,t)}}}}]),r}(),Ut=function(){function r(){o(this,r)}return c(r,[{key:"filter",value:function(e){}}]),r}(),Xr=function(){function r(){o(this,r)}return c(r,null,[{key:"ofLine",value:function(e){var t=e.size();if(t<=1)return 0;var n=0,i=new k;e.getCoordinate(0,i);for(var s=i.x,a=i.y,u=1;u<t;u++){e.getCoordinate(u,i);var h=i.x,g=i.y,d=h-s,_=g-a;n+=Math.sqrt(d*d+_*_),s=h,a=g}return n}}]),r}(),ii=function r(){o(this,r)},ut=function(){function r(){o(this,r)}return c(r,null,[{key:"copyCoord",value:function(e,t,n,i){for(var s=Math.min(e.getDimension(),n.getDimension()),a=0;a<s;a++)n.setOrdinate(i,a,e.getOrdinate(t,a))}},{key:"isRing",value:function(e){var t=e.size();return t===0||!(t<=3)&&e.getOrdinate(0,ie.X)===e.getOrdinate(t-1,ie.X)&&e.getOrdinate(0,ie.Y)===e.getOrdinate(t-1,ie.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(ee(arguments[0],ie)&&Number.isInteger(arguments[1])){var e=arguments[0],t=arguments[1];r.scroll(e,t,r.isRing(e))}else if(ee(arguments[0],ie)&&arguments[1]instanceof k){var n=arguments[0],i=arguments[1],s=r.indexOf(i,n);if(s<=0)return null;r.scroll(n,s)}}else if(arguments.length===3){var a=arguments[0],u=arguments[1],h=arguments[2],g=u;if(g<=0)return null;for(var d=a.copy(),_=h?a.size()-1:a.size(),S=0;S<_;S++)for(var P=0;P<a.getDimension();P++)a.setOrdinate(S,P,d.getOrdinate((u+S)%_,P));if(h)for(var M=0;M<a.getDimension();M++)a.setOrdinate(_,M,a.getOrdinate(0,M))}}},{key:"isEqual",value:function(e,t){var n=e.size();if(n!==t.size())return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),s=0;s<n;s++)for(var a=0;a<i;a++){var u=e.getOrdinate(s,a),h=t.getOrdinate(s,a);if(e.getOrdinate(s,a)!==t.getOrdinate(s,a)&&(!U.isNaN(u)||!U.isNaN(h)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var e=arguments[0];return r.minCoordinateIndex(e,0,e.size()-1)}if(arguments.length===3){for(var t=arguments[0],n=arguments[1],i=arguments[2],s=-1,a=null,u=n;u<=i;u++){var h=t.getCoordinate(u);(a===null||a.compareTo(h)>0)&&(a=h,s=u)}return s}}},{key:"extend",value:function(e,t,n){var i=e.create(n,t.getDimension()),s=t.size();if(r.copy(t,0,i,0,s),s>0)for(var a=s;a<n;a++)r.copy(t,s-1,i,a,1);return i}},{key:"reverse",value:function(e){for(var t=e.size()-1,n=Math.trunc(t/2),i=0;i<=n;i++)r.swap(e,i,t-i)}},{key:"swap",value:function(e,t,n){if(t===n)return null;for(var i=0;i<e.getDimension();i++){var s=e.getOrdinate(t,i);e.setOrdinate(t,i,e.getOrdinate(n,i)),e.setOrdinate(n,i,s)}}},{key:"copy",value:function(e,t,n,i,s){for(var a=0;a<s;a++)r.copyCoord(e,t+a,n,i+a)}},{key:"ensureValidRing",value:function(e,t){var n=t.size();return n===0?t:n<=3?r.createClosedRing(e,t,4):t.getOrdinate(0,ie.X)===t.getOrdinate(n-1,ie.X)&&t.getOrdinate(0,ie.Y)===t.getOrdinate(n-1,ie.Y)?t:r.createClosedRing(e,t,n+1)}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.size();n++)if(e.x===t.getOrdinate(n,ie.X)&&e.y===t.getOrdinate(n,ie.Y))return n;return-1}},{key:"createClosedRing",value:function(e,t,n){var i=e.create(n,t.getDimension()),s=t.size();r.copy(t,0,i,0,s);for(var a=s;a<n;a++)r.copy(t,0,i,a,1);return i}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.size();n++){var i=e.getCoordinate(n);(t===null||t.compareTo(i)>0)&&(t=i)}return t}}]),r}(),G=function(){function r(){o(this,r)}return c(r,null,[{key:"toDimensionSymbol",value:function(e){switch(e){case r.FALSE:return r.SYM_FALSE;case r.TRUE:return r.SYM_TRUE;case r.DONTCARE:return r.SYM_DONTCARE;case r.P:return r.SYM_P;case r.L:return r.SYM_L;case r.A:return r.SYM_A}throw new q("Unknown dimension value: "+e)}},{key:"toDimensionValue",value:function(e){switch(_n.toUpperCase(e)){case r.SYM_FALSE:return r.FALSE;case r.SYM_TRUE:return r.TRUE;case r.SYM_DONTCARE:return r.DONTCARE;case r.SYM_P:return r.P;case r.SYM_L:return r.L;case r.SYM_A:return r.A}throw new q("Unknown dimension symbol: "+e)}}]),r}();G.P=0,G.L=1,G.A=2,G.FALSE=-1,G.TRUE=-2,G.DONTCARE=-3,G.SYM_FALSE="F",G.SYM_TRUE="T",G.SYM_DONTCARE="*",G.SYM_P="0",G.SYM_L="1",G.SYM_A="2";var Vt=function(){function r(){o(this,r)}return c(r,[{key:"filter",value:function(e){}}]),r}(),Ht=function(){function r(){o(this,r)}return c(r,[{key:"filter",value:function(e,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),r}(),Lt=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new fe:this._points.expandEnvelope(new fe)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Z){var n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var s=n;if(this._points.size()!==s._points.size())return!1;for(var a=0;a<this._points.size();a++)if(!this.equal(this._points.getCoordinate(a),s._points.getCoordinate(a),i))return!1;return!0}return N(p(t.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var n=0;n<Math.trunc(this._points.size()/2);n++){var i=this._points.size()-1-n;if(!this._points.getCoordinate(n).equals(this._points.getCoordinate(i))){if(this._points.getCoordinate(n).compareTo(this._points.getCoordinate(i))>0){var s=this._points.copy();ut.reverse(s),this._points=s}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?G.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var n=this._points.copy();return ut.reverse(n),this.getFactory().createLineString(n)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Xr.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var n=arguments[0],i=n,s=0,a=0;s<this._points.size()&&a<i._points.size();){var u=this._points.getCoordinate(s).compareTo(i._points.getCoordinate(a));if(u!==0)return u;s++,a++}return s<this._points.size()?1:a<i._points.size()?-1:0}if(arguments.length===2){var h=arguments[0],g=arguments[1],d=h;return g.compare(this._points,d._points)}}},{key:"apply",value:function(){if(ee(arguments[0],Ut))for(var n=arguments[0],i=0;i<this._points.size();i++)n.filter(this._points.getCoordinate(i));else if(ee(arguments[0],Ht)){var s=arguments[0];if(this._points.size()===0)return null;for(var a=0;a<this._points.size()&&(s.filter(this._points,a),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(ee(arguments[0],Vt)){var u=arguments[0];u.filter(this)}else if(ee(arguments[0],B)){var h=arguments[0];h.filter(this)}}},{key:"getBoundary",value:function(){throw new tt}},{key:"isEquivalentClass",value:function(n){return n instanceof t}},{key:"getCoordinateN",value:function(n){return this._points.getCoordinate(n)}},{key:"getGeometryType",value:function(){return Z.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(n){if(n===null&&(n=this.getFactory().getCoordinateSequenceFactory().create([])),n.size()===1)throw new q("Invalid number of points in LineString (found "+n.size()+" - must be 0 or >= 2)");this._points=n}},{key:"isCoordinate",value:function(n){for(var i=0;i<this._points.size();i++)if(this._points.getCoordinate(i).equals(n))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(n){return this.getFactory().createPoint(this._points.getCoordinate(n))}},{key:"interfaces_",get:function(){return[ii]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var n=arguments[0],i=arguments[1];Z.constructor_.call(this,i),this.init(n)}}}}]),t}(Z),ri=function r(){o(this,r)},xn=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new fe;var n=new fe;return n.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),n}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new t(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Z){var n=arguments[0],i=arguments[1];return!!this.isEquivalentClass(n)&&(!(!this.isEmpty()||!n.isEmpty())||this.isEmpty()===n.isEmpty()&&this.equal(n.getCoordinate(),this.getCoordinate(),i))}return N(p(t.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return G.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Z.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var n=arguments[0],i=n;return this.getCoordinate().compareTo(i.getCoordinate())}if(arguments.length===2){var s=arguments[0],a=arguments[1],u=s;return a.compare(this._coordinates,u._coordinates)}}},{key:"apply",value:function(){if(ee(arguments[0],Ut)){var n=arguments[0];if(this.isEmpty())return null;n.filter(this.getCoordinate())}else if(ee(arguments[0],Ht)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else if(ee(arguments[0],Vt)){var s=arguments[0];s.filter(this)}else if(ee(arguments[0],B)){var a=arguments[0];a.filter(this)}}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Z.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(n){n===null&&(n=this.getFactory().getCoordinateSequenceFactory().create([])),te.isTrue(n.size()<=1),this._coordinates=n}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[ri]}}],[{key:"constructor_",value:function(){this._coordinates=null;var n=arguments[0],i=arguments[1];Z.constructor_.call(this,i),this.init(n)}}]),t}(Z),si=function(){function r(){o(this,r)}return c(r,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var e=arguments[0];return Math.abs(r.ofRingSigned(e))}if(ee(arguments[0],ie)){var t=arguments[0];return Math.abs(r.ofRingSigned(t))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,i=1;i<e.length-1;i++){var s=e[i].x-n,a=e[i+1].y,u=e[i-1].y;t+=s*(u-a)}return t/2}if(ee(arguments[0],ie)){var h=arguments[0],g=h.size();if(g<3)return 0;var d=new k,_=new k,S=new k;h.getCoordinate(0,_),h.getCoordinate(1,S);var P=_.x;S.x-=P;for(var M=0,H=1;H<g-1;H++)d.y=_.y,_.x=S.x,_.y=S.y,h.getCoordinate(H+1,S),S.x-=P,M+=_.x*(d.y-S.y);return M/2}}}]),r}(),ot=function(){function r(){o(this,r)}return c(r,null,[{key:"sort",value:function(){var e=arguments,t=arguments[0];if(arguments.length===1)t.sort(function(P,M){return P.compareTo(M)});else if(arguments.length===2)t.sort(function(P,M){return e[1].compare(P,M)});else if(arguments.length===3){var n=t.slice(arguments[1],arguments[2]);n.sort();var i=t.slice(0,arguments[1]).concat(n,t.slice(arguments[2],t.length));t.splice(0,t.length);var s,a=O(i);try{for(a.s();!(s=a.n()).done;){var u=s.value;t.push(u)}}catch(P){a.e(P)}finally{a.f()}}else if(arguments.length===4){var h=t.slice(arguments[1],arguments[2]);h.sort(function(P,M){return e[3].compare(P,M)});var g=t.slice(0,arguments[1]).concat(h,t.slice(arguments[2],t.length));t.splice(0,t.length);var d,_=O(g);try{for(_.s();!(d=_.n()).done;){var S=d.value;t.push(S)}}catch(P){_.e(P)}finally{_.f()}}}},{key:"asList",value:function(e){var t,n=new K,i=O(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;n.add(s)}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"copyOf",value:function(e,t){return e.slice(0,t)}}]),r}(),ai=function r(){o(this,r)},Zt=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var n=new Array(this.getNumPoints()).fill(null),i=-1,s=this._shell.getCoordinates(),a=0;a<s.length;a++)n[++i]=s[a];for(var u=0;u<this._holes.length;u++)for(var h=this._holes[u].getCoordinates(),g=0;g<h.length;g++)n[++i]=h[g];return n}},{key:"getArea",value:function(){var n=0;n+=si.ofRing(this._shell.getCoordinateSequence());for(var i=0;i<this._holes.length;i++)n-=si.ofRing(this._holes[i].getCoordinateSequence());return n}},{key:"copyInternal",value:function(){for(var n=this._shell.copy(),i=new Array(this._holes.length).fill(null),s=0;s<this._holes.length;s++)i[s]=this._holes[s].copy();return new t(n,i,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var n=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),s=0;s<5;s++){var a=n.getX(s);if(a!==i.getMinX()&&a!==i.getMaxX())return!1;var u=n.getY(s);if(u!==i.getMinY()&&u!==i.getMaxY())return!1}for(var h=n.getX(0),g=n.getY(0),d=1;d<=4;d++){var _=n.getX(d),S=n.getY(d);if(_!==h==(S!==g))return!1;h=_,g=S}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Z){var n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var s=n,a=this._shell,u=s._shell;if(!a.equalsExact(u,i)||this._holes.length!==s._holes.length)return!1;for(var h=0;h<this._holes.length;h++)if(!this._holes[h].equalsExact(s._holes[h],i))return!1;return!0}return N(p(t.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var n=0;n<this._holes.length;n++)this._holes[n]=this.normalized(this._holes[n],!1);ot.sort(this._holes)}else if(arguments.length===2){var i=arguments[0],s=arguments[1];if(i.isEmpty())return null;var a=i.getCoordinateSequence(),u=ut.minCoordinateIndex(a,0,a.size()-2);ut.scroll(a,u,!0),$.isCCW(a)===s&&ut.reverse(a)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var n=this.getExteriorRing().reverse(),i=new Array(this.getNumInteriorRing()).fill(null),s=0;s<i.length;s++)i[s]=this.getInteriorRingN(s).reverse();return this.getFactory().createPolygon(n,i)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var n=0;n+=this._shell.getLength();for(var i=0;i<this._holes.length;i++)n+=this._holes[i].getLength();return n}},{key:"getNumPoints",value:function(){for(var n=this._shell.getNumPoints(),i=0;i<this._holes.length;i++)n+=this._holes[i].getNumPoints();return n}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(n,i){var s=n.copy();return this.normalize(s,i),s}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var n=arguments[0],i=this._shell,s=n._shell;return i.compareToSameClass(s)}if(arguments.length===2){var a=arguments[0],u=arguments[1],h=a,g=this._shell,d=h._shell,_=g.compareToSameClass(d,u);if(_!==0)return _;for(var S=this.getNumInteriorRing(),P=h.getNumInteriorRing(),M=0;M<S&&M<P;){var H=this.getInteriorRingN(M),W=h.getInteriorRingN(M),j=H.compareToSameClass(W,u);if(j!==0)return j;M++}return M<S?1:M<P?-1:0}}},{key:"apply",value:function(){if(ee(arguments[0],Ut)){var n=arguments[0];this._shell.apply(n);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(n)}else if(ee(arguments[0],Ht)){var s=arguments[0];if(this._shell.apply(s),!s.isDone())for(var a=0;a<this._holes.length&&(this._holes[a].apply(s),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(ee(arguments[0],Vt)){var u=arguments[0];u.filter(this)}else if(ee(arguments[0],B)){var h=arguments[0];h.filter(this),this._shell.apply(h);for(var g=0;g<this._holes.length;g++)this._holes[g].apply(h)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var n=new Array(this._holes.length+1).fill(null);n[0]=this._shell;for(var i=0;i<this._holes.length;i++)n[i+1]=this._holes[i];return n.length<=1?this.getFactory().createLinearRing(n[0].getCoordinateSequence()):this.getFactory().createMultiLineString(n)}},{key:"getGeometryType",value:function(){return Z.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(n){return this._holes[n]}},{key:"interfaces_",get:function(){return[ai]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var n=arguments[0],i=arguments[1],s=arguments[2];if(Z.constructor_.call(this,s),n===null&&(n=this.getFactory().createLinearRing()),i===null&&(i=[]),Z.hasNullElements(i))throw new q("holes must not contain null elements");if(n.isEmpty()&&Z.hasNonEmptyElements(i))throw new q("shell is empty but holes are not");this._shell=n,this._holes=i}}]),t}(Z),Ur=function(r){y(t,r);var e=I(t);function t(){return o(this,t),e.apply(this,arguments)}return t}(jn),ui=function(r){y(t,r);var e=I(t);function t(n){var i;return o(this,t),(i=e.call(this)).array=[],n instanceof Xe&&i.addAll(n),i}return c(t,[{key:"contains",value:function(n){var i,s=O(this.array);try{for(s.s();!(i=s.n()).done;)if(i.value.compareTo(n)===0)return!0}catch(a){s.e(a)}finally{s.f()}return!1}},{key:"add",value:function(n){if(this.contains(n))return!1;for(var i=0,s=this.array.length;i<s;i++)if(this.array[i].compareTo(n)===1)return!!this.array.splice(i,0,n);return this.array.push(n),!0}},{key:"addAll",value:function(n){var i,s=O(n);try{for(s.s();!(i=s.n()).done;){var a=i.value;this.add(a)}}catch(u){s.e(u)}finally{s.f()}return!0}},{key:"remove",value:function(){throw new tt}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Vr(this.array)}}]),t}(Ur),Vr=function(){function r(e){o(this,r),this.array=e,this.position=0}return c(r,[{key:"next",value:function(){if(this.position===this.array.length)throw new Bt;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new tt}}]),r}(),Le=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"computeEnvelopeInternal",value:function(){for(var n=new fe,i=0;i<this._geometries.length;i++)n.expandToInclude(this._geometries[i].getEnvelopeInternal());return n}},{key:"getGeometryN",value:function(n){return this._geometries[n]}},{key:"getCoordinates",value:function(){for(var n=new Array(this.getNumPoints()).fill(null),i=-1,s=0;s<this._geometries.length;s++)for(var a=this._geometries[s].getCoordinates(),u=0;u<a.length;u++)n[++i]=a[u];return n}},{key:"getArea",value:function(){for(var n=0,i=0;i<this._geometries.length;i++)n+=this._geometries[i].getArea();return n}},{key:"copyInternal",value:function(){for(var n=new Array(this._geometries.length).fill(null),i=0;i<n.length;i++)n[i]=this._geometries[i].copy();return new t(n,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Z){var n=arguments[0],i=arguments[1];if(!this.isEquivalentClass(n))return!1;var s=n;if(this._geometries.length!==s._geometries.length)return!1;for(var a=0;a<this._geometries.length;a++)if(!this._geometries[a].equalsExact(s._geometries[a],i))return!1;return!0}return N(p(t.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var n=0;n<this._geometries.length;n++)this._geometries[n].normalize();ot.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var n=G.FALSE,i=0;i<this._geometries.length;i++)n=Math.max(n,this._geometries[i].getBoundaryDimension());return n}},{key:"reverseInternal",value:function(){for(var n=this._geometries.length,i=new K(n),s=0;s<n;s++)i.add(this._geometries[s].reverse());return this.getFactory().buildGeometry(i)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var n=G.FALSE,i=0;i<this._geometries.length;i++)n=Math.max(n,this._geometries[i].getDimension());return n}},{key:"getLength",value:function(){for(var n=0,i=0;i<this._geometries.length;i++)n+=this._geometries[i].getLength();return n}},{key:"getNumPoints",value:function(){for(var n=0,i=0;i<this._geometries.length;i++)n+=this._geometries[i].getNumPoints();return n}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var n=arguments[0],i=new ui(ot.asList(this._geometries)),s=new ui(ot.asList(n._geometries));return this.compare(i,s)}if(arguments.length===2){for(var a=arguments[0],u=arguments[1],h=a,g=this.getNumGeometries(),d=h.getNumGeometries(),_=0;_<g&&_<d;){var S=this.getGeometryN(_),P=h.getGeometryN(_),M=S.compareToSameClass(P,u);if(M!==0)return M;_++}return _<g?1:_<d?-1:0}}},{key:"apply",value:function(){if(ee(arguments[0],Ut))for(var n=arguments[0],i=0;i<this._geometries.length;i++)this._geometries[i].apply(n);else if(ee(arguments[0],Ht)){var s=arguments[0];if(this._geometries.length===0)return null;for(var a=0;a<this._geometries.length&&(this._geometries[a].apply(s),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(ee(arguments[0],Vt)){var u=arguments[0];u.filter(this);for(var h=0;h<this._geometries.length;h++)this._geometries[h].apply(u)}else if(ee(arguments[0],B)){var g=arguments[0];g.filter(this);for(var d=0;d<this._geometries.length;d++)this._geometries[d].apply(g)}}},{key:"getBoundary",value:function(){return Z.checkNotGeometryCollection(this),te.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Z.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var n=0;n<this._geometries.length;n++)if(!this._geometries[n].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var n=arguments[0],i=arguments[1];if(Z.constructor_.call(this,i),n===null&&(n=[]),Z.hasNullElements(n))throw new q("geometries must not contain null elements");this._geometries=n}}}}]),t}(Z),En=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"copyInternal",value:function(){for(var n=new Array(this._geometries.length).fill(null),i=0;i<n.length;i++)n[i]=this._geometries[i].copy();return new t(n,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Z){var n=arguments[0],i=arguments[1];return!!this.isEquivalentClass(n)&&N(p(t.prototype),"equalsExact",this).call(this,n,i)}return N(p(t.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var n=arguments[0];return this._geometries[n].getCoordinate()}return N(p(t.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return G.FALSE}},{key:"getTypeCode",value:function(){return Z.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Z.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[ri]}}],[{key:"constructor_",value:function(){var n=arguments[0],i=arguments[1];Le.constructor_.call(this,n,i)}}]),t}(Le),Rt=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return G.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||N(p(t.prototype),"isClosed",this).call(this)}},{key:"reverseInternal",value:function(){var n=this._points.copy();return ut.reverse(n),this.getFactory().createLinearRing(n)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!N(p(t.prototype),"isClosed",this).call(this))throw new q("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new q("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Z.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var n=arguments[0],i=arguments[1];Lt.constructor_.call(this,n,i),this.validateConstruction()}}]),t}(Lt);Rt.MINIMUM_VALID_SIZE=4;var lt=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"setOrdinate",value:function(n,i){switch(n){case t.X:this.x=i;break;case t.Y:this.y=i;break;default:throw new q("Invalid ordinate index: "+n)}}},{key:"getZ",value:function(){return k.NULL_ORDINATE}},{key:"getOrdinate",value:function(n){switch(n){case t.X:return this.x;case t.Y:return this.y}throw new q("Invalid ordinate index: "+n)}},{key:"setZ",value:function(n){throw new q("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(n){this.x=n.x,this.y=n.y,this.z=n.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)k.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof t){var n=arguments[0];k.constructor_.call(this,n.x,n.y)}else if(arguments[0]instanceof k){var i=arguments[0];k.constructor_.call(this,i.x,i.y)}}else if(arguments.length===2){var s=arguments[0],a=arguments[1];k.constructor_.call(this,s,a,k.NULL_ORDINATE)}}}]),t}(k);lt.X=0,lt.Y=1,lt.Z=-1,lt.M=-1;var ht=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(n,i){switch(n){case t.X:this.x=i;break;case t.Y:this.y=i;break;case t.M:this._m=i;break;default:throw new q("Invalid ordinate index: "+n)}}},{key:"setM",value:function(n){this._m=n}},{key:"getZ",value:function(){return k.NULL_ORDINATE}},{key:"getOrdinate",value:function(n){switch(n){case t.X:return this.x;case t.Y:return this.y;case t.M:return this._m}throw new q("Invalid ordinate index: "+n)}},{key:"setZ",value:function(n){throw new q("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(n){this.x=n.x,this.y=n.y,this.z=n.getZ(),this._m=n.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)k.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var n=arguments[0];k.constructor_.call(this,n.x,n.y),this._m=n._m}else if(arguments[0]instanceof k){var i=arguments[0];k.constructor_.call(this,i.x,i.y),this._m=this.getM()}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];k.constructor_.call(this,s,a,k.NULL_ORDINATE),this._m=u}}}]),t}(k);ht.X=0,ht.Y=1,ht.Z=-1,ht.M=2;var In=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(n,i){switch(n){case k.X:this.x=i;break;case k.Y:this.y=i;break;case k.Z:this.z=i;break;case k.M:this._m=i;break;default:throw new q("Invalid ordinate index: "+n)}}},{key:"setM",value:function(n){this._m=n}},{key:"getOrdinate",value:function(n){switch(n){case k.X:return this.x;case k.Y:return this.y;case k.Z:return this.getZ();case k.M:return this.getM()}throw new q("Invalid ordinate index: "+n)}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(n){this.x=n.x,this.y=n.y,this.z=n.getZ(),this._m=n.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)k.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var n=arguments[0];k.constructor_.call(this,n),this._m=n._m}else if(arguments[0]instanceof k){var i=arguments[0];k.constructor_.call(this,i),this._m=this.getM()}}else if(arguments.length===4){var s=arguments[0],a=arguments[1],u=arguments[2],h=arguments[3];k.constructor_.call(this,s,a,u),this._m=h}}}]),t}(k),Wt=function(){function r(){o(this,r)}return c(r,null,[{key:"measures",value:function(e){return e instanceof lt?0:e instanceof ht||e instanceof In?1:0}},{key:"dimension",value:function(e){return e instanceof lt?2:e instanceof ht?3:e instanceof In?4:3}},{key:"create",value:function(){if(arguments.length===1){var e=arguments[0];return r.create(e,0)}if(arguments.length===2){var t=arguments[0],n=arguments[1];return t===2?new lt:t===3&&n===0?new k:t===3&&n===1?new ht:t===4&&n===1?new In:new k}}}]),r}(),Ot=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"getCoordinate",value:function(n){return this.get(n)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&ee(arguments[0],Xe)){for(var n=arguments[0],i=arguments[1],s=!1,a=n.iterator();a.hasNext();)this.add(a.next(),i),s=!0;return s}return N(p(t.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var n=N(p(t.prototype),"clone",this).call(this),i=0;i<this.size();i++)n.add(i,this.get(i).clone());return n}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(t.coordArrayType);if(arguments.length===1){var n=arguments[0];if(n)return this.toArray(t.coordArrayType);for(var i=this.size(),s=new Array(i).fill(null),a=0;a<i;a++)s[a]=this.get(i-a-1);return s}}},{key:"add",value:function(){if(arguments.length===1){var n=arguments[0];return N(p(t.prototype),"add",this).call(this,n)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var i=arguments[0],s=arguments[1];return this.add(i,s,!0),!0}if(arguments[0]instanceof k&&typeof arguments[1]=="boolean"){var a=arguments[0],u=arguments[1];if(!u&&this.size()>=1){var h=this.get(this.size()-1);if(h.equals2D(a))return null}N(p(t.prototype),"add",this).call(this,a)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var g=arguments[0],d=arguments[1];return this.add(g,d),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var _=arguments[0],S=arguments[1],P=arguments[2];if(P)for(var M=0;M<_.length;M++)this.add(_[M],S);else for(var H=_.length-1;H>=0;H--)this.add(_[H],S);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof k){var W=arguments[0],j=arguments[1],he=arguments[2];if(!he){var ye=this.size();if(ye>0){if(W>0){var Ne=this.get(W-1);if(Ne.equals2D(j))return null}if(W<ye){var be=this.get(W);if(be.equals2D(j))return null}}}N(p(t.prototype),"add",this).call(this,W,j)}}else if(arguments.length===4){var ze=arguments[0],et=arguments[1],gt=arguments[2],Dt=arguments[3],Ft=1;gt>Dt&&(Ft=-1);for(var Et=gt;Et!==Dt;Et+=Ft)this.add(ze[Et],et);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var n=this.get(0).copy();this.add(n,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var n=arguments[0];this.ensureCapacity(n.length),this.add(n,!0)}else if(arguments.length===2){var i=arguments[0],s=arguments[1];this.ensureCapacity(i.length),this.add(i,s)}}}}]),t}(K);Ot.coordArrayType=new Array(0).fill(null);var pe=function(){function r(){o(this,r)}return c(r,null,[{key:"isRing",value:function(e){return!(e.length<4)&&!!e[0].equals2D(e[e.length-1])}},{key:"ptNotInList",value:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(r.indexOf(i,t)<0)return i}return null}},{key:"scroll",value:function(e,t){var n=r.indexOf(t,e);if(n<0)return null;var i=new Array(e.length).fill(null);Me.arraycopy(e,n,i,0,e.length-n),Me.arraycopy(e,0,i,e.length-n,n),Me.arraycopy(i,0,e,0,e.length)}},{key:"equals",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}if(arguments.length===3){var i=arguments[0],s=arguments[1],a=arguments[2];if(i===s)return!0;if(i===null||s===null||i.length!==s.length)return!1;for(var u=0;u<i.length;u++)if(a.compare(i[u],s[u])!==0)return!1;return!0}}},{key:"intersection",value:function(e,t){for(var n=new Ot,i=0;i<e.length;i++)t.intersects(e[i])&&n.add(e[i],!0);return n.toCoordinateArray()}},{key:"measures",value:function(e){if(e===null||e.length===0)return 0;var t,n=0,i=O(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;n=Math.max(n,Wt.measures(s))}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"hasRepeatedPoints",value:function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(e){return r.hasRepeatedPoints(e)?new Ot(e,!1).toCoordinateArray():e}},{key:"reverse",value:function(e){for(var t=e.length-1,n=Math.trunc(t/2),i=0;i<=n;i++){var s=e[i];e[i]=e[t-i],e[t-i]=s}}},{key:"removeNull",value:function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var i=new Array(t).fill(null);if(t===0)return i;for(var s=0,a=0;a<e.length;a++)e[a]!==null&&(i[s++]=e[a]);return i}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=e[n].copy();return t}if(arguments.length===5)for(var i=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],h=arguments[4],g=0;g<h;g++)a[u+g]=i[s+g].copy()}},{key:"isEqualReversed",value:function(e,t){for(var n=0;n<e.length;n++){var i=e[n],s=t[e.length-n-1];if(i.compareTo(s)!==0)return!1}return!0}},{key:"envelope",value:function(e){for(var t=new fe,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t}},{key:"toCoordinateArray",value:function(e){return e.toArray(r.coordArrayType)}},{key:"dimension",value:function(e){if(e===null||e.length===0)return 3;var t,n=0,i=O(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;n=Math.max(n,Wt.dimension(s))}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(e,t){return t.length>=e?t:[]}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}},{key:"increasingDirection",value:function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,i=e[t].compareTo(e[n]);if(i!==0)return i}return 1}},{key:"compare",value:function(e,t){for(var n=0;n<e.length&&n<t.length;){var i=e[n].compareTo(t[n]);if(i!==0)return i;n++}return n<t.length?-1:n<e.length?1:0}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t}},{key:"extract",value:function(e,t,n){t=Ct.clamp(t,0,e.length);var i=(n=Ct.clamp(n,-1,e.length))-t+1;n<0&&(i=0),t>=e.length&&(i=0),n<t&&(i=0);var s=new Array(i).fill(null);if(i===0)return s;for(var a=0,u=t;u<=n;u++)s[a++]=e[u];return s}}]),r}(),Hr=function(){function r(){o(this,r)}return c(r,[{key:"compare",value:function(e,t){var n=e,i=t;return pe.compare(n,i)}},{key:"interfaces_",get:function(){return[Se]}}]),r}(),Zr=function(){function r(){o(this,r)}return c(r,[{key:"compare",value:function(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;var s=pe.compare(n,i);return pe.isEqualReversed(n,i)?0:s}},{key:"OLDcompare",value:function(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;for(var s=pe.increasingDirection(n),a=pe.increasingDirection(i),u=s>0?0:n.length-1,h=a>0?0:n.length-1,g=0;g<n.length;g++){var d=n[u].compareTo(i[h]);if(d!==0)return d;u+=s,h+=a}return 0}},{key:"interfaces_",get:function(){return[Se]}}]),r}();pe.ForwardComparator=Hr,pe.BidirectionalComparator=Zr,pe.coordArrayType=new Array(0).fill(null);var Jt=function(){function r(e){o(this,r),this.str=e}return c(r,[{key:"append",value:function(e){this.str+=e}},{key:"setCharAt",value:function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)}},{key:"toString",value:function(){return this.str}}]),r}(),bt=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getM",value:function(e){return this.hasM()?this._coordinates[e].getM():U.NaN}},{key:"setOrdinate",value:function(e,t,n){switch(t){case ie.X:this._coordinates[e].x=n;break;case ie.Y:this._coordinates[e].y=n;break;default:this._coordinates[e].setOrdinate(t,n)}}},{key:"getZ",value:function(e){return this.hasZ()?this._coordinates[e].getZ():U.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(e,t){switch(t){case ie.X:return this._coordinates[e].x;case ie.Y:return this._coordinates[e].y;default:return this._coordinates[e].getOrdinate(t)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}if(arguments.length===2){var t=arguments[0],n=arguments[1];n.setCoordinate(this._coordinates[t])}}},{key:"getCoordinateCopy",value:function(e){var t=this.createCoordinate();return t.setCoordinate(this._coordinates[e]),t}},{key:"createCoordinate",value:function(){return Wt.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(e){return this._coordinates[e].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(e){for(var t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e}},{key:"copy",value:function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++){var n=this.createCoordinate();n.setCoordinate(this._coordinates[t]),e[t]=n}return new r(e,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var e=new Jt(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"}},{key:"getY",value:function(e){return this._coordinates[e].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ie,X]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];r.constructor_.call(this,e,pe.dimension(e),pe.measures(e))}else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)this._coordinates[n]=new k}else if(ee(arguments[0],ie)){var i=arguments[0];if(i===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._measures=i.getMeasures(),this._coordinates=new Array(i.size()).fill(null);for(var s=0;s<this._coordinates.length;s++)this._coordinates[s]=i.getCoordinateCopy(s)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];r.constructor_.call(this,a,u,pe.measures(a))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var h=arguments[0],g=arguments[1];this._coordinates=new Array(h).fill(null),this._dimension=g;for(var d=0;d<h;d++)this._coordinates[d]=Wt.create(g)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var _=arguments[0],S=arguments[1],P=arguments[2];this._dimension=S,this._measures=P,this._coordinates=_===null?new Array(0).fill(null):_}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var M=arguments[0],H=arguments[1],W=arguments[2];this._coordinates=new Array(M).fill(null),this._dimension=H,this._measures=W;for(var j=0;j<M;j++)this._coordinates[j]=this.createCoordinate()}}}}]),r}(),Nn=function(){function r(){o(this,r)}return c(r,[{key:"readResolve",value:function(){return r.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new bt(e)}if(ee(arguments[0],ie)){var t=arguments[0];return new bt(t)}}else{if(arguments.length===2){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2&&(i=2),new bt(n,i)}if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2],h=a-u;return u>1&&(u=1),h>3&&(h=3),h<2&&(h=2),new bt(s,h+u,u)}}}},{key:"interfaces_",get:function(){return[ni,X]}}],[{key:"instance",value:function(){return r.instanceObject}}]),r}();Nn.instanceObject=new Nn;var Sn=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"copyInternal",value:function(){for(var n=new Array(this._geometries.length).fill(null),i=0;i<n.length;i++)n[i]=this._geometries[i].copy();return new t(n,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Z){var n=arguments[0],i=arguments[1];return!!this.isEquivalentClass(n)&&N(p(t.prototype),"equalsExact",this).call(this,n,i)}return N(p(t.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Z.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var n=new K,i=0;i<this._geometries.length;i++)for(var s=this._geometries[i].getBoundary(),a=0;a<s.getNumGeometries();a++)n.add(s.getGeometryN(a));var u=new Array(n.size()).fill(null);return this.getFactory().createMultiLineString(n.toArray(u))}},{key:"getGeometryType",value:function(){return Z.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[ai]}}],[{key:"constructor_",value:function(){var n=arguments[0],i=arguments[1];Le.constructor_.call(this,n,i)}}]),t}(Le),oi=function(){function r(){o(this,r)}return c(r,[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),r}(),Wr=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),(n=e.call(this)).map=new Map,n}return c(t,[{key:"get",value:function(n){return this.map.get(n)||null}},{key:"put",value:function(n,i){return this.map.set(n,i),i}},{key:"values",value:function(){for(var n=new K,i=this.map.values(),s=i.next();!s.done;)n.add(s.value),s=i.next();return n}},{key:"entrySet",value:function(){var n=new dn;return this.map.entries().forEach(function(i){return n.add(i)}),n}},{key:"size",value:function(){return this.map.size()}}]),t}(oi),qe=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"equals",value:function(e){if(!(e instanceof r))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale}},{key:"compareTo",value:function(e){var t=e,n=this.getMaximumSignificantDigits(),i=t.getMaximumSignificantDigits();return Xt.compare(n,i)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===r.FLOATING||this._modelType===r.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var e="UNKNOWN";return this._modelType===r.FLOATING?e="Floating":this._modelType===r.FLOATING_SINGLE?e="Floating-Single":this._modelType===r.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var e=arguments[0];return U.isNaN(e)||this._modelType===r.FLOATING_SINGLE?e:this._modelType===r.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof k){var t=arguments[0];if(this._modelType===r.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}},{key:"getMaximumSignificantDigits",value:function(){var e=16;return this._modelType===r.FLOATING?e=16:this._modelType===r.FLOATING_SINGLE?e=6:this._modelType===r.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e}},{key:"setScale",value:function(e){this._scale=Math.abs(e)}},{key:"interfaces_",get:function(){return[X,V]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=r.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof yt){var e=arguments[0];this._modelType=e,e===r.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var t=arguments[0];this._modelType=r.FIXED,this.setScale(t)}else if(arguments[0]instanceof r){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}}},{key:"mostPrecise",value:function(e,t){return e.compareTo(t)>=0?e:t}}]),r}(),yt=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"readResolve",value:function(){return r.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){this._name=null;var e=arguments[0];this._name=e,r.nameToTypeMap.put(e,this)}}]),r}();yt.nameToTypeMap=new Wr,qe.Type=yt,qe.FIXED=new yt("FIXED"),qe.FLOATING=new yt("FLOATING"),qe.FLOATING_SINGLE=new yt("FLOATING SINGLE"),qe.maximumPreciseValue=9007199254740992;var wn=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"copyInternal",value:function(){for(var n=new Array(this._geometries.length).fill(null),i=0;i<n.length;i++)n[i]=this._geometries[i].copy();return new t(n,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Z){var n=arguments[0],i=arguments[1];return!!this.isEquivalentClass(n)&&N(p(t.prototype),"equalsExact",this).call(this,n,i)}return N(p(t.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?G.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var n=0;n<this._geometries.length;n++)if(!this._geometries[n].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Z.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new tt}},{key:"getGeometryType",value:function(){return Z.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[ii]}}],[{key:"constructor_",value:function(){var n=arguments[0],i=arguments[1];Le.constructor_.call(this,n,i)}}]),t}(Le),mt=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"createEmpty",value:function(e){switch(e){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new q("Invalid dimension: "+e)}}},{key:"toGeometry",value:function(e){return e.isNull()?this.createPoint():e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new k(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new k(e.getMinX(),e.getMinY()),new k(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new k(e.getMinX(),e.getMinY()),new k(e.getMinX(),e.getMaxY()),new k(e.getMaxX(),e.getMaxY()),new k(e.getMaxX(),e.getMinY()),new k(e.getMinX(),e.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLineString(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(ee(arguments[0],ie)){var t=arguments[0];return new Lt(t,this)}}}},{key:"createMultiLineString",value:function(){if(arguments.length===0)return new wn(null,this);if(arguments.length===1){var e=arguments[0];return new wn(e,this)}}},{key:"buildGeometry",value:function(e){for(var t=null,n=!1,i=!1,s=e.iterator();s.hasNext();){var a=s.next(),u=a.getTypeCode();t===null&&(t=u),u!==t&&(n=!0),a instanceof Le&&(i=!0)}if(t===null)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(r.toGeometryArray(e));var h=e.iterator().next();if(e.size()>1){if(h instanceof Zt)return this.createMultiPolygon(r.toPolygonArray(e));if(h instanceof Lt)return this.createMultiLineString(r.toLineStringArray(e));if(h instanceof xn)return this.createMultiPoint(r.toPointArray(e));te.shouldNeverReachHere("Unhandled geometry type: "+h.getGeometryType())}return h}},{key:"createMultiPointFromCoords",value:function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof k){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}if(ee(arguments[0],ie)){var t=arguments[0];return new xn(t,this)}}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(ee(arguments[0],ie)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Rt){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var i=arguments[0],s=arguments[1];return new Zt(i,s,this)}}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){if(arguments.length===0)return new Le(null,this);if(arguments.length===1){var e=arguments[0];return new Le(e,this)}}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(ee(arguments[0],ie)){var t=arguments[0];return new Rt(t,this)}}}},{key:"createMultiPolygon",value:function(){if(arguments.length===0)return new Sn(null,this);if(arguments.length===1){var e=arguments[0];return new Sn(e,this)}}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new En(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new En(e,this)}if(ee(arguments[0],ie)){var t=arguments[0];if(t===null)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(t.size()).fill(null),i=0;i<t.size();i++){var s=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());ut.copy(t,i,s,0,1),n[i]=this.createPoint(s)}return this.createMultiPoint(n)}}}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)r.constructor_.call(this,new qe,0);else if(arguments.length===1){if(ee(arguments[0],ni)){var e=arguments[0];r.constructor_.call(this,new qe,0,e)}else if(arguments[0]instanceof qe){var t=arguments[0];r.constructor_.call(this,t,0,r.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];r.constructor_.call(this,n,i,r.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this._precisionModel=s,this._coordinateSequenceFactory=u,this._SRID=a}}},{key:"toMultiPolygonArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toGeometryArray",value:function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Nn.instance()}},{key:"toMultiLineStringArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toLineStringArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toMultiPointArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toLinearRingArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toPointArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toPolygonArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}}]),r}(),Tn="XY",Jr="XYZ",Kr="XYM",Qr="XYZM",li={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},hi="EMPTY",Kt=1,$e=2,nt=3,ci=4,dt=5,$r=6;for(var jr in li)li[jr].toUpperCase();var es=function(){function r(e){o(this,r),this.wkt=e,this.index_=-1}return c(r,[{key:"isAlpha_",value:function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}},{key:"isNumeric_",value:function(e,t){return e>="0"&&e<="9"||e=="."&&!(t!==void 0&&t)}},{key:"isWhiteSpace_",value:function(e){return e==" "||e=="	"||e=="\r"||e==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var e,t=this.nextChar_(),n=this.index_,i=t;if(t=="(")e=$e;else if(t==",")e=dt;else if(t==")")e=nt;else if(this.isNumeric_(t)||t=="-")e=ci,i=this.readNumber_();else if(this.isAlpha_(t))e=Kt,i=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t!=="")throw new Error("Unexpected character: "+t);e=$r}return{position:n,value:i,type:e}}},{key:"readNumber_",value:function(){var e,t=this.index_,n=!1,i=!1;do e=="."?n=!0:e!="e"&&e!="E"||(i=!0),e=this.nextChar_();while(this.isNumeric_(e,n)||!i&&(e=="e"||e=="E")||i&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var e,t=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}]),r}(),ts=function(){function r(e,t){o(this,r),this.lexer_=e,this.token_,this.layout_=Tn,this.factory=t}return c(r,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(e){return this.token_.type==e}},{key:"match",value:function(e){var t=this.isTokenType(e);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var e=Tn,t=this.token_;if(this.isTokenType(Kt)){var n=t.value;n==="Z"?e=Jr:n==="M"?e=Kr:n==="ZM"&&(e=Qr),e!==Tn&&this.consume_()}return e}},{key:"parseGeometryCollectionText_",value:function(){if(this.match($e)){var e=[];do e.push(this.parseGeometry_());while(this.match(dt));if(this.match(nt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match($e)){var e=this.parsePoint_();if(this.match(nt))return e}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match($e)){var e=this.parsePointList_();if(this.match(nt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match($e)){var e=this.parseLineStringTextList_();if(this.match(nt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var e;if(this.match($e)){if(e=this.token_.type==$e?this.parsePointTextList_():this.parsePointList_(),this.match(nt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match($e)){var e=this.parseLineStringTextList_();if(this.match(nt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match($e)){var e=this.parsePolygonTextList_();if(this.match(nt))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var e=[],t=this.layout_.length,n=0;n<t;++n){var i=this.token_;if(!this.match(ci))break;e.push(i.value)}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var e=[this.parsePoint_()];this.match(dt);)e.push(this.parsePoint_());return e}},{key:"parsePointTextList_",value:function(){for(var e=[this.parsePointText_()];this.match(dt);)e.push(this.parsePointText_());return e}},{key:"parseLineStringTextList_",value:function(){for(var e=[this.parseLineStringText_()];this.match(dt);)e.push(this.parseLineStringText_());return e}},{key:"parsePolygonTextList_",value:function(){for(var e=[this.parsePolygonText_()];this.match(dt);)e.push(this.parsePolygonText_());return e}},{key:"isEmptyGeometry_",value:function(){var e=this.isTokenType(Kt)&&this.token_.value==hi;return e&&this.consume_(),e}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var e=this.factory,t=function(W){return b(k,T(W))},n=function(W){var j=W.map(function(he){return e.createLinearRing(he.map(t))});return j.length>1?e.createPolygon(j[0],j.slice(1)):e.createPolygon(j[0])},i=this.token_;if(this.match(Kt)){var s=i.value;if(this.layout_=this.parseGeometryLayout_(),s=="GEOMETRYCOLLECTION"){var a=this.parseGeometryCollectionText_();return e.createGeometryCollection(a)}switch(s){case"POINT":var u=this.parsePointText_();return u?e.createPoint(b(k,T(u))):e.createPoint();case"LINESTRING":var h=this.parseLineStringText_().map(t);return e.createLineString(h);case"LINEARRING":var g=this.parseLineStringText_().map(t);return e.createLinearRing(g);case"POLYGON":var d=this.parsePolygonText_();return d&&d.length!==0?n(d):e.createPolygon();case"MULTIPOINT":var _=this.parseMultiPointText_();if(!_||_.length===0)return e.createMultiPoint();var S=_.map(t).map(function(W){return e.createPoint(W)});return e.createMultiPoint(S);case"MULTILINESTRING":var P=this.parseMultiLineStringText_().map(function(W){return e.createLineString(W.map(t))});return e.createMultiLineString(P);case"MULTIPOLYGON":var M=this.parseMultiPolygonText_();if(!M||M.length===0)return e.createMultiPolygon();var H=M.map(n);return e.createMultiPolygon(H);default:throw new Error("Invalid geometry type: "+s)}}throw new Error(this.formatErrorMessage_())}}]),r}();function fi(r){if(r.isEmpty())return"";var e=r.getCoordinate(),t=[e.x,e.y];return e.z===void 0||Number.isNaN(e.z)||t.push(e.z),e.m===void 0||Number.isNaN(e.m)||t.push(e.m),t.join(" ")}function Mt(r){for(var e=r.getCoordinates().map(function(s){var a=[s.x,s.y];return s.z===void 0||Number.isNaN(s.z)||a.push(s.z),s.m===void 0||Number.isNaN(s.m)||a.push(s.m),a}),t=[],n=0,i=e.length;n<i;++n)t.push(e[n].join(" "));return t.join(", ")}function gi(r){var e=[];e.push("("+Mt(r.getExteriorRing())+")");for(var t=0,n=r.getNumInteriorRing();t<n;++t)e.push("("+Mt(r.getInteriorRingN(t))+")");return e.join(", ")}var ns={Point:fi,LineString:Mt,LinearRing:Mt,Polygon:gi,MultiPoint:function(r){for(var e=[],t=0,n=r.getNumGeometries();t<n;++t)e.push("("+fi(r.getGeometryN(t))+")");return e.join(", ")},MultiLineString:function(r){for(var e=[],t=0,n=r.getNumGeometries();t<n;++t)e.push("("+Mt(r.getGeometryN(t))+")");return e.join(", ")},MultiPolygon:function(r){for(var e=[],t=0,n=r.getNumGeometries();t<n;++t)e.push("("+gi(r.getGeometryN(t))+")");return e.join(", ")},GeometryCollection:function(r){for(var e=[],t=0,n=r.getNumGeometries();t<n;++t)e.push(vi(r.getGeometryN(t)));return e.join(", ")}};function vi(r){var e=r.getGeometryType(),t=ns[e];e=e.toUpperCase();var n=function(i){var s="";if(i.isEmpty())return s;var a=i.getCoordinate();return a.z===void 0||Number.isNaN(a.z)||(s+="Z"),a.m===void 0||Number.isNaN(a.m)||(s+="M"),s}(r);return n.length>0&&(e+=" "+n),r.isEmpty()?e+" "+hi:e+" ("+t(r)+")"}var is=function(){function r(e){o(this,r),this.geometryFactory=e||new mt,this.precisionModel=this.geometryFactory.getPrecisionModel()}return c(r,[{key:"read",value:function(e){var t=new es(e);return new ts(t,this.geometryFactory).parse()}},{key:"write",value:function(e){return vi(e)}}]),r}(),Cn=function(){function r(e){o(this,r),this.parser=new is(e)}return c(r,[{key:"write",value:function(e){return this.parser.write(e)}}],[{key:"toLineString",value:function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}}]),r}(),ve=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getIndexAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]}},{key:"getTopologySummary",value:function(){var e=new Jt;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()}},{key:"computeIntersection",value:function(e,t,n,i){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(e,t,n,i)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(e){this._precisionModel=e}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var e=arguments[0],t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}}},{key:"getIntersection",value:function(e){return this._intPt[e]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==r.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(e,t){return r.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1])}},{key:"isCollinear",value:function(){return this._result===r.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Cn.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Cn.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(e,t){return this._inputLines[e][t]}},{key:"isIntersection",value:function(e){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new k,this._intPt[1]=new k,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(e,t,n){var i=Math.abs(n.x-t.x),s=Math.abs(n.y-t.y),a=-1;if(e.equals(t))a=0;else if(e.equals(n))a=i>s?i:s;else{var u=Math.abs(e.x-t.x),h=Math.abs(e.y-t.y);(a=i>s?u:h)!==0||e.equals(t)||(a=Math.max(u,h))}return te.isTrue(!(a===0&&!e.equals(t)),"Bad distance calculation"),a}},{key:"nonRobustComputeEdgeDistance",value:function(e,t,n){var i=e.x-t.x,s=e.y-t.y,a=Math.sqrt(i*i+s*s);return te.isTrue(!(a===0&&!e.equals(t)),"Invalid distance calculation"),a}}]),r}();ve.DONT_INTERSECT=0,ve.DO_INTERSECT=1,ve.COLLINEAR=2,ve.NO_INTERSECTION=0,ve.POINT_INTERSECTION=1,ve.COLLINEAR_INTERSECTION=2;var ct=function(r){y(t,r);var e=I(t);function t(){return o(this,t),e.call(this)}return c(t,[{key:"isInSegmentEnvelopes",value:function(n){var i=new fe(this._inputLines[0][0],this._inputLines[0][1]),s=new fe(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(n)&&s.contains(n)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return N(p(t.prototype),"computeIntersection",this).apply(this,arguments);var n=arguments[0],i=arguments[1],s=arguments[2];if(this._isProper=!1,fe.intersects(i,s,n)&&$.index(i,s,n)===0&&$.index(s,i,n)===0)return this._isProper=!0,(n.equals(i)||n.equals(s))&&(this._isProper=!1),this._result=ve.POINT_INTERSECTION,null;this._result=ve.NO_INTERSECTION}},{key:"intersection",value:function(n,i,s,a){var u=this.intersectionSafe(n,i,s,a);return this.isInSegmentEnvelopes(u)||(u=new k(t.nearestEndpoint(n,i,s,a))),this._precisionModel!==null&&this._precisionModel.makePrecise(u),u}},{key:"checkDD",value:function(n,i,s,a,u){var h=pn.intersection(n,i,s,a),g=this.isInSegmentEnvelopes(h);Me.out.println("DD in env = "+g+"  --------------------- "+h),u.distance(h)>1e-4&&Me.out.println("Distance = "+u.distance(h))}},{key:"intersectionSafe",value:function(n,i,s,a){var u=kn.intersection(n,i,s,a);return u===null&&(u=t.nearestEndpoint(n,i,s,a)),u}},{key:"computeCollinearIntersection",value:function(n,i,s,a){var u=fe.intersects(n,i,s),h=fe.intersects(n,i,a),g=fe.intersects(s,a,n),d=fe.intersects(s,a,i);return u&&h?(this._intPt[0]=s,this._intPt[1]=a,ve.COLLINEAR_INTERSECTION):g&&d?(this._intPt[0]=n,this._intPt[1]=i,ve.COLLINEAR_INTERSECTION):u&&g?(this._intPt[0]=s,this._intPt[1]=n,!s.equals(n)||h||d?ve.COLLINEAR_INTERSECTION:ve.POINT_INTERSECTION):u&&d?(this._intPt[0]=s,this._intPt[1]=i,!s.equals(i)||h||g?ve.COLLINEAR_INTERSECTION:ve.POINT_INTERSECTION):h&&g?(this._intPt[0]=a,this._intPt[1]=n,!a.equals(n)||u||d?ve.COLLINEAR_INTERSECTION:ve.POINT_INTERSECTION):h&&d?(this._intPt[0]=a,this._intPt[1]=i,!a.equals(i)||u||g?ve.COLLINEAR_INTERSECTION:ve.POINT_INTERSECTION):ve.NO_INTERSECTION}},{key:"computeIntersect",value:function(n,i,s,a){if(this._isProper=!1,!fe.intersects(n,i,s,a))return ve.NO_INTERSECTION;var u=$.index(n,i,s),h=$.index(n,i,a);if(u>0&&h>0||u<0&&h<0)return ve.NO_INTERSECTION;var g=$.index(s,a,n),d=$.index(s,a,i);return g>0&&d>0||g<0&&d<0?ve.NO_INTERSECTION:u===0&&h===0&&g===0&&d===0?this.computeCollinearIntersection(n,i,s,a):(u===0||h===0||g===0||d===0?(this._isProper=!1,n.equals2D(s)||n.equals2D(a)?this._intPt[0]=n:i.equals2D(s)||i.equals2D(a)?this._intPt[0]=i:u===0?this._intPt[0]=new k(s):h===0?this._intPt[0]=new k(a):g===0?this._intPt[0]=new k(n):d===0&&(this._intPt[0]=new k(i))):(this._isProper=!0,this._intPt[0]=this.intersection(n,i,s,a)),ve.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(n,i,s,a){var u=n,h=Ue.pointToSegment(n,s,a),g=Ue.pointToSegment(i,s,a);return g<h&&(h=g,u=i),(g=Ue.pointToSegment(s,n,i))<h&&(h=g,u=s),(g=Ue.pointToSegment(a,n,i))<h&&(h=g,u=a),u}}]),t}(ve),rs=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"countSegment",value:function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,i=t.x;return n>i&&(n=t.x,i=e.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var s=$.index(e,t,this._p);if(s===$.COLLINEAR)return this._isPointOnSegment=!0,null;t.y<e.y&&(s=-s),s===$.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==m.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?m.BOUNDARY:this._crossingCount%2==1?m.INTERIOR:m.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof k&&ee(arguments[1],ie)){for(var e=arguments[0],t=arguments[1],n=new r(e),i=new k,s=new k,a=1;a<t.size();a++)if(t.getCoordinate(a,i),t.getCoordinate(a-1,s),n.countSegment(i,s),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof k&&arguments[1]instanceof Array){for(var u=arguments[0],h=arguments[1],g=new r(u),d=1;d<h.length;d++){var _=h[d],S=h[d-1];if(g.countSegment(_,S),g.isOnSegment())return g.getLocation()}return g.getLocation()}}}]),r}(),Ln=function(){function r(){o(this,r)}return c(r,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof k&&ee(arguments[1],ie)){for(var e=arguments[0],t=arguments[1],n=new ct,i=new k,s=new k,a=t.size(),u=1;u<a;u++)if(t.getCoordinate(u-1,i),t.getCoordinate(u,s),n.computeIntersection(e,i,s),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof k&&arguments[1]instanceof Array){for(var h=arguments[0],g=arguments[1],d=new ct,_=1;_<g.length;_++){var S=g[_-1],P=g[_];if(d.computeIntersection(h,S,P),d.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(e,t){return rs.locatePointInRing(e,t)}},{key:"isInRing",value:function(e,t){return r.locateInRing(e,t)!==m.EXTERIOR}}]),r}(),Pe=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"setAllLocations",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e}},{key:"isNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==m.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]===m.NONE&&(this.location[t]=e)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(e){if(e.location.length>this.location.length){var t=new Array(3).fill(null);t[A.ON]=this.location[A.ON],t[A.LEFT]=m.NONE,t[A.RIGHT]=m.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===m.NONE&&n<e.location.length&&(this.location[n]=e.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var e=this.location[A.LEFT];this.location[A.LEFT]=this.location[A.RIGHT],this.location[A.RIGHT]=e}},{key:"toString",value:function(){var e=new Tt;return this.location.length>1&&e.append(m.toLocationSymbol(this.location[A.LEFT])),e.append(m.toLocationSymbol(this.location[A.ON])),this.location.length>1&&e.append(m.toLocationSymbol(this.location[A.RIGHT])),e.toString()}},{key:"setLocations",value:function(e,t,n){this.location[A.ON]=e,this.location[A.LEFT]=t,this.location[A.RIGHT]=n}},{key:"get",value:function(e){return e<this.location.length?this.location[e]:m.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===m.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var e=arguments[0];this.setLocation(A.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}}},{key:"init",value:function(e){this.location=new Array(e).fill(null),this.setAllLocations(m.NONE)}},{key:"isEqualOnSide",value:function(e,t){return this.location[t]===e.location[t]}},{key:"allPositionsEqual",value:function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var t=arguments[0];this.init(1),this.location[A.ON]=t}else if(arguments[0]instanceof r){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[A.ON]=s,this.location[A.LEFT]=a,this.location[A.RIGHT]=u}}}]),r}(),Ae=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getGeometryCount",value:function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}},{key:"setAllLocations",value:function(e,t){this.elt[e].setAllLocations(t)}},{key:"isNull",value:function(e){return this.elt[e].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(e){return this.elt[e].isLine()}},{key:"merge",value:function(e){for(var t=0;t<2;t++)this.elt[t]===null&&e.elt[t]!==null?this.elt[t]=new Pe(e.elt[t]):this.elt[t].merge(e.elt[t])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(A.ON)}if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}}},{key:"toString",value:function(){var e=new Tt;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}}},{key:"isAnyNull",value:function(e){return this.elt[e].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(A.ON,t)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],s=arguments[2];this.elt[n].setLocation(i,s)}}},{key:"isEqualOnSide",value:function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}},{key:"allPositionsEqual",value:function(e,t){return this.elt[e].allPositionsEqual(t)}},{key:"toLine",value:function(e){this.elt[e].isArea()&&(this.elt[e]=new Pe(this.elt[e].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Pe(e),this.elt[1]=new Pe(e)}else if(arguments[0]instanceof r){var t=arguments[0];this.elt[0]=new Pe(t.elt[0]),this.elt[1]=new Pe(t.elt[1])}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.elt[0]=new Pe(m.NONE),this.elt[1]=new Pe(m.NONE),this.elt[n].setLocation(i)}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this.elt[0]=new Pe(s,a,u),this.elt[1]=new Pe(s,a,u)}else if(arguments.length===4){var h=arguments[0],g=arguments[1],d=arguments[2],_=arguments[3];this.elt[0]=new Pe(m.NONE,m.NONE,m.NONE),this.elt[1]=new Pe(m.NONE,m.NONE,m.NONE),this.elt[h].setLocations(g,d,_)}}},{key:"toLineLabel",value:function(e){for(var t=new r(m.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t}}]),r}(),Qt=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var e=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)e[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=$.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(e){this._startDe=e;var t=e,n=!0;do{if(t===null)throw new Qe("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new Qe("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var i=t.getLabel();te.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(e){return this._pts.get(e)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var e=this._startDe;do{var t=e.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(e,t,n){var i=e.getCoordinates();if(t){var s=1;n&&(s=0);for(var a=s;a<i.length;a++)this._pts.add(i[a])}else{var u=i.length-2;n&&(u=i.length-1);for(var h=u;h>=0;h--)this._pts.add(i[h])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)}},{key:"containsPoint",value:function(e){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(e)||!Ln.isInRing(e,t.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(e))return!1;return!0}},{key:"addHole",value:function(e){this._holes.add(e)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],i=t.getLocation(n,A.RIGHT);if(i===m.NONE)return null;if(this._label.getLocation(n)===m.NONE)return this._label.setLocation(n,i),null}}},{key:"setShell",value:function(e){this._shell=e,e!==null&&e.addHole(this)}},{key:"toPolygon",value:function(e){for(var t=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)t[n]=this._holes.get(n).getLinearRing();return e.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new K,this._pts=new K,this._label=new Ae(m.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new K,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()}}}}]),r}(),ss=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"setEdgeRing",value:function(n,i){n.setMinEdgeRing(i)}},{key:"getNext",value:function(n){return n.getNextMin()}}],[{key:"constructor_",value:function(){var n=arguments[0],i=arguments[1];Qt.constructor_.call(this,n,i)}}]),t}(Qt),as=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"buildMinimalRings",value:function(){var n=new K,i=this._startDe;do{if(i.getMinEdgeRing()===null){var s=new ss(i,this._geometryFactory);n.add(s)}i=i.getNext()}while(i!==this._startDe);return n}},{key:"setEdgeRing",value:function(n,i){n.setEdgeRing(i)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var n=this._startDe;do n.getNode().getEdges().linkMinimalDirectedEdges(this),n=n.getNext();while(n!==this._startDe)}},{key:"getNext",value:function(n){return n.getNext()}}],[{key:"constructor_",value:function(){var n=arguments[0],i=arguments[1];Qt.constructor_.call(this,n,i)}}]),t}(Qt),yi=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"setVisited",value:function(e){this._isVisited=e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(e){this._label=e}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(e){this._isCovered=e,this._isCoveredSet=!0}},{key:"updateIM",value:function(e){te.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this._label=e}}}}]),r}(),$t=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"isIncidentEdgeInResult",value:function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();)if(n.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(n){n.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(n){}},{key:"computeMergedLocation",value:function(n,i){var s=m.NONE;if(s=this._label.getLocation(i),!n.isNull(i)){var a=n.getLocation(i);s!==m.BOUNDARY&&(s=a)}return s}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return N(p(t.prototype),"setLabel",this).apply(this,arguments);var n=arguments[0],i=arguments[1];this._label===null?this._label=new Ae(n,i):this._label.setLocation(n,i)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof t){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof Ae)for(var i=arguments[0],s=0;s<2;s++){var a=this.computeMergedLocation(i,s),u=this._label.getLocation(s);u===m.NONE&&this._label.setLocation(s,a)}}},{key:"add",value:function(n){this._edges.insert(n),n.setNode(this)}},{key:"setLabelBoundary",value:function(n){if(this._label===null)return null;var i=m.NONE;this._label!==null&&(i=this._label.getLocation(n));var s=null;switch(i){case m.BOUNDARY:s=m.INTERIOR;break;case m.INTERIOR:default:s=m.BOUNDARY}this._label.setLocation(n,s)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var n=arguments[0],i=arguments[1];this._coord=n,this._edges=i,this._label=new Ae(0,m.NONE)}}]),t}(yi),us=function(r){y(t,r);var e=I(t);function t(){return o(this,t),e.apply(this,arguments)}return t}(oi);function mi(r){return r==null?0:r.color}function ae(r){return r==null?null:r.parent}function Ve(r,e){r!==null&&(r.color=e)}function Rn(r){return r==null?null:r.left}function di(r){return r==null?null:r.right}var Pt=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),(n=e.call(this)).root_=null,n.size_=0,n}return c(t,[{key:"get",value:function(n){for(var i=this.root_;i!==null;){var s=n.compareTo(i.key);if(s<0)i=i.left;else{if(!(s>0))return i.value;i=i.right}}return null}},{key:"put",value:function(n,i){if(this.root_===null)return this.root_={key:n,value:i,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var s,a,u=this.root_;do if(s=u,(a=n.compareTo(u.key))<0)u=u.left;else{if(!(a>0)){var h=u.value;return u.value=i,h}u=u.right}while(u!==null);var g={key:n,left:null,right:null,value:i,parent:s,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return a<0?s.left=g:s.right=g,this.fixAfterInsertion(g),this.size_++,null}},{key:"fixAfterInsertion",value:function(n){var i;for(n.color=1;n!=null&&n!==this.root_&&n.parent.color===1;)ae(n)===Rn(ae(ae(n)))?mi(i=di(ae(ae(n))))===1?(Ve(ae(n),0),Ve(i,0),Ve(ae(ae(n)),1),n=ae(ae(n))):(n===di(ae(n))&&(n=ae(n),this.rotateLeft(n)),Ve(ae(n),0),Ve(ae(ae(n)),1),this.rotateRight(ae(ae(n)))):mi(i=Rn(ae(ae(n))))===1?(Ve(ae(n),0),Ve(i,0),Ve(ae(ae(n)),1),n=ae(ae(n))):(n===Rn(ae(n))&&(n=ae(n),this.rotateRight(n)),Ve(ae(n),0),Ve(ae(ae(n)),1),this.rotateLeft(ae(ae(n))));this.root_.color=0}},{key:"values",value:function(){var n=new K,i=this.getFirstEntry();if(i!==null)for(n.add(i.value);(i=t.successor(i))!==null;)n.add(i.value);return n}},{key:"entrySet",value:function(){var n=new dn,i=this.getFirstEntry();if(i!==null)for(n.add(i);(i=t.successor(i))!==null;)n.add(i);return n}},{key:"rotateLeft",value:function(n){if(n!=null){var i=n.right;n.right=i.left,i.left!=null&&(i.left.parent=n),i.parent=n.parent,n.parent==null?this.root_=i:n.parent.left===n?n.parent.left=i:n.parent.right=i,i.left=n,n.parent=i}}},{key:"rotateRight",value:function(n){if(n!=null){var i=n.left;n.left=i.right,i.right!=null&&(i.right.parent=n),i.parent=n.parent,n.parent==null?this.root_=i:n.parent.right===n?n.parent.right=i:n.parent.left=i,i.right=n,n.parent=i}}},{key:"getFirstEntry",value:function(){var n=this.root_;if(n!=null)for(;n.left!=null;)n=n.left;return n}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(n){for(var i=this.root_;i!==null;){var s=n.compareTo(i.key);if(s<0)i=i.left;else{if(!(s>0))return!0;i=i.right}}return!1}}],[{key:"successor",value:function(n){var i;if(n===null)return null;if(n.right!==null){for(i=n.right;i.left!==null;)i=i.left;return i}i=n.parent;for(var s=n;i!==null&&s===i.right;)s=i,i=i.parent;return i}}]),t}(us),_i=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"find",value:function(e){return this.nodeMap.get(e)}},{key:"addNode",value:function(){if(arguments[0]instanceof k){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof $t){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return i===null?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}}},{key:"print",value:function(e){for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(e){for(var t=new K,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(e)===m.BOUNDARY&&t.add(i)}return t}},{key:"add",value:function(e){var t=e.getCoordinate();this.addNode(t).add(e)}}],[{key:"constructor_",value:function(){this.nodeMap=new Pt,this.nodeFact=null;var e=arguments[0];this.nodeFact=e}}]),r}(),we=function(){function r(){o(this,r)}return c(r,null,[{key:"isNorthern",value:function(e){return e===r.NE||e===r.NW}},{key:"isOpposite",value:function(e,t){return e!==t&&(e-t+4)%4===2}},{key:"commonHalfPlane",value:function(e,t){if(e===t)return e;if((e-t+4)%4===2)return-1;var n=e<t?e:t;return n===0&&(e>t?e:t)===3?3:n}},{key:"isInHalfPlane",value:function(e,t){return t===r.SE?e===r.SE||e===r.SW:e===t||e===t+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new q("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?r.NE:r.SE:t>=0?r.NW:r.SW}if(arguments[0]instanceof k&&arguments[1]instanceof k){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new q("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?r.NE:r.SE:i.y>=n.y?r.NW:r.SW}}}]),r}();we.NE=0,we.NW=1,we.SW=2,we.SE=3;var pi=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"compareDirection",value:function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:$.index(e._p0,e._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(e){this._node=e}},{key:"print",value:function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),s=n.substring(i+1);e.print("  "+s+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)}},{key:"compareTo",value:function(e){var t=e;return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf(".");return"  "+t.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label}},{key:"computeLabel",value:function(e){}},{key:"init",value:function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=we.quadrant(this._dx,this._dy),te.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],i=arguments[2];r.constructor_.call(this,t,n,i,null)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],u=arguments[2],h=arguments[3];r.constructor_.call(this,s),this.init(a,u),this._label=h}}}]),r}(),On=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(n){return this._depth[n]}},{key:"setVisited",value:function(n){this._isVisited=n}},{key:"computeDirectedLabel",value:function(){this._label=new Ae(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(n,i){if(this._depth[n]!==-999&&this._depth[n]!==i)throw new Qe("assigned depths do not match",this.getCoordinate());this._depth[n]=i}},{key:"isInteriorAreaEdge",value:function(){for(var n=!0,i=0;i<2;i++)this._label.isArea(i)&&this._label.getLocation(i,A.LEFT)===m.INTERIOR&&this._label.getLocation(i,A.RIGHT)===m.INTERIOR||(n=!1);return n}},{key:"setNextMin",value:function(n){this._nextMin=n}},{key:"print",value:function(n){N(p(t.prototype),"print",this).call(this,n),n.print(" "+this._depth[A.LEFT]+"/"+this._depth[A.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")}},{key:"setMinEdgeRing",value:function(n){this._minEdgeRing=n}},{key:"isLineEdge",value:function(){var n=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,m.EXTERIOR),s=!this._label.isArea(1)||this._label.allPositionsEqual(1,m.EXTERIOR);return n&&i&&s}},{key:"setEdgeRing",value:function(n){this._edgeRing=n}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n}},{key:"setInResult",value:function(n){this._isInResult=n}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)}},{key:"setSym",value:function(n){this._sym=n}},{key:"setVisitedEdge",value:function(n){this.setVisited(n),this._sym.setVisited(n)}},{key:"setEdgeDepths",value:function(n,i){var s=this.getEdge().getDepthDelta();this._isForward||(s=-s);var a=1;n===A.LEFT&&(a=-1);var u=A.opposite(n),h=i+s*a;this.setDepth(n,i),this.setDepth(u,h)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(n){this._next=n}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var n=arguments[0],i=arguments[1];if(pi.constructor_.call(this,n),this._isForward=i,i)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var s=n.getNumPoints()-1;this.init(n.getCoordinate(s),n.getCoordinate(s-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(n,i){return n===m.EXTERIOR&&i===m.INTERIOR?1:n===m.INTERIOR&&i===m.EXTERIOR?-1:0}}]),t}(pi),ki=function(){function r(){o(this,r)}return c(r,[{key:"createNode",value:function(e){return new $t(e,null)}}]),r}(),xi=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"printEdges",value:function(e){e.println("Edges:");for(var t=0;t<this._edges.size();t++){e.println("edge "+t+":");var n=this._edges.get(t);n.print(e),n.eiList.print(e)}}},{key:"find",value:function(e){return this._nodes.find(e)}},{key:"addNode",value:function(){if(arguments[0]instanceof $t){var e=arguments[0];return this._nodes.addNode(e)}if(arguments[0]instanceof k){var t=arguments[0];return this._nodes.addNode(t)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(e){Me.out.println(e)}},{key:"isBoundaryNode",value:function(e,t){var n=this._nodes.find(t);if(n===null)return!1;var i=n.getLabel();return i!==null&&i.getLocation(e)===m.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(e,t,n,i){return!!e.equals(n)&&$.index(e,t,i)===$.COLLINEAR&&we.quadrant(e,t)===we.quadrant(n,i)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(e){Me.out.print(e)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(e,t){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),s=i.getCoordinates();if(this.matchInSameDirection(e,t,s[0],s[1])||this.matchInSameDirection(e,t,s[s.length-1],s[s.length-2]))return i}return null}},{key:"insertEdge",value:function(e){this._edges.add(e)}},{key:"findEdgeEnd",value:function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null}},{key:"addEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this._edges.add(n);var i=new On(n,!0),s=new On(n,!1);i.setSym(s),s.setSym(i),this.add(i),this.add(s)}}},{key:"add",value:function(e){this._nodes.add(e),this._edgeEndList.add(e)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(e,t){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),s=i.getCoordinates();if(e.equals(s[0])&&t.equals(s[1]))return i}return null}}],[{key:"constructor_",value:function(){if(this._edges=new K,this._nodes=null,this._edgeEndList=new K,arguments.length===0)this._nodes=new _i(new ki);else if(arguments.length===1){var e=arguments[0];this._nodes=new _i(e)}}},{key:"linkResultDirectedEdges",value:function(e){for(var t=e.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}]),r}(),os=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"sortShellsAndHoles",value:function(e,t,n){for(var i=e.iterator();i.hasNext();){var s=i.next();s.isHole()?n.add(s):t.add(s)}}},{key:"computePolygons",value:function(e){for(var t=new K,n=e.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);t.add(i)}return t}},{key:"placeFreeHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next();if(i.getShell()===null){var s=r.findEdgeRingContaining(i,e);if(s===null)throw new Qe("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(s)}}}},{key:"buildMinimalEdgeRings",value:function(e,t,n){for(var i=new K,s=e.iterator();s.hasNext();){var a=s.next();if(a.getMaxNodeDegree()>2){a.linkDirectedEdgesForMinimalEdgeRings();var u=a.buildMinimalRings(),h=this.findShell(u);h!==null?(this.placePolygonHoles(h,u),t.add(h)):n.addAll(u)}else i.add(a)}return i}},{key:"buildMaximalEdgeRings",value:function(e){for(var t=new K,n=e.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&i.getEdgeRing()===null){var s=new as(i,this._geometryFactory);t.add(s),s.setInResult()}}return t}},{key:"placePolygonHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(e)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(e){for(var t=0,n=null,i=e.iterator();i.hasNext();){var s=i.next();s.isHole()||(n=s,t++)}return te.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];xi.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(t),s=new K,a=this.buildMinimalEdgeRings(i,this._shellList,s);this.sortShellsAndHoles(a,this._shellList,s),this.placeFreeHoles(this._shellList,s)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new K;var e=arguments[0];this._geometryFactory=e}},{key:"findEdgeRingContaining",value:function(e,t){for(var n=e.getLinearRing(),i=n.getEnvelopeInternal(),s=n.getCoordinateN(0),a=null,u=null,h=t.iterator();h.hasNext();){var g=h.next(),d=g.getLinearRing(),_=d.getEnvelopeInternal();if(!_.equals(i)&&_.contains(i)){s=pe.ptNotInList(n.getCoordinates(),d.getCoordinates());var S=!1;Ln.isInRing(s,d.getCoordinates())&&(S=!0),S&&(a===null||u.contains(_))&&(u=(a=g).getLinearRing().getEnvelopeInternal())}}return a}}]),r}(),Ei=function(){function r(){o(this,r)}return c(r,[{key:"getBounds",value:function(){}}]),r}(),je=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Ei,X]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t}}]),r}(),jt=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"poll",value:function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(e){for(var t=null,n=this._items.get(e);2*e<=this._size&&((t=2*e)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(n)<0);e=t)this._items.set(e,this._items.get(t));this._items.set(e,n)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(e){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,e)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new K,this._items.add(null)}}]),r}(),ls=function(){function r(){o(this,r)}return c(r,[{key:"insert",value:function(e,t){}},{key:"remove",value:function(e,t){}},{key:"query",value:function(){}}]),r}(),De=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(e){te.isTrue(this._bounds===null),this._childBoundables.add(e)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Ei,X]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new K,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this._level=e}}}}]),r}(),_t={reverseOrder:function(){return{compare:function(r,e){return e.compareTo(r)}}},min:function(r){return _t.sort(r),r.get(0)},sort:function(r,e){var t=r.toArray();e?ot.sort(t,e):ot.sort(t);for(var n=r.iterator(),i=0,s=t.length;i<s;i++)n.next(),n.set(t[i])},singletonList:function(r){var e=new K;return e.add(r),e}},hs=function(){function r(){o(this,r)}return c(r,null,[{key:"maxDistance",value:function(e,t,n,i,s,a,u,h){var g=r.distance(e,t,s,a);return g=Math.max(g,r.distance(e,t,u,h)),g=Math.max(g,r.distance(n,i,s,a)),g=Math.max(g,r.distance(n,i,u,h))}},{key:"distance",value:function(e,t,n,i){var s=n-e,a=i-t;return Math.sqrt(s*s+a*a)}},{key:"maximumDistance",value:function(e,t){var n=Math.min(e.getMinX(),t.getMinX()),i=Math.min(e.getMinY(),t.getMinY()),s=Math.max(e.getMaxX(),t.getMaxX()),a=Math.max(e.getMaxY(),t.getMaxY());return r.distance(n,i,s,a)}},{key:"minMaxDistance",value:function(e,t){var n=e.getMinX(),i=e.getMinY(),s=e.getMaxX(),a=e.getMaxY(),u=t.getMinX(),h=t.getMinY(),g=t.getMaxX(),d=t.getMaxY(),_=r.maxDistance(n,i,n,a,u,h,u,d);return _=Math.min(_,r.maxDistance(n,i,n,a,u,h,g,h)),_=Math.min(_,r.maxDistance(n,i,n,a,g,d,u,d)),_=Math.min(_,r.maxDistance(n,i,n,a,g,d,g,h)),_=Math.min(_,r.maxDistance(n,i,s,i,u,h,u,d)),_=Math.min(_,r.maxDistance(n,i,s,i,u,h,g,h)),_=Math.min(_,r.maxDistance(n,i,s,i,g,d,u,d)),_=Math.min(_,r.maxDistance(n,i,s,i,g,d,g,h)),_=Math.min(_,r.maxDistance(s,a,n,a,u,h,u,d)),_=Math.min(_,r.maxDistance(s,a,n,a,u,h,g,h)),_=Math.min(_,r.maxDistance(s,a,n,a,g,d,u,d)),_=Math.min(_,r.maxDistance(s,a,n,a,g,d,g,h)),_=Math.min(_,r.maxDistance(s,a,s,i,u,h,u,d)),_=Math.min(_,r.maxDistance(s,a,s,i,u,h,g,h)),_=Math.min(_,r.maxDistance(s,a,s,i,g,d,u,d)),_=Math.min(_,r.maxDistance(s,a,s,i,g,d,g,h))}}]),r}(),pt=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"maximumDistance",value:function(){return hs.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(e,t){var n=r.isComposite(this._boundable1),i=r.isComposite(this._boundable2);if(n&&i)return r.area(this._boundable1)>r.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,e,t),null):(this.expand(this._boundable2,this._boundable1,!0,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,e,t),null;if(i)return this.expand(this._boundable2,this._boundable1,!0,e,t),null;throw new q("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(r.isComposite(this._boundable1)||r.isComposite(this._boundable2))}},{key:"compareTo",value:function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(e,t,n,i,s){for(var a=e.getChildBoundables().iterator();a.hasNext();){var u=a.next(),h=null;(h=n?new r(t,u,this._itemDistance):new r(u,t,this._itemDistance)).getDistance()<s&&i.add(h)}}},{key:"getBoundable",value:function(e){return e===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(e){return e.getBounds().getArea()}},{key:"isComposite",value:function(e){return e instanceof De}}]),r}(),Ii=function(){function r(){o(this,r)}return c(r,[{key:"visitItem",value:function(e){}}]),r}(),kt=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"queryInternal",value:function(){if(ee(arguments[2],Ii)&&arguments[0]instanceof Object&&arguments[1]instanceof De)for(var e=arguments[0],t=arguments[1],n=arguments[2],i=t.getChildBoundables(),s=0;s<i.size();s++){var a=i.get(s);this.getIntersectsOp().intersects(a.getBounds(),e)&&(a instanceof De?this.queryInternal(e,a,n):a instanceof je?n.visitItem(a.getItem()):te.shouldNeverReachHere())}else if(ee(arguments[2],at)&&arguments[0]instanceof Object&&arguments[1]instanceof De)for(var u=arguments[0],h=arguments[1],g=arguments[2],d=h.getChildBoundables(),_=0;_<d.size();_++){var S=d.get(_);this.getIntersectsOp().intersects(S.getBounds(),u)&&(S instanceof De?this.queryInternal(u,S,g):S instanceof je?g.add(S.getItem()):te.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(e){return e.get(e.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var e=arguments[0],t=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof De?t+=this.size(i):i instanceof je&&(t+=1)}return t}}},{key:"removeItem",value:function(e,t){for(var n=null,i=e.getChildBoundables().iterator();i.hasNext();){var s=i.next();s instanceof je&&s.getItem()===t&&(n=s)}return n!==null&&(e.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var e=this.itemsTree(this._root);return e===null?new K:e}if(arguments.length===1){for(var t=arguments[0],n=new K,i=t.getChildBoundables().iterator();i.hasNext();){var s=i.next();if(s instanceof De){var a=this.itemsTree(s);a!==null&&n.add(a)}else s instanceof je?n.add(s.getItem()):te.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(e,t){te.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new je(e,t))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var e=arguments[0],t=new K;return this.boundablesAtLevel(e,this._root,t),t}if(arguments.length===3){var n=arguments[0],i=arguments[1],s=arguments[2];if(te.isTrue(n>-2),i.getLevel()===n)return s.add(i),null;for(var a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();u instanceof De?this.boundablesAtLevel(n,u,s):(te.isTrue(u instanceof je),n===-1&&s.add(u))}return null}}},{key:"query",value:function(){if(arguments.length===1){var e=arguments[0];this.build();var t=new K;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.queryInternal(e,this._root,t),t}if(arguments.length===2){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,i)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,t)}if(arguments.length===3){var n=arguments[0],i=arguments[1],s=arguments[2],a=this.removeItem(i,s);if(a)return!0;for(var u=null,h=i.getChildBoundables().iterator();h.hasNext();){var g=h.next();if(this.getIntersectsOp().intersects(g.getBounds(),n)&&g instanceof De&&(a=this.remove(n,g,s))){u=g;break}}return u!==null&&u.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(u),a}}},{key:"createHigherLevels",value:function(e,t){te.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var e=arguments[0],t=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof De){var s=this.depth(i);s>t&&(t=s)}}return t+1}}},{key:"createParentBoundables",value:function(e,t){te.isTrue(!e.isEmpty());var n=new K;n.add(this.createNode(t));var i=new K(e);_t.sort(i,this.getComparator());for(var s=i.iterator();s.hasNext();){var a=s.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(a)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new K,this._nodeCapacity=null,arguments.length===0)r.constructor_.call(this,r.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var e=arguments[0];te.isTrue(e>1,"Node capacity must be greater than 1"),this._nodeCapacity=e}}},{key:"compareDoubles",value:function(e,t){return e>t?1:e<t?-1:0}}]),r}();kt.IntersectsOp=function(){},kt.DEFAULT_NODE_CAPACITY=10;var cs=function(){function r(){o(this,r)}return c(r,[{key:"distance",value:function(e,t){}}]),r}(),He=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(n,i){te.isTrue(n.length>0);for(var s=new K,a=0;a<n.length;a++)s.addAll(this.createParentBoundablesFromVerticalSlice(n[a],i));return s}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.nearestNeighbourK(n,U.POSITIVE_INFINITY,i)}if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2],h=a,g=new jt;g.add(s);for(var d=new jt;!g.isEmpty()&&h>=0;){var _=g.poll(),S=_.getDistance();if(S>=h)break;if(_.isLeaves())if(d.size()<u)d.add(_);else{var P=d.peek();P.getDistance()>S&&(d.poll(),d.add(_));var M=d.peek();h=M.getDistance()}else _.expandToQueue(g,h)}return t.getItems(d)}}},{key:"createNode",value:function(n){return new Ni(n)}},{key:"size",value:function(){return arguments.length===0?N(p(t.prototype),"size",this).call(this):N(p(t.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof fe))return N(p(t.prototype),"insert",this).apply(this,arguments);var n=arguments[0],i=arguments[1];if(n.isNull())return null;N(p(t.prototype),"insert",this).call(this,n,i)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(n,i){for(var s=Math.trunc(Math.ceil(n.size()/i)),a=new Array(i).fill(null),u=n.iterator(),h=0;h<i;h++){a[h]=new K;for(var g=0;u.hasNext()&&g<s;){var d=u.next();a[h].add(d),g++}}return a}},{key:"query",value:function(){if(arguments.length===1){var n=arguments[0];return N(p(t.prototype),"query",this).call(this,n)}if(arguments.length===2){var i=arguments[0],s=arguments[1];N(p(t.prototype),"query",this).call(this,i,s)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(n,i){return N(p(t.prototype),"createParentBoundables",this).call(this,n,i)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof fe){var n=arguments[0],i=arguments[1];return N(p(t.prototype),"remove",this).call(this,n,i)}return N(p(t.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?N(p(t.prototype),"depth",this).call(this):N(p(t.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(n,i){te.isTrue(!n.isEmpty());var s=Math.trunc(Math.ceil(n.size()/this.getNodeCapacity())),a=new K(n);_t.sort(a,t.xComparator);var u=this.verticalSlices(a,Math.trunc(Math.ceil(Math.sqrt(s))));return this.createParentBoundablesFromVerticalSlices(u,i)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(ee(arguments[0],cs)){var n=arguments[0];if(this.isEmpty())return null;var i=new pt(this.getRoot(),this.getRoot(),n);return this.nearestNeighbour(i)}if(arguments[0]instanceof pt){var s=arguments[0],a=U.POSITIVE_INFINITY,u=null,h=new jt;for(h.add(s);!h.isEmpty()&&a>0;){var g=h.poll(),d=g.getDistance();if(d>=a)break;g.isLeaves()?(a=d,u=g):g.expandToQueue(h,a)}return u===null?null:[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else{if(arguments.length===2){var _=arguments[0],S=arguments[1];if(this.isEmpty()||_.isEmpty())return null;var P=new pt(this.getRoot(),_.getRoot(),S);return this.nearestNeighbour(P)}if(arguments.length===3){var M=arguments[0],H=arguments[1],W=arguments[2],j=new je(M,H),he=new pt(this.getRoot(),j,W);return this.nearestNeighbour(he)[0]}if(arguments.length===4){var ye=arguments[0],Ne=arguments[1],be=arguments[2],ze=arguments[3],et=new je(ye,Ne),gt=new pt(this.getRoot(),et,be);return this.nearestNeighbourK(gt,ze)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var n=arguments[0],i=arguments[1],s=U.POSITIVE_INFINITY,a=new jt;for(a.add(n);!a.isEmpty();){var u=a.poll(),h=u.getDistance();if(h>i)return!1;if(u.maximumDistance()<=i)return!0;if(u.isLeaves()){if((s=h)<=i)return!0}else u.expandToQueue(a,s)}return!1}if(arguments.length===3){var g=arguments[0],d=arguments[1],_=arguments[2],S=new pt(this.getRoot(),g.getRoot(),d);return this.isWithinDistance(S,_)}}},{key:"interfaces_",get:function(){return[ls,X]}}],[{key:"constructor_",value:function(){if(arguments.length===0)t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var n=arguments[0];kt.constructor_.call(this,n)}}},{key:"centreX",value:function(n){return t.avg(n.getMinX(),n.getMaxX())}},{key:"avg",value:function(n,i){return(n+i)/2}},{key:"getItems",value:function(n){for(var i=new Array(n.size()).fill(null),s=0;!n.isEmpty();){var a=n.poll();i[s]=a.getBoundable(0).getItem(),s++}return i}},{key:"centreY",value:function(n){return t.avg(n.getMinY(),n.getMaxY())}}]),t}(kt),Ni=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"computeBounds",value:function(){for(var n=null,i=this.getChildBoundables().iterator();i.hasNext();){var s=i.next();n===null?n=new fe(s.getBounds()):n.expandToInclude(s.getBounds())}return n}}],[{key:"constructor_",value:function(){var n=arguments[0];De.constructor_.call(this,n)}}]),t}(De);He.STRtreeNode=Ni,He.xComparator=new(function(){function r(){o(this,r)}return c(r,[{key:"interfaces_",get:function(){return[Se]}},{key:"compare",value:function(e,t){return kt.compareDoubles(He.centreX(e.getBounds()),He.centreX(t.getBounds()))}}]),r}()),He.yComparator=new(function(){function r(){o(this,r)}return c(r,[{key:"interfaces_",get:function(){return[Se]}},{key:"compare",value:function(e,t){return kt.compareDoubles(He.centreY(e.getBounds()),He.centreY(t.getBounds()))}}]),r}()),He.intersectsOp=new(function(){function r(){o(this,r)}return c(r,[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(e,t){return e.intersects(t)}}]),r}()),He.DEFAULT_NODE_CAPACITY=10;var fs=function(){function r(){o(this,r)}return c(r,null,[{key:"relativeSign",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"compare",value:function(e,t,n){if(t.equals2D(n))return 0;var i=r.relativeSign(t.x,n.x),s=r.relativeSign(t.y,n.y);switch(e){case 0:return r.compareValue(i,s);case 1:return r.compareValue(s,i);case 2:return r.compareValue(s,-i);case 3:return r.compareValue(-i,s);case 4:return r.compareValue(-i,-s);case 5:return r.compareValue(-s,-i);case 6:return r.compareValue(-s,i);case 7:return r.compareValue(i,-s)}return te.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0}}]),r}(),gs=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?fs.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._segString=e,this.coord=new k(t),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!t.equals2D(e.getCoordinate(n))}}]),r}(),vs=function(){function r(){o(this,r)}return c(r,[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),r}(),ys=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getSplitCoordinates",value:function(){var e=new Ot;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next();this.addEdgeCoordinates(n,i,e),n=i}return e.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var e=new K;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:"createSplitEdgePts",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2;if(n===2)return[new k(e.coord),new k(t.coord)];var i=this._edge.getCoordinate(t.segmentIndex),s=t.isInterior()||!t.coord.equals2D(i);s||n--;var a=new Array(n).fill(null),u=0;a[u++]=new k(e.coord);for(var h=e.segmentIndex+1;h<=t.segmentIndex;h++)a[u++]=this._edge.getCoordinate(h);return s&&(a[u]=new k(t.coord)),a}},{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"findCollapsesFromExistingVertices",value:function(e){for(var t=0;t<this._edge.size()-2;t++){var n=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var i=this._edge.getCoordinate(t+2);n.equals2D(i)&&e.add(Xt.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(e,t,n){var i=this.createSplitEdgePts(e,t);n.add(i,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next(),s=this.createSplitEdge(n,i);e.add(s),n=i}}},{key:"findCollapseIndex",value:function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var i=t.segmentIndex-e.segmentIndex;return t.isInterior()||i--,i===1&&(n[0]=e.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(e){for(var t=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var s=n.next();this.findCollapseIndex(i,s,t)&&e.add(Xt.valueOf(t[0])),i=s}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)}},{key:"createSplitEdge",value:function(e,t){var n=this.createSplitEdgePts(e,t);return new ft(n,this._edge.getData())}},{key:"add",value:function(e,t){var n=new gs(this._edge,e,t,this._edge.getSegmentOctant(t)),i=this._nodeMap.get(n);return i!==null?(te.isTrue(i.coord.equals2D(e),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(e){var t=this._edge.getCoordinates(),n=e.get(0).getCoordinate(0);if(!n.equals2D(t[0]))throw new Ee("bad split edge start point at "+n);var i=e.get(e.size()-1).getCoordinates(),s=i[i.length-1];if(!s.equals2D(t[t.length-1]))throw new Ee("bad split edge end point at "+s)}}],[{key:"constructor_",value:function(){this._nodeMap=new Pt,this._edge=null;var e=arguments[0];this._edge=e}}]),r}(),ms=function(){function r(){o(this,r)}return c(r,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new q("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),i=Math.abs(t);return e>=0?t>=0?n>=i?0:1:n>=i?7:6:t>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof k&&arguments[1]instanceof k){var s=arguments[0],a=arguments[1],u=a.x-s.x,h=a.y-s.y;if(u===0&&h===0)throw new q("Cannot compute the octant for two identical points "+s);return r.octant(u,h)}}}]),r}(),ds=function(){function r(){o(this,r)}return c(r,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(e){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(e){}},{key:"getData",value:function(){}}]),r}(),_s=function(){function r(){o(this,r)}return c(r,[{key:"addIntersection",value:function(e,t){}},{key:"interfaces_",get:function(){return[ds]}}]),r}(),ft=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(e){return this._pts[e]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this._data=e}},{key:"safeOctant",value:function(e,t){return e.equals2D(t)?0:ms.octant(e,t)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[0],i=arguments[1],s=arguments[3],a=new k(n.getIntersection(s));this.addIntersection(a,i)}}},{key:"toString",value:function(){return Cn.toLineString(new bt(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(e,t){var n=t,i=n+1;if(i<this._pts.length){var s=this._pts[i];e.equals2D(s)&&(n=i)}return this._nodeList.add(e,n)}},{key:"addIntersections",value:function(e,t,n){for(var i=0;i<e.getIntersectionNum();i++)this.addIntersection(e,t,n,i)}},{key:"interfaces_",get:function(){return[_s]}}],[{key:"constructor_",value:function(){this._nodeList=new ys(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var e=arguments[0],t=new K;return r.getNodedSubstrings(e,t),t}if(arguments.length===2)for(var n=arguments[0],i=arguments[1],s=n.iterator();s.hasNext();){var a=s.next();a.getNodeList().addSplitEdges(i)}}}]),r}(),Re=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof r){var e=arguments[0],t=$.index(this.p0,this.p1,e.p0),n=$.index(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}if(arguments[0]instanceof k){var i=arguments[0];return $.index(this.p0,this.p1,i)}}},{key:"toGeometry",value:function(e){return e.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(e){if(!(e instanceof r))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)}},{key:"intersection",value:function(e){var t=new ct;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof k){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new k(e);var t=this.projectionFactor(e),n=new k;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof r){var i=arguments[0],s=this.projectionFactor(i.p0),a=this.projectionFactor(i.p1);if(s>=1&&a>=1||s<=0&&a<=0)return null;var u=this.project(i.p0);s<0&&(u=this.p0),s>1&&(u=this.p1);var h=this.project(i.p1);return a<0&&(h=this.p0),a>1&&(h=this.p1),new r(u,h)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(e){return e===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(e){return Ue.pointToLinePerpendicular(e,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return r.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=t*t+n*n;return i<=0?U.NaN:((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/i}},{key:"closestPoints",value:function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),i=U.MAX_VALUE,s=null,a=this.closestPoint(e.p0);i=a.distance(e.p0),n[0]=a,n[1]=e.p0;var u=this.closestPoint(e.p1);(s=u.distance(e.p1))<i&&(i=s,n[0]=u,n[1]=e.p1);var h=e.closestPoint(this.p0);(s=h.distance(this.p0))<i&&(i=s,n[0]=this.p0,n[1]=h);var g=e.closestPoint(this.p1);return(s=g.distance(this.p1))<i&&(i=s,n[0]=this.p1,n[1]=g),n}},{key:"closestPoint",value:function(e){var t=this.projectionFactor(e);return t>0&&t<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)}},{key:"reverse",value:function(){var e=this.p0;this.p0=this.p1,this.p1=e}},{key:"equalsTopo",value:function(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}},{key:"lineIntersection",value:function(e){return kn.intersection(this.p0,this.p1,e.p0,e.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),i=this.p0.y+e*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y,u=Math.sqrt(s*s+a*a),h=0,g=0;if(t!==0){if(u<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");h=t*s/u,g=t*a/u}return new k(n-g,i+h)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||U.isNaN(t))&&(t=1),t}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(e){var t=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),i=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),s=t*t+n*n,a=t*t-n*n,u=e.getX(),h=e.getY();return new k((-a*u-2*t*n*h-2*t*i)/s,(a*h-2*t*n*u-2*n*i)/s)}},{key:"distance",value:function(){if(arguments[0]instanceof r){var e=arguments[0];return Ue.segmentToSegment(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof k){var t=arguments[0];return Ue.pointToSegment(t,this.p0,this.p1)}}},{key:"pointAlong",value:function(e){var t=new k;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}},{key:"hashCode",value:function(){var e=U.doubleToLongBits(this.p0.x);e^=31*U.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=U.doubleToLongBits(this.p1.x);return n^=31*U.doubleToLongBits(this.p1.y),t^(Math.trunc(n)^Math.trunc(n>>32))}},{key:"interfaces_",get:function(){return[V,X]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)r.constructor_.call(this,new k,new k);else if(arguments.length===1){var e=arguments[0];r.constructor_.call(this,e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0=t,this.p1=n}else if(arguments.length===4){var i=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];r.constructor_.call(this,new k(i,s),new k(a,u))}}},{key:"midPoint",value:function(e,t){return new k((e.x+t.x)/2,(e.y+t.y)/2)}}]),r}(),ps=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Re,this._overlapSeg2=new Re}}]),r}(),Si=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getLineSegment",value:function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]}},{key:"computeSelect",value:function(e,t,n,i){var s=this._pts[t],a=this._pts[n];if(n-t==1)return i.select(this,t),null;if(!e.intersects(s,a))return null;var u=Math.trunc((t+n)/2);t<u&&this.computeSelect(e,t,u,i),u<n&&this.computeSelect(e,u,n,i)}},{key:"getCoordinates",value:function(){for(var e=new Array(this._end-this._start+1).fill(null),t=0,n=this._start;n<=this._end;n++)e[t++]=this._pts[n];return e}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.computeOverlaps(this._start,this._end,e,e._start,e._end,t)}else if(arguments.length===6){var n=arguments[0],i=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],h=arguments[5];if(i-n==1&&u-a==1)return h.overlap(this,n,s,a),null;if(!this.overlaps(n,i,s,a,u))return null;var g=Math.trunc((n+i)/2),d=Math.trunc((a+u)/2);n<g&&(a<d&&this.computeOverlaps(n,g,s,a,d,h),d<u&&this.computeOverlaps(n,g,s,d,u,h)),g<i&&(a<d&&this.computeOverlaps(g,i,s,a,d,h),d<u&&this.computeOverlaps(g,i,s,d,u,h))}}},{key:"setId",value:function(e){this._id=e}},{key:"select",value:function(e,t){this.computeSelect(e,this._start,this._end,t)}},{key:"getEnvelope",value:function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new fe(e,t)}return this._env}},{key:"overlaps",value:function(e,t,n,i,s){return fe.intersects(this._pts[e],this._pts[t],n._pts[i],n._pts[s])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=i}}]),r}(),ks=function(){function r(){o(this,r)}return c(r,null,[{key:"findChainEnd",value:function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var i=we.quadrant(e[n],e[n+1]),s=t+1;s<e.length&&!(!e[s-1].equals2D(e[s])&&we.quadrant(e[s-1],e[s])!==i);)s++;return s-1}},{key:"getChains",value:function(){if(arguments.length===1){var e=arguments[0];return r.getChains(e,null)}if(arguments.length===2){var t=arguments[0],n=arguments[1],i=new K,s=0;do{var a=r.findChainEnd(t,s),u=new Si(t,s,a,n);i.add(u),s=a}while(s<t.length-1);return i}}}]),r}(),bn=function(){function r(){o(this,r)}return c(r,[{key:"computeNodes",value:function(e){}},{key:"getNodedSubstrings",value:function(){}}]),r}(),wi=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"setSegmentIntersector",value:function(e){this._segInt=e}},{key:"interfaces_",get:function(){return[bn]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}}}}]),r}(),Mn=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return ft.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(n){for(var i=ks.getChains(n.getCoordinates(),n).iterator();i.hasNext();){var s=i.next();s.setId(this._idCounter++),this._index.insert(s.getEnvelope(),s),this._monoChains.add(s)}}},{key:"computeNodes",value:function(n){this._nodedSegStrings=n;for(var i=n.iterator();i.hasNext();)this.add(i.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var n=new Ti(this._segInt),i=this._monoChains.iterator();i.hasNext();)for(var s=i.next(),a=this._index.query(s.getEnvelope()).iterator();a.hasNext();){var u=a.next();if(u.getId()>s.getId()&&(s.computeOverlaps(u,n),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new K,this._index=new He,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var n=arguments[0];wi.constructor_.call(this,n)}}}}]),t}(wi),Ti=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"overlap",value:function(){if(arguments.length!==4)return N(p(t.prototype),"overlap",this).apply(this,arguments);var n=arguments[0],i=arguments[1],s=arguments[2],a=arguments[3],u=n.getContext(),h=s.getContext();this._si.processIntersections(u,i,h,a)}}],[{key:"constructor_",value:function(){this._si=null;var n=arguments[0];this._si=n}}]),t}(ps);Mn.SegmentOverlapAction=Ti;var Ye=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"isDeletable",value:function(e,t,n,i){var s=this._inputLine[e],a=this._inputLine[t],u=this._inputLine[n];return!!this.isConcave(s,a,u)&&!!this.isShallow(s,a,u,i)&&this.isShallowSampled(s,a,e,n,i)}},{key:"deleteShallowConcavities",value:function(){for(var e=1,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t),i=!1;n<this._inputLine.length;){var s=!1;this.isDeletable(e,t,n,this._distanceTol)&&(this._isDeleted[t]=r.DELETE,s=!0,i=!0),e=s?n:t,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t)}return i}},{key:"isShallowConcavity",value:function(e,t,n,i){return $.index(e,t,n)===this._angleOrientation&&Ue.pointToSegment(t,e,n)<i}},{key:"isShallowSampled",value:function(e,t,n,i,s){var a=Math.trunc((i-n)/r.NUM_PTS_TO_CHECK);a<=0&&(a=1);for(var u=n;u<i;u+=a)if(!this.isShallow(e,t,this._inputLine[u],s))return!1;return!0}},{key:"isConcave",value:function(e,t,n){var i=$.index(e,t,n)===this._angleOrientation;return i}},{key:"simplify",value:function(e){this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=$.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var t=!1;do t=this.deleteShallowConcavities();while(t);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===r.DELETE;)t++;return t}},{key:"isShallow",value:function(e,t,n,i){return Ue.pointToSegment(t,e,n)<i}},{key:"collapseLine",value:function(){for(var e=new Ot,t=0;t<this._inputLine.length;t++)this._isDeleted[t]!==r.DELETE&&e.add(this._inputLine[t]);return e.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=$.COUNTERCLOCKWISE;var e=arguments[0];this._inputLine=e}},{key:"simplify",value:function(e,t){return new r(e).simplify(t)}}]),r}();Ye.INIT=0,Ye.DELETE=1,Ye.KEEP=1,Ye.NUM_PTS_TO_CHECK=10;var Ci=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getCoordinates",value:function(){return this._ptList.toArray(r.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(e){this._precisionModel=e}},{key:"addPt",value:function(e){var t=new k(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var i=e.length-1;i>=0;i--)this.addPt(e[i])}},{key:"isRedundant",value:function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return e.distance(t)<this._minimimVertexDistance}},{key:"toString",value:function(){return new mt().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var e=new k(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)}},{key:"setMinimumVertexDistance",value:function(e){this._minimimVertexDistance=e}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new K}}]),r}();Ci.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Oe=function(){function r(){o(this,r)}return c(r,null,[{key:"toDegrees",value:function(e){return 180*e/Math.PI}},{key:"normalize",value:function(e){for(;e>Math.PI;)e-=r.PI_TIMES_2;for(;e<=-Math.PI;)e+=r.PI_TIMES_2;return e}},{key:"angle",value:function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}if(arguments.length===2){var t=arguments[0],n=arguments[1],i=n.x-t.x,s=n.y-t.y;return Math.atan2(s,i)}}},{key:"isAcute",value:function(e,t,n){var i=e.x-t.x,s=e.y-t.y;return i*(n.x-t.x)+s*(n.y-t.y)>0}},{key:"isObtuse",value:function(e,t,n){var i=e.x-t.x,s=e.y-t.y;return i*(n.x-t.x)+s*(n.y-t.y)<0}},{key:"interiorAngle",value:function(e,t,n){var i=r.angle(t,e),s=r.angle(t,n);return Math.abs(s-i)}},{key:"normalizePositive",value:function(e){if(e<0){for(;e<0;)e+=r.PI_TIMES_2;e>=r.PI_TIMES_2&&(e=0)}else{for(;e>=r.PI_TIMES_2;)e-=r.PI_TIMES_2;e<0&&(e=0)}return e}},{key:"angleBetween",value:function(e,t,n){var i=r.angle(t,e),s=r.angle(t,n);return r.diff(i,s)}},{key:"diff",value:function(e,t){var n=null;return(n=e<t?t-e:e-t)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(e){return e*Math.PI/180}},{key:"getTurn",value:function(e,t){var n=Math.sin(t-e);return n>0?r.COUNTERCLOCKWISE:n<0?r.CLOCKWISE:r.NONE}},{key:"angleBetweenOriented",value:function(e,t,n){var i=r.angle(t,e),s=r.angle(t,n)-i;return s<=-Math.PI?s+r.PI_TIMES_2:s>Math.PI?s-r.PI_TIMES_2:s}}]),r}();Oe.PI_TIMES_2=2*Math.PI,Oe.PI_OVER_2=Math.PI/2,Oe.PI_OVER_4=Math.PI/4,Oe.COUNTERCLOCKWISE=$.COUNTERCLOCKWISE,Oe.CLOCKWISE=$.CLOCKWISE,Oe.NONE=$.COLLINEAR;var At=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"addNextSegment",value:function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=$.index(this._s0,this._s1,this._s2),i=n===$.CLOCKWISE&&this._side===A.LEFT||n===$.COUNTERCLOCKWISE&&this._side===A.RIGHT;n===0?this.addCollinear(t):i?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)}},{key:"addLineEndCap",value:function(e,t){var n=new Re(e,t),i=new Re;this.computeOffsetSegment(n,A.LEFT,this._distance,i);var s=new Re;this.computeOffsetSegment(n,A.RIGHT,this._distance,s);var a=t.x-e.x,u=t.y-e.y,h=Math.atan2(u,a);switch(this._bufParams.getEndCapStyle()){case L.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(t,h+Math.PI/2,h-Math.PI/2,$.CLOCKWISE,this._distance),this._segList.addPt(s.p1);break;case L.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(s.p1);break;case L.CAP_SQUARE:var g=new k;g.x=Math.abs(this._distance)*Math.cos(h),g.y=Math.abs(this._distance)*Math.sin(h);var d=new k(i.p1.x+g.x,i.p1.y+g.y),_=new k(s.p1.x+g.x,s.p1.y+g.y);this._segList.addPt(d),this._segList.addPt(_)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(e,t,n,i){var s=kn.intersection(t.p0,t.p1,n.p0,n.p1);if(s!==null&&(i<=0?1:s.distance(e)/Math.abs(i))<=this._bufParams.getMitreLimit())return this._segList.addPt(s),null;this.addLimitedMitreJoin(t,n,i,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*r.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===L.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===L.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(e){this._segList.addPt(new k(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new k(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new k(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new k(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(e,t){this._segList.addPts(e,t)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(e,t,n,i,s){var a=t.x-e.x,u=t.y-e.y,h=Math.atan2(u,a),g=n.x-e.x,d=n.y-e.y,_=Math.atan2(d,g);i===$.CLOCKWISE?h<=_&&(h+=2*Math.PI):h>=_&&(h-=2*Math.PI),this._segList.addPt(t),this.addDirectedFillet(e,h,_,i,s),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(e,t,n,i){var s=this._seg0.p1,a=Oe.angle(s,this._seg0.p0),u=Oe.angleBetweenOriented(this._seg0.p0,s,this._seg1.p1)/2,h=Oe.normalize(a+u),g=Oe.normalize(h+Math.PI),d=i*n,_=n-d*Math.abs(Math.sin(u)),S=s.x+d*Math.cos(g),P=s.y+d*Math.sin(g),M=new k(S,P),H=new Re(s,M),W=H.pointAlongOffset(1,_),j=H.pointAlongOffset(1,-_);this._side===A.LEFT?(this._segList.addPt(W),this._segList.addPt(j)):(this._segList.addPt(j),this._segList.addPt(W))}},{key:"addDirectedFillet",value:function(e,t,n,i,s){var a=i===$.CLOCKWISE?-1:1,u=Math.abs(t-n),h=Math.trunc(u/this._filletAngleQuantum+.5);if(h<1)return null;for(var g=u/h,d=new k,_=0;_<h;_++){var S=t+a*_*g;d.x=e.x+s*Math.cos(S),d.y=e.y+s*Math.sin(S),this._segList.addPt(d)}}},{key:"computeOffsetSegment",value:function(e,t,n,i){var s=t===A.LEFT?1:-1,a=e.p1.x-e.p0.x,u=e.p1.y-e.p0.y,h=Math.sqrt(a*a+u*u),g=s*n*a/h,d=s*n*u/h;i.p0.x=e.p0.x-d,i.p0.y=e.p0.y+g,i.p1.x=e.p1.x-d,i.p1.y=e.p1.y+g}},{key:"addInsideTurn",value:function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*r.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new k((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new k((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(e){var t=new k(e.x+this._distance,e.y);this._segList.addPt(t),this.addDirectedFillet(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)}},{key:"init",value:function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ci,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*r.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===L.JOIN_BEVEL||this._bufParams.getJoinStyle()===L.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,$.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Re,this._seg1=new Re,this._offset0=new Re,this._offset1=new Re,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=t,this._li=new ct,this._filletAngleQuantum=Math.PI/2/t.getQuadrantSegments(),t.getQuadrantSegments()>=8&&t.getJoinStyle()===L.JOIN_ROUND&&(this._closingSegLengthFactor=r.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}}]),r}();At.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,At.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,At.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,At.MAX_CLOSING_SEG_LEN_FACTOR=80;var xs=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getOffsetCurve",value:function(e,t){if(this._distance=t,t===0)return null;var n=t<0,i=Math.abs(t),s=this.getSegGen(i);e.length<=1?this.computePointCurve(e[0],s):this.computeOffsetCurve(e,n,s);var a=s.getCoordinates();return n&&pe.reverse(a),a}},{key:"computeSingleSidedBufferCurve",value:function(e,t,n){var i=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var s=Ye.simplify(e,-i),a=s.length-1;n.initSideSegments(s[a],s[a-1],A.LEFT),n.addFirstSegment();for(var u=a-2;u>=0;u--)n.addNextSegment(s[u],!0)}else{n.addSegments(e,!1);var h=Ye.simplify(e,i),g=h.length-1;n.initSideSegments(h[0],h[1],A.LEFT),n.addFirstSegment();for(var d=2;d<=g;d++)n.addNextSegment(h[d],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(e,t,n){var i=this.simplifyTolerance(this._distance);t===A.RIGHT&&(i=-i);var s=Ye.simplify(e,i),a=s.length-1;n.initSideSegments(s[a-1],s[0],t);for(var u=1;u<=a;u++){var h=u!==1;n.addNextSegment(s[u],h)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(e,t){var n=this.simplifyTolerance(this._distance),i=Ye.simplify(e,n),s=i.length-1;t.initSideSegments(i[0],i[1],A.LEFT);for(var a=2;a<=s;a++)t.addNextSegment(i[a],!0);t.addLastSegment(),t.addLineEndCap(i[s-1],i[s]);var u=Ye.simplify(e,-n),h=u.length-1;t.initSideSegments(u[h],u[h-1],A.LEFT);for(var g=h-2;g>=0;g--)t.addNextSegment(u[g],!0);t.addLastSegment(),t.addLineEndCap(u[1],u[0]),t.closeRing()}},{key:"computePointCurve",value:function(e,t){switch(this._bufParams.getEndCapStyle()){case L.CAP_ROUND:t.createCircle(e);break;case L.CAP_SQUARE:t.createSquare(e)}}},{key:"getLineCurve",value:function(e,t){if(this._distance=t,this.isLineOffsetEmpty(t))return null;var n=Math.abs(t),i=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],i);else if(this._bufParams.isSingleSided()){var s=t<0;this.computeSingleSidedBufferCurve(e,s,i)}else this.computeLineBufferCurve(e,i);return i.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(e){return e*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return r.copyCoordinates(e);var i=this.getSegGen(n);return this.computeRingBufferCurve(e,t,i),i.getCoordinates()}},{key:"computeOffsetCurve",value:function(e,t,n){var i=this.simplifyTolerance(this._distance);if(t){var s=Ye.simplify(e,-i),a=s.length-1;n.initSideSegments(s[a],s[a-1],A.LEFT),n.addFirstSegment();for(var u=a-2;u>=0;u--)n.addNextSegment(s[u],!0)}else{var h=Ye.simplify(e,i),g=h.length-1;n.initSideSegments(h[0],h[1],A.LEFT),n.addFirstSegment();for(var d=2;d<=g;d++)n.addNextSegment(h[d],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(e){return e===0||e<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(e){return new At(this._precisionModel,this._bufParams,e)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t}},{key:"copyCoordinates",value:function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new k(e[n]);return t}}]),r}(),Li=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var e=arguments[0],t=new K,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),s=i.getEnvelope();e.y<s.getMinY()||e.y>s.getMaxY()||this.findStabbedSegments(e,i.getDirectedEdges(),t)}return t}if(arguments.length===3){if(ee(arguments[2],at)&&arguments[0]instanceof k&&arguments[1]instanceof On)for(var a=arguments[0],u=arguments[1],h=arguments[2],g=u.getEdge().getCoordinates(),d=0;d<g.length-1;d++){this._seg.p0=g[d],this._seg.p1=g[d+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse();var _=Math.max(this._seg.p0.x,this._seg.p1.x);if(!(_<a.x)&&!(this._seg.isHorizontal()||a.y<this._seg.p0.y||a.y>this._seg.p1.y||$.index(this._seg.p0,this._seg.p1,a)===$.RIGHT)){var S=u.getDepth(A.LEFT);this._seg.p0.equals(g[d])||(S=u.getDepth(A.RIGHT));var P=new Ri(this._seg,S);h.add(P)}}else if(ee(arguments[2],at)&&arguments[0]instanceof k&&ee(arguments[1],at))for(var M=arguments[0],H=arguments[1],W=arguments[2],j=H.iterator();j.hasNext();){var he=j.next();he.isForward()&&this.findStabbedSegments(M,he,W)}}}},{key:"getDepth",value:function(e){var t=this.findStabbedSegments(e);return t.size()===0?0:_t.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Re;var e=arguments[0];this._subgraphs=e}}]),r}(),Ri=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"compareTo",value:function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return n!==0||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg))!==0?n:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new Re(e),this._leftDepth=t}}]),r}();Li.DepthSegment=Ri;var Oi=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,null,[{key:"constructor_",value:function(){z.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}]),t}(z),Pn=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getY",value:function(){var e=this.y/this.w;if(U.isNaN(e)||U.isInfinite(e))throw new Oi;return e}},{key:"getX",value:function(){var e=this.x/this.w;if(U.isNaN(e)||U.isInfinite(e))throw new Oi;return e}},{key:"getCoordinate",value:function(){var e=new k;return e.x=this.getX(),e.y=this.getY(),e}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];this.x=t,this.y=n,this.w=1}else if(arguments[0]instanceof r&&arguments[1]instanceof r){var i=arguments[0],s=arguments[1];this.x=i.y*s.w-s.y*i.w,this.y=s.x*i.w-i.x*s.w,this.w=i.x*s.y-s.x*i.y}else if(arguments[0]instanceof k&&arguments[1]instanceof k){var a=arguments[0],u=arguments[1];this.x=a.y-u.y,this.y=u.x-a.x,this.w=a.x*u.y-u.x*a.y}}else if(arguments.length===3){var h=arguments[0],g=arguments[1],d=arguments[2];this.x=h,this.y=g,this.w=d}else if(arguments.length===4){var _=arguments[0],S=arguments[1],P=arguments[2],M=arguments[3],H=_.y-S.y,W=S.x-_.x,j=_.x*S.y-S.x*_.y,he=P.y-M.y,ye=M.x-P.x,Ne=P.x*M.y-M.x*P.y;this.x=W*Ne-ye*j,this.y=he*j-H*Ne,this.w=H*ye-he*W}}}]),r}(),Es=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"area",value:function(){return r.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return r.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(e){if(e===null)throw new q("Supplied point is null.");return r.interpolateZ(e,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return r.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return r.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return r.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return r.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return r.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return r.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.p0=e,this.p1=t,this.p2=n}},{key:"area",value:function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)}},{key:"signedArea",value:function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2}},{key:"det",value:function(e,t,n,i){return e*i-t*n}},{key:"interpolateZ",value:function(e,t,n,i){var s=t.x,a=t.y,u=n.x-s,h=i.x-s,g=n.y-a,d=i.y-a,_=u*d-h*g,S=e.x-s,P=e.y-a,M=(d*S-h*P)/_,H=(-g*S+u*P)/_;return t.getZ()+M*(n.getZ()-t.getZ())+H*(i.getZ()-t.getZ())}},{key:"longestSideLength",value:function(e,t,n){var i=e.distance(t),s=t.distance(n),a=n.distance(e),u=i;return s>u&&(u=s),a>u&&(u=a),u}},{key:"circumcentreDD",value:function(e,t,n){var i=Q.valueOf(e.x).subtract(n.x),s=Q.valueOf(e.y).subtract(n.y),a=Q.valueOf(t.x).subtract(n.x),u=Q.valueOf(t.y).subtract(n.y),h=Q.determinant(i,s,a,u).multiply(2),g=i.sqr().add(s.sqr()),d=a.sqr().add(u.sqr()),_=Q.determinant(s,g,u,d),S=Q.determinant(i,g,a,d),P=Q.valueOf(n.x).subtract(_.divide(h)).doubleValue(),M=Q.valueOf(n.y).add(S.divide(h)).doubleValue();return new k(P,M)}},{key:"isAcute",value:function(e,t,n){return!!Oe.isAcute(e,t,n)&&!!Oe.isAcute(t,n,e)&&!!Oe.isAcute(n,e,t)}},{key:"circumcentre",value:function(e,t,n){var i=n.x,s=n.y,a=e.x-i,u=e.y-s,h=t.x-i,g=t.y-s,d=2*r.det(a,u,h,g),_=r.det(u,a*a+u*u,g,h*h+g*g),S=r.det(a,a*a+u*u,h,h*h+g*g);return new k(i-_/d,s+S/d)}},{key:"perpendicularBisector",value:function(e,t){var n=t.x-e.x,i=t.y-e.y,s=new Pn(e.x+n/2,e.y+i/2,1),a=new Pn(e.x-i+n/2,e.y+n+i/2,1);return new Pn(s,a)}},{key:"angleBisector",value:function(e,t,n){var i=t.distance(e),s=i/(i+t.distance(n)),a=n.x-e.x,u=n.y-e.y;return new k(e.x+s*a,e.y+s*u)}},{key:"area3D",value:function(e,t,n){var i=t.x-e.x,s=t.y-e.y,a=t.getZ()-e.getZ(),u=n.x-e.x,h=n.y-e.y,g=n.getZ()-e.getZ(),d=s*g-a*h,_=a*u-i*g,S=i*h-s*u,P=d*d+_*_+S*S,M=Math.sqrt(P)/2;return M}},{key:"centroid",value:function(e,t,n){var i=(e.x+t.x+n.x)/3,s=(e.y+t.y+n.y)/3;return new k(i,s)}},{key:"inCentre",value:function(e,t,n){var i=t.distance(n),s=e.distance(n),a=e.distance(t),u=i+s+a,h=(i*e.x+s*t.x+a*n.x)/u,g=(i*e.y+s*t.y+a*n.y)/u;return new k(h,g)}}]),r}(),Is=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"addRingSide",value:function(e,t,n,i,s){if(t===0&&e.length<Rt.MINIMUM_VALID_SIZE)return null;var a=i,u=s;e.length>=Rt.MINIMUM_VALID_SIZE&&$.isCCW(e)&&(a=s,u=i,n=A.opposite(n));var h=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(h,a,u)}},{key:"addRingBothSides",value:function(e,t){this.addRingSide(e,t,A.LEFT,m.EXTERIOR,m.INTERIOR),this.addRingSide(e,t,A.RIGHT,m.INTERIOR,m.EXTERIOR)}},{key:"addPoint",value:function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,m.EXTERIOR,m.INTERIOR)}},{key:"addPolygon",value:function(e){var t=this._distance,n=A.LEFT;this._distance<0&&(t=-this._distance,n=A.RIGHT);var i=e.getExteriorRing(),s=pe.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&s.length<3)return null;this.addRingSide(s,t,n,m.EXTERIOR,m.INTERIOR);for(var a=0;a<e.getNumInteriorRing();a++){var u=e.getInteriorRingN(a),h=pe.removeRepeatedPoints(u.getCoordinates());this._distance>0&&this.isErodedCompletely(u,-this._distance)||this.addRingSide(h,t,A.opposite(n),m.INTERIOR,m.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(e,t){var n=new Es(e[0],e[1],e[2]),i=n.inCentre();return Ue.pointToSegment(i,n.p0,n.p1)<Math.abs(t)}},{key:"addLineString",value:function(e){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=pe.removeRepeatedPoints(e.getCoordinates());if(pe.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,m.EXTERIOR,m.INTERIOR)}}},{key:"addCurve",value:function(e,t,n){if(e===null||e.length<2)return null;var i=new ft(e,new Ae(0,m.BOUNDARY,t,n));this._curveList.add(i)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(e){if(e.isEmpty())return null;if(e instanceof Zt)this.addPolygon(e);else if(e instanceof Lt)this.addLineString(e);else if(e instanceof xn)this.addPoint(e);else if(e instanceof En)this.addCollection(e);else if(e instanceof wn)this.addCollection(e);else if(e instanceof Sn)this.addCollection(e);else{if(!(e instanceof Le))throw new tt(e.getGeometryType());this.addCollection(e)}}},{key:"isErodedCompletely",value:function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(n.length===4)return this.isTriangleErodedCompletely(n,t);var i=e.getEnvelopeInternal(),s=Math.min(i.getHeight(),i.getWidth());return t<0&&2*Math.abs(t)>s}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new K;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n}}]),r}(),Ns=function(){function r(){o(this,r)}return c(r,[{key:"locate",value:function(e){}}]),r}(),Ss=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,r.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Bt;var e=this._parent.getGeometryN(this._index++);return e instanceof Le?(this._subcollectionIterator=new r(e),this._subcollectionIterator.next()):e}},{key:"remove",value:function(){throw new tt(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[vs]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()}},{key:"isAtomic",value:function(e){return!(e instanceof Le)}}]),r}(),ws=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"locate",value:function(e){return r.locate(e,this._geom)}},{key:"interfaces_",get:function(){return[Ns]}}],[{key:"constructor_",value:function(){this._geom=null;var e=arguments[0];this._geom=e}},{key:"locatePointInPolygon",value:function(e,t){if(t.isEmpty())return m.EXTERIOR;var n=t.getExteriorRing(),i=r.locatePointInRing(e,n);if(i!==m.INTERIOR)return i;for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=r.locatePointInRing(e,a);if(u===m.BOUNDARY)return m.BOUNDARY;if(u===m.INTERIOR)return m.EXTERIOR}return m.INTERIOR}},{key:"locatePointInRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?Ln.locateInRing(e,t.getCoordinates()):m.EXTERIOR}},{key:"containsPointInPolygon",value:function(e,t){return m.EXTERIOR!==r.locatePointInPolygon(e,t)}},{key:"locateInGeometry",value:function(e,t){if(t instanceof Zt)return r.locatePointInPolygon(e,t);if(t instanceof Le)for(var n=new Ss(t);n.hasNext();){var i=n.next();if(i!==t){var s=r.locateInGeometry(e,i);if(s!==m.EXTERIOR)return s}}return m.EXTERIOR}},{key:"isContained",value:function(e,t){return m.EXTERIOR!==r.locate(e,t)}},{key:"locate",value:function(e,t){return t.isEmpty()?m.EXTERIOR:t.getEnvelopeInternal().intersects(e)?r.locateInGeometry(e,t):m.EXTERIOR}}]),r}(),Ts=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getNextCW",value:function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return t===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:"propagateSideLabels",value:function(e){for(var t=m.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(e)&&i.getLocation(e,A.LEFT)!==m.NONE&&(t=i.getLocation(e,A.LEFT))}if(t===m.NONE)return null;for(var s=t,a=this.iterator();a.hasNext();){var u=a.next(),h=u.getLabel();if(h.getLocation(e,A.ON)===m.NONE&&h.setLocation(e,A.ON,s),h.isArea(e)){var g=h.getLocation(e,A.LEFT),d=h.getLocation(e,A.RIGHT);if(d!==m.NONE){if(d!==s)throw new Qe("side location conflict",u.getCoordinate());g===m.NONE&&te.shouldNeverReachHere("found single null side (at "+u.getCoordinate()+")"),s=g}else te.isTrue(h.getLocation(e,A.LEFT)===m.NONE,"found single null side"),h.setLocation(e,A.RIGHT,s),h.setLocation(e,A.LEFT,s)}}}},{key:"getCoordinate",value:function(){var e=this.iterator();return e.hasNext()?e.next().getCoordinate():null}},{key:"print",value:function(e){Me.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"isAreaLabelsConsistent",value:function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,i=t.get(n).getLabel().getLocation(e,A.LEFT);te.isTrue(i!==m.NONE,"Found unlabelled area edge");for(var s=i,a=this.iterator();a.hasNext();){var u=a.next().getLabel();te.isTrue(u.isArea(e),"Found non-area edge");var h=u.getLocation(e,A.LEFT),g=u.getLocation(e,A.RIGHT);if(h===g||g!==s)return!1;s=h}return!0}},{key:"findIndex",value:function(e){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===e)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new K(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(e,t,n){return this._ptInAreaLocation[e]===m.NONE&&(this._ptInAreaLocation[e]=ws.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]}},{key:"toString",value:function(){var e=new Tt;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append(`
`)}return e.toString()}},{key:"computeEdgeEndLabels",value:function(e){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(e)}},{key:"computeLabelling",value:function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),s=0;s<2;s++)i.isLine(s)&&i.getLocation(s)===m.BOUNDARY&&(t[s]=!0);for(var a=this.iterator();a.hasNext();)for(var u=a.next(),h=u.getLabel(),g=0;g<2;g++)if(h.isAnyNull(g)){var d=m.NONE;if(t[g])d=m.EXTERIOR;else{var _=u.getCoordinate();d=this.getLocation(g,_,e)}h.setAllLocationsIfNull(g,d)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(e,t){this._edgeMap.put(e,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Pt,this._edgeList=null,this._ptInAreaLocation=[m.NONE,m.NONE]}}]),r}(),Cs=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var n=null,i=null,s=this._SCANNING_FOR_INCOMING,a=0;a<this._resultAreaEdgeList.size();a++){var u=this._resultAreaEdgeList.get(a),h=u.getSym();if(u.getLabel().isArea())switch(n===null&&u.isInResult()&&(n=u),s){case this._SCANNING_FOR_INCOMING:if(!h.isInResult())continue;i=h,s=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!u.isInResult())continue;i.setNext(u),s=this._SCANNING_FOR_INCOMING}}if(s===this._LINKING_TO_OUTGOING){if(n===null)throw new Qe("no outgoing dirEdge found",this.getCoordinate());te.isTrue(n.isInResult(),"unable to link last incoming dirEdge"),i.setNext(n)}}},{key:"insert",value:function(n){var i=n;this.insertEdgeEnd(i,i)}},{key:"getRightmostEdge",value:function(){var n=this.getEdges(),i=n.size();if(i<1)return null;var s=n.get(0);if(i===1)return s;var a=n.get(i-1),u=s.getQuadrant(),h=a.getQuadrant();return we.isNorthern(u)&&we.isNorthern(h)?s:we.isNorthern(u)||we.isNorthern(h)?s.getDy()!==0?s:a.getDy()!==0?a:(te.shouldNeverReachHere("found two horizontal edges incident on node"),null):a}},{key:"print",value:function(n){Me.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var i=this.iterator();i.hasNext();){var s=i.next();n.print("out "),s.print(n),n.println(),n.print("in "),s.getSym().print(n),n.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new K;for(var n=this.iterator();n.hasNext();){var i=n.next();(i.isInResult()||i.getSym().isInResult())&&this._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(n){for(var i=this.iterator();i.hasNext();){var s=i.next().getLabel();s.setAllLocationsIfNull(0,n.getLocation(0)),s.setAllLocationsIfNull(1,n.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var n=null,i=null,s=this._edgeList.size()-1;s>=0;s--){var a=this._edgeList.get(s),u=a.getSym();i===null&&(i=u),n!==null&&u.setNext(n),n=a}i.setNext(n)}},{key:"computeDepths",value:function(){if(arguments.length===1){var n=arguments[0],i=this.findIndex(n),s=n.getDepth(A.LEFT),a=n.getDepth(A.RIGHT),u=this.computeDepths(i+1,this._edgeList.size(),s),h=this.computeDepths(0,i,u);if(h!==a)throw new Qe("depth mismatch at "+n.getCoordinate())}else if(arguments.length===3){for(var g=arguments[0],d=arguments[1],_=arguments[2],S=_,P=g;P<d;P++){var M=this._edgeList.get(P);M.setEdgeDepths(A.RIGHT,S),S=M.getDepth(A.LEFT)}return S}}},{key:"mergeSymLabels",value:function(){for(var n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().merge(i.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(n){for(var i=null,s=null,a=this._SCANNING_FOR_INCOMING,u=this._resultAreaEdgeList.size()-1;u>=0;u--){var h=this._resultAreaEdgeList.get(u),g=h.getSym();switch(i===null&&h.getEdgeRing()===n&&(i=h),a){case this._SCANNING_FOR_INCOMING:if(g.getEdgeRing()!==n)continue;s=g,a=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(h.getEdgeRing()!==n)continue;s.setNextMin(h),a=this._SCANNING_FOR_INCOMING}}a===this._LINKING_TO_OUTGOING&&(te.isTrue(i!==null,"found null for first outgoing dirEdge"),te.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),s.setNextMin(i))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var n=0,i=this.iterator();i.hasNext();){var s=i.next();s.isInResult()&&n++}return n}if(arguments.length===1){for(var a=arguments[0],u=0,h=this.iterator();h.hasNext();){var g=h.next();g.getEdgeRing()===a&&u++}return u}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var n=m.NONE,i=this.iterator();i.hasNext();){var s=i.next(),a=s.getSym();if(!s.isLineEdge()){if(s.isInResult()){n=m.INTERIOR;break}if(a.isInResult()){n=m.EXTERIOR;break}}}if(n===m.NONE)return null;for(var u=n,h=this.iterator();h.hasNext();){var g=h.next(),d=g.getSym();g.isLineEdge()?g.getEdge().setCovered(u===m.INTERIOR):(g.isInResult()&&(u=m.EXTERIOR),d.isInResult()&&(u=m.INTERIOR))}}},{key:"computeLabelling",value:function(n){N(p(t.prototype),"computeLabelling",this).call(this,n),this._label=new Ae(m.NONE);for(var i=this.iterator();i.hasNext();)for(var s=i.next().getEdge().getLabel(),a=0;a<2;a++){var u=s.getLocation(a);u!==m.INTERIOR&&u!==m.BOUNDARY||this._label.setLocation(a,m.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),t}(Ts),Ls=function(r){y(t,r);var e=I(t);function t(){return o(this,t),e.call(this)}return c(t,[{key:"createNode",value:function(n){return new $t(n,new Cs)}}]),t}(ki),bi=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"compareTo",value:function(e){var t=e;return r.compareOriented(this._pts,this._orientation,t._pts,t._orientation)}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=r.orientation(e)}},{key:"orientation",value:function(e){return pe.increasingDirection(e)===1}},{key:"compareOriented",value:function(e,t,n,i){for(var s=t?1:-1,a=i?1:-1,u=t?e.length:-1,h=i?n.length:-1,g=t?0:e.length-1,d=i?0:n.length-1;;){var _=e[g].compareTo(n[d]);if(_!==0)return _;var S=(g+=s)===u,P=(d+=a)===h;if(S&&!P)return-1;if(!S&&P)return 1;if(S&&P)return 0}}}]),r}(),Rs=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"print",value:function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var n=this._edges.get(t);t>0&&e.print(","),e.print("(");for(var i=n.getCoordinates(),s=0;s<i.length;s++)s>0&&e.print(","),e.print(i[s].x+" "+i[s].y);e.println(")")}e.print(")  ")}},{key:"addAll",value:function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(e){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(e))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(e){return this._edges.get(e)}},{key:"findEqualEdge",value:function(e){var t=new bi(e.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(e){this._edges.add(e);var t=new bi(e.getCoordinates());this._ocaMap.put(t,e)}}],[{key:"constructor_",value:function(){this._edges=new K,this._ocaMap=new Pt}}]),r}(),Mi=function(){function r(){o(this,r)}return c(r,[{key:"processIntersections",value:function(e,t,n,i){}},{key:"isDone",value:function(){}}]),r}(),Os=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"isTrivialIntersection",value:function(e,t,n,i){if(e===n&&this._li.getIntersectionNum()===1){if(r.isAdjacentSegments(t,i))return!0;if(e.isClosed()){var s=e.size()-1;if(t===0&&i===s||i===0&&t===s)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(e,t,n,i){if(e===n&&t===i)return null;this.numTests++;var s=e.getCoordinates()[t],a=e.getCoordinates()[t+1],u=n.getCoordinates()[i],h=n.getCoordinates()[i+1];this._li.computeIntersection(s,a,u,h),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,i)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Mi]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e}},{key:"isAdjacentSegments",value:function(e,t){return Math.abs(e-t)===1}}]),r}(),bs=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)}},{key:"compareTo",value:function(e){var t=e;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new k(e),this.segmentIndex=t,this.dist=n}}]),r}(),Ms=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var i=t.next(),s=this.createSplitEdge(n,i);e.add(s),n=i}}},{key:"addEndpoints",value:function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,i=this.edge.pts[t.segmentIndex],s=t.dist>0||!t.coord.equals2D(i);s||n--;var a=new Array(n).fill(null),u=0;a[u++]=new k(e.coord);for(var h=e.segmentIndex+1;h<=t.segmentIndex;h++)a[u++]=this.edge.pts[h];return s&&(a[u]=t.coord),new Ai(a,new Ae(this.edge._label))}},{key:"add",value:function(e,t,n){var i=new bs(e,t,n),s=this._nodeMap.get(i);return s!==null?s:(this._nodeMap.put(i,i),i)}},{key:"isIntersection",value:function(e){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(e))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Pt,this.edge=null;var e=arguments[0];this.edge=e}}]),r}(),Ps=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(r.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])||r.isTrue(this._matrix[m.INTERIOR][m.BOUNDARY])||r.isTrue(this._matrix[m.BOUNDARY][m.INTERIOR])||r.isTrue(this._matrix[m.BOUNDARY][m.BOUNDARY]))&&this._matrix[m.EXTERIOR][m.INTERIOR]===G.FALSE&&this._matrix[m.EXTERIOR][m.BOUNDARY]===G.FALSE}},{key:"isCoveredBy",value:function(){return(r.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])||r.isTrue(this._matrix[m.INTERIOR][m.BOUNDARY])||r.isTrue(this._matrix[m.BOUNDARY][m.INTERIOR])||r.isTrue(this._matrix[m.BOUNDARY][m.BOUNDARY]))&&this._matrix[m.INTERIOR][m.EXTERIOR]===G.FALSE&&this._matrix[m.BOUNDARY][m.EXTERIOR]===G.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var e=arguments[0],t=0;t<e.length;t++){var n=Math.trunc(t/3),i=t%3;this._matrix[n][i]=G.toDimensionValue(e.charAt(t))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this._matrix[s][a]=u}}},{key:"isContains",value:function(){return r.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&this._matrix[m.EXTERIOR][m.INTERIOR]===G.FALSE&&this._matrix[m.EXTERIOR][m.BOUNDARY]===G.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var e=arguments[0],t=0;t<e.length;t++){var n=Math.trunc(t/3),i=t%3;this.setAtLeast(n,i,G.toDimensionValue(e.charAt(t)))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this._matrix[s][a]<u&&(this._matrix[s][a]=u)}}},{key:"setAtLeastIfValid",value:function(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)}},{key:"isWithin",value:function(){return r.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&this._matrix[m.INTERIOR][m.EXTERIOR]===G.FALSE&&this._matrix[m.BOUNDARY][m.EXTERIOR]===G.FALSE}},{key:"isTouches",value:function(e,t){return e>t?this.isTouches(t,e):(e===G.A&&t===G.A||e===G.L&&t===G.L||e===G.L&&t===G.A||e===G.P&&t===G.A||e===G.P&&t===G.L)&&this._matrix[m.INTERIOR][m.INTERIOR]===G.FALSE&&(r.isTrue(this._matrix[m.INTERIOR][m.BOUNDARY])||r.isTrue(this._matrix[m.BOUNDARY][m.INTERIOR])||r.isTrue(this._matrix[m.BOUNDARY][m.BOUNDARY]))}},{key:"isOverlaps",value:function(e,t){return e===G.P&&t===G.P||e===G.A&&t===G.A?r.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&r.isTrue(this._matrix[m.INTERIOR][m.EXTERIOR])&&r.isTrue(this._matrix[m.EXTERIOR][m.INTERIOR]):e===G.L&&t===G.L&&this._matrix[m.INTERIOR][m.INTERIOR]===1&&r.isTrue(this._matrix[m.INTERIOR][m.EXTERIOR])&&r.isTrue(this._matrix[m.EXTERIOR][m.INTERIOR])}},{key:"isEquals",value:function(e,t){return e===t&&r.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&this._matrix[m.INTERIOR][m.EXTERIOR]===G.FALSE&&this._matrix[m.BOUNDARY][m.EXTERIOR]===G.FALSE&&this._matrix[m.EXTERIOR][m.INTERIOR]===G.FALSE&&this._matrix[m.EXTERIOR][m.BOUNDARY]===G.FALSE}},{key:"toString",value:function(){for(var e=new Jt("123456789"),t=0;t<3;t++)for(var n=0;n<3;n++)e.setCharAt(3*t+n,G.toDimensionSymbol(this._matrix[t][n]));return e.toString()}},{key:"setAll",value:function(e){for(var t=0;t<3;t++)for(var n=0;n<3;n++)this._matrix[t][n]=e}},{key:"get",value:function(e,t){return this._matrix[e][t]}},{key:"transpose",value:function(){var e=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=e,e=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=e,e=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=e,this}},{key:"matches",value:function(e){if(e.length!==9)throw new q("Should be length 9: "+e);for(var t=0;t<3;t++)for(var n=0;n<3;n++)if(!r.matches(this._matrix[t][n],e.charAt(3*t+n)))return!1;return!0}},{key:"add",value:function(e){for(var t=0;t<3;t++)for(var n=0;n<3;n++)this.setAtLeast(t,n,e.get(t,n))}},{key:"isDisjoint",value:function(){return this._matrix[m.INTERIOR][m.INTERIOR]===G.FALSE&&this._matrix[m.INTERIOR][m.BOUNDARY]===G.FALSE&&this._matrix[m.BOUNDARY][m.INTERIOR]===G.FALSE&&this._matrix[m.BOUNDARY][m.BOUNDARY]===G.FALSE}},{key:"isCrosses",value:function(e,t){return e===G.P&&t===G.L||e===G.P&&t===G.A||e===G.L&&t===G.A?r.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&r.isTrue(this._matrix[m.INTERIOR][m.EXTERIOR]):e===G.L&&t===G.P||e===G.A&&t===G.P||e===G.A&&t===G.L?r.isTrue(this._matrix[m.INTERIOR][m.INTERIOR])&&r.isTrue(this._matrix[m.EXTERIOR][m.INTERIOR]):e===G.L&&t===G.L&&this._matrix[m.INTERIOR][m.INTERIOR]===0}},{key:"interfaces_",get:function(){return[J]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(G.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var e=arguments[0];r.constructor_.call(this),this.set(e)}else if(arguments[0]instanceof r){var t=arguments[0];r.constructor_.call(this),this._matrix[m.INTERIOR][m.INTERIOR]=t._matrix[m.INTERIOR][m.INTERIOR],this._matrix[m.INTERIOR][m.BOUNDARY]=t._matrix[m.INTERIOR][m.BOUNDARY],this._matrix[m.INTERIOR][m.EXTERIOR]=t._matrix[m.INTERIOR][m.EXTERIOR],this._matrix[m.BOUNDARY][m.INTERIOR]=t._matrix[m.BOUNDARY][m.INTERIOR],this._matrix[m.BOUNDARY][m.BOUNDARY]=t._matrix[m.BOUNDARY][m.BOUNDARY],this._matrix[m.BOUNDARY][m.EXTERIOR]=t._matrix[m.BOUNDARY][m.EXTERIOR],this._matrix[m.EXTERIOR][m.INTERIOR]=t._matrix[m.EXTERIOR][m.INTERIOR],this._matrix[m.EXTERIOR][m.BOUNDARY]=t._matrix[m.EXTERIOR][m.BOUNDARY],this._matrix[m.EXTERIOR][m.EXTERIOR]=t._matrix[m.EXTERIOR][m.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var e=arguments[0],t=arguments[1];return t===G.SYM_DONTCARE||t===G.SYM_TRUE&&(e>=0||e===G.TRUE)||t===G.SYM_FALSE&&e===G.FALSE||t===G.SYM_P&&e===G.P||t===G.SYM_L&&e===G.L||t===G.SYM_A&&e===G.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[0],i=arguments[1],s=new r(n);return s.matches(i)}}},{key:"isTrue",value:function(e){return e>=0||e===G.TRUE}}]),r}(),As=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(e){return e===null||e.length===0?null:(this.ensureCapacity(this._size+e.length),Me.arraycopy(e,0,this._data,this._size,e.length),void(this._size+=e.length))}},{key:"ensureCapacity",value:function(e){if(e<=this._data.length)return null;var t=Math.max(e,2*this._data.length);this._data=ot.copyOf(this._data,t)}},{key:"toArray",value:function(){var e=new Array(this._size).fill(null);return Me.arraycopy(this._data,0,e,0,this._size),e}},{key:"add",value:function(e){this.ensureCapacity(this._size+1),this._data[this._size]=e,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)r.constructor_.call(this,10);else if(arguments.length===1){var e=arguments[0];this._data=new Array(e).fill(null)}}}]),r}(),Ds=function(){function r(){o(this,r)}return c(r,[{key:"getChainStartIndices",value:function(e){var t=0,n=new As(Math.trunc(e.length/2));n.add(t);do{var i=this.findChainEnd(e,t);n.add(i),t=i}while(t<e.length-1);return n.toArray()}},{key:"findChainEnd",value:function(e,t){for(var n=we.quadrant(e[t],e[t+1]),i=t+1;i<e.length&&we.quadrant(e[i-1],e[i])===n;)i++;return i-1}},{key:"OLDgetChainStartIndices",value:function(e){var t=0,n=new K;n.add(t);do{var i=this.findChainEnd(e,t);n.add(i),t=i}while(t<e.length-1);return r.toIntArray(n)}}],[{key:"toIntArray",value:function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}]),r}(),Fs=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n}},{key:"getMinX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],i)}else if(arguments.length===6){var s=arguments[0],a=arguments[1],u=arguments[2],h=arguments[3],g=arguments[4],d=arguments[5];if(a-s==1&&g-h==1)return d.addIntersections(this.e,s,u.e,h),null;if(!this.overlaps(s,a,u,h,g))return null;var _=Math.trunc((s+a)/2),S=Math.trunc((h+g)/2);s<_&&(h<S&&this.computeIntersectsForChain(s,_,u,h,S,d),S<g&&this.computeIntersectsForChain(s,_,u,S,g,d)),_<a&&(h<S&&this.computeIntersectsForChain(_,a,u,h,S,d),S<g&&this.computeIntersectsForChain(_,a,u,S,g,d))}}},{key:"overlaps",value:function(e,t,n,i,s){return fe.intersects(this.pts[e],this.pts[t],n.pts[i],n.pts[s])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<e.startIndex.length-1;i++)this.computeIntersectsForChain(n,e,i,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new Ds;this.startIndex=t.getChainStartIndices(this.pts)}}]),r}(),Pi=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"getDepth",value:function(e,t){return this._depth[e][t]}},{key:"setDepth",value:function(e,t,n){this._depth[e][t]=n}},{key:"isNull",value:function(){if(arguments.length===0){for(var e=0;e<2;e++)for(var t=0;t<3;t++)if(this._depth[e][t]!==r.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this._depth[n][1]===r.NULL_VALUE}if(arguments.length===2){var i=arguments[0],s=arguments[1];return this._depth[i][s]===r.NULL_VALUE}}},{key:"normalize",value:function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var t=this._depth[e][1];this._depth[e][2]<t&&(t=this._depth[e][2]),t<0&&(t=0);for(var n=1;n<3;n++){var i=0;this._depth[e][n]>t&&(i=1),this._depth[e][n]=i}}}},{key:"getDelta",value:function(e){return this._depth[e][A.RIGHT]-this._depth[e][A.LEFT]}},{key:"getLocation",value:function(e,t){return this._depth[e][t]<=0?m.EXTERIOR:m.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var e=arguments[0],t=0;t<2;t++)for(var n=1;n<3;n++){var i=e.getLocation(t,n);i!==m.EXTERIOR&&i!==m.INTERIOR||(this.isNull(t,n)?this._depth[t][n]=r.depthAtLocation(i):this._depth[t][n]+=r.depthAtLocation(i))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];u===m.INTERIOR&&this._depth[s][a]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var t=0;t<3;t++)this._depth[e][t]=r.NULL_VALUE}},{key:"depthAtLocation",value:function(e){return e===m.EXTERIOR?0:e===m.INTERIOR?1:r.NULL_VALUE}}]),r}();Pi.NULL_VALUE=-1;var Ai=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var n=new Array(2).fill(null);return n[0]=this.pts[0],n[1]=this.pts[1],new t(n,Ae.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(n){this._isIsolated=n}},{key:"setName",value:function(n){this._name=n}},{key:"equals",value:function(n){if(!(n instanceof t))return!1;var i=n;if(this.pts.length!==i.pts.length)return!1;for(var s=!0,a=!0,u=this.pts.length,h=0;h<this.pts.length;h++)if(this.pts[h].equals2D(i.pts[h])||(s=!1),this.pts[h].equals2D(i.pts[--u])||(a=!1),!s&&!a)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}}},{key:"print",value:function(n){n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.print(","),n.print(this.pts[i].x+" "+this.pts[i].y);n.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(n){t.updateIM(this._label,n)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(n){n.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)n.print(this.pts[i]+" ");n.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Fs(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new fe;for(var n=0;n<this.pts.length;n++)this._env.expandToInclude(this.pts[n])}return this._env}},{key:"addIntersection",value:function(n,i,s,a){var u=new k(n.getIntersection(a)),h=i,g=n.getEdgeDistance(s,a),d=h+1;if(d<this.pts.length){var _=this.pts[d];u.equals2D(_)&&(h=d,g=0)}this.eiList.add(u,h,g)}},{key:"toString",value:function(){var n=new Jt;n.append("edge "+this._name+": "),n.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.append(","),n.append(this.pts[i].x+" "+this.pts[i].y);return n.append(")  "+this._label+" "+this._depthDelta),n.toString()}},{key:"isPointwiseEqual",value:function(n){if(this.pts.length!==n.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!this.pts[i].equals2D(n.pts[i]))return!1;return!0}},{key:"setDepthDelta",value:function(n){this._depthDelta=n}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(n,i,s){for(var a=0;a<n.getIntersectionNum();a++)this.addIntersection(n,i,s,a)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Ms(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Pi,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.constructor_.call(this,n,null)}else if(arguments.length===2){var i=arguments[0],s=arguments[1];this.pts=i,this._label=s}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Ps&&arguments[0]instanceof Ae))return N(p(t),"updateIM",this).apply(this,arguments);var n=arguments[0],i=arguments[1];i.setAtLeastIfValid(n.getLocation(0,A.ON),n.getLocation(1,A.ON),1),n.isArea()&&(i.setAtLeastIfValid(n.getLocation(0,A.LEFT),n.getLocation(1,A.LEFT),2),i.setAtLeastIfValid(n.getLocation(0,A.RIGHT),n.getLocation(1,A.RIGHT),2))}}]),t}(yi),Di=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"setWorkingPrecisionModel",value:function(e){this._workingPrecisionModel=e}},{key:"insertUniqueEdge",value:function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),i=e.getLabel();t.isPointwiseEqual(e)||(i=new Ae(e.getLabel())).flip(),n.merge(i);var s=r.depthDelta(i),a=t.getDepthDelta()+s;t.setDepthDelta(a)}else this._edgeList.add(e),e.setDepthDelta(r.depthDelta(e.getLabel()))}},{key:"buildSubgraphs",value:function(e,t){for(var n=new K,i=e.iterator();i.hasNext();){var s=i.next(),a=s.getRightmostCoordinate(),u=new Li(n).getDepth(a);s.computeDepth(u),s.findResultEdges(),n.add(s),t.add(s.getDirectedEdges(),s.getNodes())}}},{key:"createSubgraphs",value:function(e){for(var t=new K,n=e.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var s=new Br;s.create(i),t.add(s)}}return _t.sort(t,_t.reverseOrder()),t}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new Mn,n=new ct;return n.setPrecisionModel(e),t.setSegmentIntersector(new Os(n)),t}},{key:"buffer",value:function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var i=new xs(n,this._bufParams),s=new Is(e,t,i).getCurves();if(s.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(s,n),this._graph=new xi(new Ls),this._graph.addEdges(this._edgeList.getEdges());var a=this.createSubgraphs(this._graph),u=new os(this._geomFact);this.buildSubgraphs(a,u);var h=u.getPolygons();return h.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(h)}},{key:"computeNodedEdges",value:function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var s=i.next(),a=s.getCoordinates();if(a.length!==2||!a[0].equals2D(a[1])){var u=s.getData(),h=new Ai(s.getCoordinates(),new Ae(u));this.insertUniqueEdge(h)}}}},{key:"setNoder",value:function(e){this._workingNoder=e}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Rs;var e=arguments[0];this._bufParams=e}},{key:"depthDelta",value:function(e){var t=e.getLocation(0,A.LEFT),n=e.getLocation(0,A.RIGHT);return t===m.INTERIOR&&n===m.EXTERIOR?1:t===m.EXTERIOR&&n===m.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(e){for(var t=new mt,n=new K;e.hasNext();){var i=e.next(),s=t.createLineString(i.getCoordinates());n.add(s)}return t.buildGeometry(n)}}]),r}(),Gs=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"rescale",value:function(){if(ee(arguments[0],Xe))for(var e=arguments[0],t=e.iterator();t.hasNext();){var n=t.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],s=0;s<i.length;s++)i[s].x=i[s].x/this._scaleFactor+this._offsetX,i[s].y=i[s].y/this._scaleFactor+this._offsetY;i.length===2&&i[0].equals2D(i[1])&&Me.out.println(i)}}},{key:"scale",value:function(){if(ee(arguments[0],Xe)){for(var e=arguments[0],t=new K(e.size()),n=e.iterator();n.hasNext();){var i=n.next();t.add(new ft(this.scale(i.getCoordinates()),i.getData()))}return t}if(arguments[0]instanceof Array){for(var s=arguments[0],a=new Array(s.length).fill(null),u=0;u<s.length;u++)a[u]=new k(Math.round((s[u].x-this._offsetX)*this._scaleFactor),Math.round((s[u].y-this._offsetY)*this._scaleFactor),s[u].getZ());var h=pe.removeRepeatedPoints(a);return h}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e}},{key:"computeNodes",value:function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)}},{key:"interfaces_",get:function(){return[bn]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];r.constructor_.call(this,e,t,0,0)}else if(arguments.length===4){var n=arguments[0],i=arguments[1];this._noder=n,this._scaleFactor=i,this._isScaled=!this.isIntegerPrecision()}}}]),r}(),Fi=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next(),n=t.getCoordinates();this.checkEndPtVertexIntersections(n[0],this._segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this._segStrings)}else if(arguments.length===2){for(var i=arguments[0],s=arguments[1],a=s.iterator();a.hasNext();)for(var u=a.next(),h=u.getCoordinates(),g=1;g<h.length-1;g++)if(h[g].equals(i))throw new Ee("found endpt/interior pt intersection at index "+g+" :pt "+i)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var e=this._segStrings.iterator();e.hasNext();)for(var t=e.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(t,i)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],u=s.getCoordinates(),h=a.getCoordinates(),g=0;g<u.length-1;g++)for(var d=0;d<h.length-1;d++)this.checkInteriorIntersections(s,g,a,d);else if(arguments.length===4){var _=arguments[0],S=arguments[1],P=arguments[2],M=arguments[3];if(_===P&&S===M)return null;var H=_.getCoordinates()[S],W=_.getCoordinates()[S+1],j=P.getCoordinates()[M],he=P.getCoordinates()[M+1];if(this._li.computeIntersection(H,W,j,he),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,H,W)||this.hasInteriorIntersection(this._li,j,he)))throw new Ee("found non-noded intersection at "+H+"-"+W+" and "+j+"-"+he)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next();this.checkCollapses(t)}else if(arguments.length===1)for(var n=arguments[0],i=n.getCoordinates(),s=0;s<i.length-2;s++)this.checkCollapse(i[s],i[s+1],i[s+2])}},{key:"hasInteriorIntersection",value:function(e,t,n){for(var i=0;i<e.getIntersectionNum();i++){var s=e.getIntersection(i);if(!s.equals(t)&&!s.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(e,t,n){if(e.equals(n))throw new Ee("found non-noded collapse at "+r.fact.createLineString([e,t,n]))}}],[{key:"constructor_",value:function(){this._li=new ct,this._segStrings=null;var e=arguments[0];this._segStrings=e}}]),r}();Fi.fact=new mt;var An=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"intersectsScaled",value:function(e,t){var n=Math.min(e.x,t.x),i=Math.max(e.x,t.x),s=Math.min(e.y,t.y),a=Math.max(e.y,t.y),u=this._maxx<n||this._minx>i||this._maxy<s||this._miny>a;if(u)return!1;var h=this.intersectsToleranceSquare(e,t);return te.isTrue(!(u&&h),"Found bad envelope test"),h}},{key:"initCorners",value:function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new k(this._maxx,this._maxy),this._corner[1]=new k(this._minx,this._maxy),this._corner[2]=new k(this._minx,this._miny),this._corner[3]=new k(this._maxx,this._miny)}},{key:"intersects",value:function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(e){return Math.round(e*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var e=r.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new fe(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(e,t){var n=!1,i=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!i)||!!e.equals(this._pt)||!!t.equals(this._pt))))}},{key:"addSnappedNode",value:function(e,t){var n=e.getCoordinate(t),i=e.getCoordinate(t+1);return!!this.intersects(n,i)&&(e.addIntersection(this.getCoordinate(),t),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new q("Scale factor must be non-zero");t!==1&&(this._pt=new k(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new k,this._p1Scaled=new k),this.initCorners(this._pt)}}]),r}();An.SAFE_ENV_EXPANSION_FACTOR=.75;var qs=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new Re}}]),r}(),Gi=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"snap",value:function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}if(arguments.length===3){var t=arguments[0],n=arguments[1],i=arguments[2],s=t.getSafeEnvelope(),a=new qi(t,n,i);return this._index.query(s,new(function(){function u(){o(this,u)}return c(u,[{key:"interfaces_",get:function(){return[Ii]}},{key:"visitItem",value:function(h){h.select(s,a)}}]),u}())),a.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var e=arguments[0];this._index=e}}]),r}(),qi=function(r){y(t,r);var e=I(t);function t(){var n;return o(this,t),n=e.call(this),t.constructor_.apply(E(n),arguments),n}return c(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Si))return N(p(t.prototype),"select",this).apply(this,arguments);var n=arguments[0],i=arguments[1],s=n.getContext();if(this._parentEdge===s&&(i===this._hotPixelVertexIndex||i+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(s,i)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],i=arguments[1],s=arguments[2];this._hotPixel=n,this._parentEdge=i,this._hotPixelVertexIndex=s}}]),t}(qs);Gi.HotPixelSnapAction=qi;var Ys=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"processIntersections",value:function(e,t,n,i){if(e===n&&t===i)return null;var s=e.getCoordinates()[t],a=e.getCoordinates()[t+1],u=n.getCoordinates()[i],h=n.getCoordinates()[i+1];if(this._li.computeIntersection(s,a,u,h),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var g=0;g<this._li.getIntersectionNum();g++)this._interiorIntersections.add(this._li.getIntersection(g));e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Mi]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new K}}]),r}(),zs=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"checkCorrectness",value:function(e){var t=ft.getNodedSubstrings(e),n=new Fi(t);try{n.checkValid()}catch(i){if(!(i instanceof z))throw i;i.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return ft.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)}},{key:"findInteriorIntersections",value:function(e,t){var n=new Ys(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(ee(arguments[0],Xe))for(var e=arguments[0],t=e.iterator();t.hasNext();){var n=t.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof ft)for(var i=arguments[0],s=i.getCoordinates(),a=0;a<s.length;a++){var u=new An(s[a],this._scaleFactor,this._li),h=this._pointSnapper.snap(u,i,a);h&&i.addIntersection(s[a],a)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e,this._noder=new Mn,this._pointSnapper=new Gi(this._noder.getIndex()),this.snapRound(e,this._li)}},{key:"computeIntersectionSnaps",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),i=new An(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}}},{key:"interfaces_",get:function(){return[bn]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new ct,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()}}]),r}(),xt=function(){function r(){o(this,r),r.constructor_.apply(this,arguments)}return c(r,[{key:"bufferFixedPrecision",value:function(e){var t=new Gs(new zs(new qe(1)),e.getScale()),n=new Di(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var e=r.MAX_PRECISION_DIGITS;e>=0;e--){try{this.bufferReducedPrecision(e)}catch(s){if(!(s instanceof Qe))throw s;this._saveException=s}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var t=arguments[0],n=r.precisionScaleFactor(this._argGeom,this._distance,t),i=new qe(n);this.bufferFixedPrecision(i)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===qe.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(e){this._bufParams.setQuadrantSegments(e)}},{key:"bufferOriginalPrecision",value:function(){try{var e=new Di(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Ee))throw t;this._saveException=t}}},{key:"getResultGeometry",value:function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(e){this._bufParams.setEndCapStyle(e)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new L,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}}},{key:"bufferOp",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new r(e),i=n.getResultGeometry(t);return i}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Z&&typeof arguments[1]=="number"){var s=arguments[0],a=arguments[1],u=arguments[2],h=new r(s);h.setQuadrantSegments(u);var g=h.getResultGeometry(a);return g}if(arguments[2]instanceof L&&arguments[0]instanceof Z&&typeof arguments[1]=="number"){var d=arguments[0],_=arguments[1],S=arguments[2],P=new r(d,S),M=P.getResultGeometry(_);return M}}else if(arguments.length===4){var H=arguments[0],W=arguments[1],j=arguments[2],he=arguments[3],ye=new r(H);ye.setQuadrantSegments(j),ye.setEndCapStyle(he);var Ne=ye.getResultGeometry(W);return Ne}}},{key:"precisionScaleFactor",value:function(e,t,n){var i=e.getEnvelopeInternal(),s=Ct.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(t>0?t:0),a=n-Math.trunc(Math.log(s)/Math.log(10)+1);return Math.pow(10,a)}}]),r}();xt.CAP_ROUND=L.CAP_ROUND,xt.CAP_BUTT=L.CAP_FLAT,xt.CAP_FLAT=L.CAP_FLAT,xt.CAP_SQUARE=L.CAP_SQUARE,xt.MAX_PRECISION_DIGITS=12;var Bs=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Yi=function(){function r(e){o(this,r),this.geometryFactory=e||new mt}return c(r,[{key:"read",value:function(e){var t,n=(t=typeof e=="string"?JSON.parse(e):e).type;if(!Fe[n])throw new Error("Unknown GeoJSON type: "+t.type);return Bs.indexOf(n)!==-1?Fe[n].call(this,t.coordinates):n==="GeometryCollection"?Fe[n].call(this,t.geometries):Fe[n].call(this,t)}},{key:"write",value:function(e){var t=e.getGeometryType();if(!Ze[t])throw new Error("Geometry is not supported");return Ze[t].call(this,e)}}]),r}(),Fe={Feature:function(r){var e={};for(var t in r)e[t]=r[t];if(r.geometry){var n=r.geometry.type;if(!Fe[n])throw new Error("Unknown GeoJSON type: "+r.type);e.geometry=this.read(r.geometry)}return r.bbox&&(e.bbox=Fe.bbox.call(this,r.bbox)),e},FeatureCollection:function(r){var e={};if(r.features){e.features=[];for(var t=0;t<r.features.length;++t)e.features.push(this.read(r.features[t]))}return r.bbox&&(e.bbox=this.parse.bbox.call(this,r.bbox)),e},coordinates:function(r){for(var e=[],t=0;t<r.length;++t){var n=r[t];e.push(b(k,T(n)))}return e},bbox:function(r){return this.geometryFactory.createLinearRing([new k(r[0],r[1]),new k(r[2],r[1]),new k(r[2],r[3]),new k(r[0],r[3]),new k(r[0],r[1])])},Point:function(r){var e=b(k,T(r));return this.geometryFactory.createPoint(e)},MultiPoint:function(r){for(var e=[],t=0;t<r.length;++t)e.push(Fe.Point.call(this,r[t]));return this.geometryFactory.createMultiPoint(e)},LineString:function(r){var e=Fe.coordinates.call(this,r);return this.geometryFactory.createLineString(e)},MultiLineString:function(r){for(var e=[],t=0;t<r.length;++t)e.push(Fe.LineString.call(this,r[t]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(r){for(var e=Fe.coordinates.call(this,r[0]),t=this.geometryFactory.createLinearRing(e),n=[],i=1;i<r.length;++i){var s=r[i],a=Fe.coordinates.call(this,s),u=this.geometryFactory.createLinearRing(a);n.push(u)}return this.geometryFactory.createPolygon(t,n)},MultiPolygon:function(r){for(var e=[],t=0;t<r.length;++t){var n=r[t];e.push(Fe.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(r){for(var e=[],t=0;t<r.length;++t){var n=r[t];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},Ze={coordinate:function(r){var e=[r.x,r.y];return r.z&&e.push(r.z),r.m&&e.push(r.m),e},Point:function(r){return{type:"Point",coordinates:Ze.coordinate.call(this,r.getCoordinate())}},MultiPoint:function(r){for(var e=[],t=0;t<r._geometries.length;++t){var n=r._geometries[t],i=Ze.Point.call(this,n);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(r){for(var e=[],t=r.getCoordinates(),n=0;n<t.length;++n){var i=t[n];e.push(Ze.coordinate.call(this,i))}return{type:"LineString",coordinates:e}},MultiLineString:function(r){for(var e=[],t=0;t<r._geometries.length;++t){var n=r._geometries[t],i=Ze.LineString.call(this,n);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(r){var e=[],t=Ze.LineString.call(this,r._shell);e.push(t.coordinates);for(var n=0;n<r._holes.length;++n){var i=r._holes[n],s=Ze.LineString.call(this,i);e.push(s.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(r){for(var e=[],t=0;t<r._geometries.length;++t){var n=r._geometries[t],i=Ze.Polygon.call(this,n);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(r){for(var e=[],t=0;t<r._geometries.length;++t){var n=r._geometries[t],i=n.getGeometryType();e.push(Ze[i].call(this,n))}return{type:"GeometryCollection",geometries:e}}};return{BufferOp:xt,GeoJSONReader:function(){function r(e){o(this,r),this.parser=new Yi(e||new mt)}return c(r,[{key:"read",value:function(e){return this.parser.read(e)}}]),r}(),GeoJSONWriter:function(){function r(){o(this,r),this.parser=new Yi(this.geometryFactory)}return c(r,[{key:"write",value:function(e){return this.parser.write(e)}}]),r}()}})}(on)),on.exports}var ta=ea();const na=Xs(ta);var Ce=63710088e-1,yr={centimeters:Ce*100,centimetres:Ce*100,degrees:360/(2*Math.PI),feet:Ce*3.28084,inches:Ce*39.37,kilometers:Ce/1e3,kilometres:Ce/1e3,meters:Ce,metres:Ce,miles:Ce/1609.344,millimeters:Ce*1e3,millimetres:Ce*1e3,nauticalmiles:Ce/1852,radians:1,yards:Ce*1.0936};function ia(l,f,o={}){const v={type:"Feature"};return(o.id===0||o.id)&&(v.id=o.id),o.bbox&&(v.bbox=o.bbox),v.properties=f||{},v.geometry=l,v}function Xn(l,f={}){const o={type:"FeatureCollection"};return f.id&&(o.id=f.id),f.bbox&&(o.bbox=f.bbox),o.features=l,o}function ra(l,f="kilometers"){const o=yr[f];if(!o)throw new Error(f+" units is invalid");return l*o}function sa(l,f="kilometers"){const o=yr[f];if(!o)throw new Error(f+" units is invalid");return l/o}function Ji(l,f){if(l.type==="Feature")f(l,0);else if(l.type==="FeatureCollection")for(var o=0;o<l.features.length&&f(l.features[o],o)!==!1;o++);}function mr(l,f){var o,v,c,y,p,w,F,b,x,E,C=0,I=l.type==="FeatureCollection",N=l.type==="Feature",T=I?l.features.length:1;for(o=0;o<T;o++){for(w=I?l.features[o].geometry:N?l.geometry:l,b=I?l.features[o].properties:N?l.properties:{},x=I?l.features[o].bbox:N?l.bbox:void 0,E=I?l.features[o].id:N?l.id:void 0,F=w?w.type==="GeometryCollection":!1,p=F?w.geometries.length:1,c=0;c<p;c++){if(y=F?w.geometries[c]:w,y===null){if(f(null,C,b,x,E)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(f(y,C,b,x,E)===!1)return!1;break}case"GeometryCollection":{for(v=0;v<y.geometries.length;v++)if(f(y.geometries[v],C,b,x,E)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}C++}}function st(){return new cn}function cn(){this.reset()}cn.prototype={constructor:cn,reset:function(){this.s=this.t=0},add:function(l){Ki(en,l,this.t),Ki(this,en.s,this.s),this.s?this.t+=en.t:this.s=en.t},valueOf:function(){return this.s}};var en=new cn;function Ki(l,f,o){var v=l.s=f+o,c=v-f,y=v-c;l.t=f-y+(o-c)}var ce=1e-6,re=Math.PI,We=re/2,Qi=re/4,Je=re*2,it=180/re,Ge=re/180,Ie=Math.abs,aa=Math.atan,It=Math.atan2,me=Math.cos,de=Math.sin,wt=Math.sqrt;function dr(l){return l>1?0:l<-1?re:Math.acos(l)}function vt(l){return l>1?We:l<-1?-We:Math.asin(l)}function qt(){}function fn(l,f){l&&ji.hasOwnProperty(l.type)&&ji[l.type](l,f)}var $i={Feature:function(l,f){fn(l.geometry,f)},FeatureCollection:function(l,f){for(var o=l.features,v=-1,c=o.length;++v<c;)fn(o[v].geometry,f)}},ji={Sphere:function(l,f){f.sphere()},Point:function(l,f){l=l.coordinates,f.point(l[0],l[1],l[2])},MultiPoint:function(l,f){for(var o=l.coordinates,v=-1,c=o.length;++v<c;)l=o[v],f.point(l[0],l[1],l[2])},LineString:function(l,f){Un(l.coordinates,f,0)},MultiLineString:function(l,f){for(var o=l.coordinates,v=-1,c=o.length;++v<c;)Un(o[v],f,0)},Polygon:function(l,f){er(l.coordinates,f)},MultiPolygon:function(l,f){for(var o=l.coordinates,v=-1,c=o.length;++v<c;)er(o[v],f)},GeometryCollection:function(l,f){for(var o=l.geometries,v=-1,c=o.length;++v<c;)fn(o[v],f)}};function Un(l,f,o){var v=-1,c=l.length-o,y;for(f.lineStart();++v<c;)y=l[v],f.point(y[0],y[1],y[2]);f.lineEnd()}function er(l,f){var o=-1,v=l.length;for(f.polygonStart();++o<v;)Un(l[o],f,1);f.polygonEnd()}function ua(l,f){l&&$i.hasOwnProperty(l.type)?$i[l.type](l,f):fn(l,f)}st();st();function Vn(l){return[It(l[1],l[0]),vt(l[2])]}function Nt(l){var f=l[0],o=l[1],v=me(o);return[v*me(f),v*de(f),de(o)]}function tn(l,f){return l[0]*f[0]+l[1]*f[1]+l[2]*f[2]}function gn(l,f){return[l[1]*f[2]-l[2]*f[1],l[2]*f[0]-l[0]*f[2],l[0]*f[1]-l[1]*f[0]]}function Yn(l,f){l[0]+=f[0],l[1]+=f[1],l[2]+=f[2]}function nn(l,f){return[l[0]*f,l[1]*f,l[2]*f]}function Hn(l){var f=wt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2]);l[0]/=f,l[1]/=f,l[2]/=f}st();function _r(l,f){function o(v,c){return v=l(v,c),f(v[0],v[1])}return l.invert&&f.invert&&(o.invert=function(v,c){return v=f.invert(v,c),v&&l.invert(v[0],v[1])}),o}function Zn(l,f){return[l>re?l-Je:l<-re?l+Je:l,f]}Zn.invert=Zn;function oa(l,f,o){return(l%=Je)?f||o?_r(nr(l),ir(f,o)):nr(l):f||o?ir(f,o):Zn}function tr(l){return function(f,o){return f+=l,[f>re?f-Je:f<-re?f+Je:f,o]}}function nr(l){var f=tr(l);return f.invert=tr(-l),f}function ir(l,f){var o=me(l),v=de(l),c=me(f),y=de(f);function p(w,F){var b=me(F),x=me(w)*b,E=de(w)*b,C=de(F),I=C*o+x*v;return[It(E*c-I*y,x*o-C*v),vt(I*c+E*y)]}return p.invert=function(w,F){var b=me(F),x=me(w)*b,E=de(w)*b,C=de(F),I=C*c-E*y;return[It(E*c+C*y,x*o+I*v),vt(I*o-x*v)]},p}function la(l,f,o,v,c,y){if(o){var p=me(f),w=de(f),F=v*o;c==null?(c=f+v*Je,y=f-F/2):(c=rr(p,c),y=rr(p,y),(v>0?c<y:c>y)&&(c+=v*Je));for(var b,x=c;v>0?x>y:x<y;x-=F)b=Vn([p,-w*me(x),-w*de(x)]),l.point(b[0],b[1])}}function rr(l,f){f=Nt(f),f[0]-=l,Hn(f);var o=dr(-f[1]);return((-f[2]<0?-o:o)+Je-ce)%Je}function pr(){var l=[],f;return{point:function(o,v){f.push([o,v])},lineStart:function(){l.push(f=[])},lineEnd:qt,rejoin:function(){l.length>1&&l.push(l.pop().concat(l.shift()))},result:function(){var o=l;return l=[],f=null,o}}}function ha(l,f,o,v,c,y){var p=l[0],w=l[1],F=f[0],b=f[1],x=0,E=1,C=F-p,I=b-w,N;if(N=o-p,!(!C&&N>0)){if(N/=C,C<0){if(N<x)return;N<E&&(E=N)}else if(C>0){if(N>E)return;N>x&&(x=N)}if(N=c-p,!(!C&&N<0)){if(N/=C,C<0){if(N>E)return;N>x&&(x=N)}else if(C>0){if(N<x)return;N<E&&(E=N)}if(N=v-w,!(!I&&N>0)){if(N/=I,I<0){if(N<x)return;N<E&&(E=N)}else if(I>0){if(N>E)return;N>x&&(x=N)}if(N=y-w,!(!I&&N<0)){if(N/=I,I<0){if(N>E)return;N>x&&(x=N)}else if(I>0){if(N<x)return;N<E&&(E=N)}return x>0&&(l[0]=p+x*C,l[1]=w+x*I),E<1&&(f[0]=p+E*C,f[1]=w+E*I),!0}}}}}function ln(l,f){return Ie(l[0]-f[0])<ce&&Ie(l[1]-f[1])<ce}function rn(l,f,o,v){this.x=l,this.z=f,this.o=o,this.e=v,this.v=!1,this.n=this.p=null}function kr(l,f,o,v,c){var y=[],p=[],w,F;if(l.forEach(function(N){if(!((T=N.length-1)<=0)){var T,R=N[0],D=N[T],O;if(ln(R,D)){for(c.lineStart(),w=0;w<T;++w)c.point((R=N[w])[0],R[1]);c.lineEnd();return}y.push(O=new rn(R,N,null,!0)),p.push(O.o=new rn(R,null,O,!1)),y.push(O=new rn(D,N,null,!1)),p.push(O.o=new rn(D,null,O,!0))}}),!!y.length){for(p.sort(f),sr(y),sr(p),w=0,F=p.length;w<F;++w)p[w].e=o=!o;for(var b=y[0],x,E;;){for(var C=b,I=!0;C.v;)if((C=C.n)===b)return;x=C.z,c.lineStart();do{if(C.v=C.o.v=!0,C.e){if(I)for(w=0,F=x.length;w<F;++w)c.point((E=x[w])[0],E[1]);else v(C.x,C.n.x,1,c);C=C.n}else{if(I)for(x=C.p.z,w=x.length-1;w>=0;--w)c.point((E=x[w])[0],E[1]);else v(C.x,C.p.x,-1,c);C=C.p}C=C.o,x=C.z,I=!I}while(!C.v);c.lineEnd()}}}function sr(l){if(f=l.length){for(var f,o=0,v=l[0],c;++o<f;)v.n=c=l[o],c.p=v,v=c;v.n=c=l[0],c.p=v}}function xr(l,f){return l<f?-1:l>f?1:l>=f?0:NaN}function ca(l){return l.length===1&&(l=fa(l)),{left:function(f,o,v,c){for(v==null&&(v=0),c==null&&(c=f.length);v<c;){var y=v+c>>>1;l(f[y],o)<0?v=y+1:c=y}return v},right:function(f,o,v,c){for(v==null&&(v=0),c==null&&(c=f.length);v<c;){var y=v+c>>>1;l(f[y],o)>0?c=y:v=y+1}return v}}}function fa(l){return function(f,o){return xr(l(f),o)}}ca(xr);function Er(l){for(var f=l.length,o,v=-1,c=0,y,p;++v<f;)c+=l[v].length;for(y=new Array(c);--f>=0;)for(p=l[f],o=p.length;--o>=0;)y[--c]=p[o];return y}var Yt=1e9,sn=-Yt;function ga(l,f,o,v){function c(b,x){return l<=b&&b<=o&&f<=x&&x<=v}function y(b,x,E,C){var I=0,N=0;if(b==null||(I=p(b,E))!==(N=p(x,E))||F(b,x)<0^E>0)do C.point(I===0||I===3?l:o,I>1?v:f);while((I=(I+E+4)%4)!==N);else C.point(x[0],x[1])}function p(b,x){return Ie(b[0]-l)<ce?x>0?0:3:Ie(b[0]-o)<ce?x>0?2:1:Ie(b[1]-f)<ce?x>0?1:0:x>0?3:2}function w(b,x){return F(b.x,x.x)}function F(b,x){var E=p(b,1),C=p(x,1);return E!==C?E-C:E===0?x[1]-b[1]:E===1?b[0]-x[0]:E===2?b[1]-x[1]:x[0]-b[0]}return function(b){var x=b,E=pr(),C,I,N,T,R,D,O,L,z,q,B,V={point:J,lineStart:le,lineEnd:_e,polygonStart:ue,polygonEnd:se};function J(ne,oe){c(ne,oe)&&x.point(ne,oe)}function X(){for(var ne=0,oe=0,ge=I.length;oe<ge;++oe)for(var ke=I[oe],xe=1,U=ke.length,Se=ke[0],Ee,Te,te=Se[0],Ke=Se[1];xe<U;++xe)Ee=te,Te=Ke,Se=ke[xe],te=Se[0],Ke=Se[1],Te<=v?Ke>v&&(te-Ee)*(v-Te)>(Ke-Te)*(l-Ee)&&++ne:Ke<=v&&(te-Ee)*(v-Te)<(Ke-Te)*(l-Ee)&&--ne;return ne}function ue(){x=E,C=[],I=[],B=!0}function se(){var ne=X(),oe=B&&ne,ge=(C=Er(C)).length;(oe||ge)&&(b.polygonStart(),oe&&(b.lineStart(),y(null,null,1,b),b.lineEnd()),ge&&kr(C,w,ne,y,b),b.polygonEnd()),x=b,C=I=N=null}function le(){V.point=Y,I&&I.push(N=[]),q=!0,z=!1,O=L=NaN}function _e(){C&&(Y(T,R),D&&z&&E.rejoin(),C.push(E.result())),V.point=J,z&&x.lineEnd()}function Y(ne,oe){var ge=c(ne,oe);if(I&&N.push([ne,oe]),q)T=ne,R=oe,D=ge,q=!1,ge&&(x.lineStart(),x.point(ne,oe));else if(ge&&z)x.point(ne,oe);else{var ke=[O=Math.max(sn,Math.min(Yt,O)),L=Math.max(sn,Math.min(Yt,L))],xe=[ne=Math.max(sn,Math.min(Yt,ne)),oe=Math.max(sn,Math.min(Yt,oe))];ha(ke,xe,l,f,o,v)?(z||(x.lineStart(),x.point(ke[0],ke[1])),x.point(xe[0],xe[1]),ge||x.lineEnd(),B=!1):ge&&(x.lineStart(),x.point(ne,oe),B=!1)}O=ne,L=oe,z=ge}return V}}var zn=st();function va(l,f){var o=f[0],v=f[1],c=[de(o),-me(o),0],y=0,p=0;zn.reset();for(var w=0,F=l.length;w<F;++w)if(x=(b=l[w]).length)for(var b,x,E=b[x-1],C=E[0],I=E[1]/2+Qi,N=de(I),T=me(I),R=0;R<x;++R,C=O,N=z,T=q,E=D){var D=b[R],O=D[0],L=D[1]/2+Qi,z=de(L),q=me(L),B=O-C,V=B>=0?1:-1,J=V*B,X=J>re,ue=N*z;if(zn.add(It(ue*V*de(J),T*q+ue*me(J))),y+=X?B+V*Je:B,X^C>=o^O>=o){var se=gn(Nt(E),Nt(D));Hn(se);var le=gn(c,se);Hn(le);var _e=(X^B>=0?-1:1)*vt(le[2]);(v>_e||v===_e&&(se[0]||se[1]))&&(p+=X^B>=0?1:-1)}}return(y<-ce||y<ce&&zn<-ce)^p&1}st();function ar(l){return l}st();st();var St=1/0,vn=St,zt=-St,yn=zt,ur={point:ya,lineStart:qt,lineEnd:qt,polygonStart:qt,polygonEnd:qt,result:function(){var l=[[St,vn],[zt,yn]];return zt=yn=-(vn=St=1/0),l}};function ya(l,f){l<St&&(St=l),l>zt&&(zt=l),f<vn&&(vn=f),f>yn&&(yn=f)}st();function Ir(l,f,o,v){return function(c,y){var p=f(y),w=c.invert(v[0],v[1]),F=pr(),b=f(F),x=!1,E,C,I,N={point:T,lineStart:D,lineEnd:O,polygonStart:function(){N.point=L,N.lineStart=z,N.lineEnd=q,C=[],E=[]},polygonEnd:function(){N.point=T,N.lineStart=D,N.lineEnd=O,C=Er(C);var B=va(E,w);C.length?(x||(y.polygonStart(),x=!0),kr(C,da,B,o,y)):B&&(x||(y.polygonStart(),x=!0),y.lineStart(),o(null,null,1,y),y.lineEnd()),x&&(y.polygonEnd(),x=!1),C=E=null},sphere:function(){y.polygonStart(),y.lineStart(),o(null,null,1,y),y.lineEnd(),y.polygonEnd()}};function T(B,V){var J=c(B,V);l(B=J[0],V=J[1])&&y.point(B,V)}function R(B,V){var J=c(B,V);p.point(J[0],J[1])}function D(){N.point=R,p.lineStart()}function O(){N.point=T,p.lineEnd()}function L(B,V){I.push([B,V]);var J=c(B,V);b.point(J[0],J[1])}function z(){b.lineStart(),I=[]}function q(){L(I[0][0],I[0][1]),b.lineEnd();var B=b.clean(),V=F.result(),J,X=V.length,ue,se,le;if(I.pop(),E.push(I),I=null,!!X){if(B&1){if(se=V[0],(ue=se.length-1)>0){for(x||(y.polygonStart(),x=!0),y.lineStart(),J=0;J<ue;++J)y.point((le=se[J])[0],le[1]);y.lineEnd()}return}X>1&&B&2&&V.push(V.pop().concat(V.shift())),C.push(V.filter(ma))}}return N}}function ma(l){return l.length>1}function da(l,f){return((l=l.x)[0]<0?l[1]-We-ce:We-l[1])-((f=f.x)[0]<0?f[1]-We-ce:We-f[1])}const or=Ir(function(){return!0},_a,ka,[-re,-We]);function _a(l){var f=NaN,o=NaN,v=NaN,c;return{lineStart:function(){l.lineStart(),c=1},point:function(y,p){var w=y>0?re:-re,F=Ie(y-f);Ie(F-re)<ce?(l.point(f,o=(o+p)/2>0?We:-We),l.point(v,o),l.lineEnd(),l.lineStart(),l.point(w,o),l.point(y,o),c=0):v!==w&&F>=re&&(Ie(f-v)<ce&&(f-=v*ce),Ie(y-w)<ce&&(y-=w*ce),o=pa(f,o,y,p),l.point(v,o),l.lineEnd(),l.lineStart(),l.point(w,o),c=0),l.point(f=y,o=p),v=w},lineEnd:function(){l.lineEnd(),f=o=NaN},clean:function(){return 2-c}}}function pa(l,f,o,v){var c,y,p=de(l-o);return Ie(p)>ce?aa((de(f)*(y=me(v))*de(o)-de(v)*(c=me(f))*de(l))/(c*y*p)):(f+v)/2}function ka(l,f,o,v){var c;if(l==null)c=o*We,v.point(-re,c),v.point(0,c),v.point(re,c),v.point(re,0),v.point(re,-c),v.point(0,-c),v.point(-re,-c),v.point(-re,0),v.point(-re,c);else if(Ie(l[0]-f[0])>ce){var y=l[0]<f[0]?re:-re;c=o*y/2,v.point(-y,c),v.point(0,c),v.point(y,c)}else v.point(f[0],f[1])}function xa(l,f){var o=me(l),v=o>0,c=Ie(o)>ce;function y(x,E,C,I){la(I,l,f,C,x,E)}function p(x,E){return me(x)*me(E)>o}function w(x){var E,C,I,N,T;return{lineStart:function(){N=I=!1,T=1},point:function(R,D){var O=[R,D],L,z=p(R,D),q=v?z?0:b(R,D):z?b(R+(R<0?re:-re),D):0;if(!E&&(N=I=z)&&x.lineStart(),z!==I&&(L=F(E,O),(!L||ln(E,L)||ln(O,L))&&(O[0]+=ce,O[1]+=ce,z=p(O[0],O[1]))),z!==I)T=0,z?(x.lineStart(),L=F(O,E),x.point(L[0],L[1])):(L=F(E,O),x.point(L[0],L[1]),x.lineEnd()),E=L;else if(c&&E&&v^z){var B;!(q&C)&&(B=F(O,E,!0))&&(T=0,v?(x.lineStart(),x.point(B[0][0],B[0][1]),x.point(B[1][0],B[1][1]),x.lineEnd()):(x.point(B[1][0],B[1][1]),x.lineEnd(),x.lineStart(),x.point(B[0][0],B[0][1])))}z&&(!E||!ln(E,O))&&x.point(O[0],O[1]),E=O,I=z,C=q},lineEnd:function(){I&&x.lineEnd(),E=null},clean:function(){return T|(N&&I)<<1}}}function F(x,E,C){var I=Nt(x),N=Nt(E),T=[1,0,0],R=gn(I,N),D=tn(R,R),O=R[0],L=D-O*O;if(!L)return!C&&x;var z=o*D/L,q=-o*O/L,B=gn(T,R),V=nn(T,z),J=nn(R,q);Yn(V,J);var X=B,ue=tn(V,X),se=tn(X,X),le=ue*ue-se*(tn(V,V)-1);if(!(le<0)){var _e=wt(le),Y=nn(X,(-ue-_e)/se);if(Yn(Y,V),Y=Vn(Y),!C)return Y;var ne=x[0],oe=E[0],ge=x[1],ke=E[1],xe;oe<ne&&(xe=ne,ne=oe,oe=xe);var U=oe-ne,Se=Ie(U-re)<ce,Ee=Se||U<ce;if(!Se&&ke<ge&&(xe=ge,ge=ke,ke=xe),Ee?Se?ge+ke>0^Y[1]<(Ie(Y[0]-ne)<ce?ge:ke):ge<=Y[1]&&Y[1]<=ke:U>re^(ne<=Y[0]&&Y[0]<=oe)){var Te=nn(X,(-ue+_e)/se);return Yn(Te,V),[Y,Vn(Te)]}}}function b(x,E){var C=v?l:re-l,I=0;return x<-C?I|=1:x>C&&(I|=2),E<-C?I|=4:E>C&&(I|=8),I}return Ir(p,w,y,v?[0,-l]:[-re,l-re])}function Nr(l){return function(f){var o=new Wn;for(var v in l)o[v]=l[v];return o.stream=f,o}}function Wn(){}Wn.prototype={constructor:Wn,point:function(l,f){this.stream.point(l,f)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Sr(l,f,o){var v=f[1][0]-f[0][0],c=f[1][1]-f[0][1],y=l.clipExtent&&l.clipExtent();l.scale(150).translate([0,0]),y!=null&&l.clipExtent(null),ua(o,l.stream(ur));var p=ur.result(),w=Math.min(v/(p[1][0]-p[0][0]),c/(p[1][1]-p[0][1])),F=+f[0][0]+(v-w*(p[1][0]+p[0][0]))/2,b=+f[0][1]+(c-w*(p[1][1]+p[0][1]))/2;return y!=null&&l.clipExtent(y),l.scale(w*150).translate([F,b])}function Ea(l,f,o){return Sr(l,[[0,0],f],o)}var lr=16,Ia=me(30*Ge);function hr(l,f){return+f?Sa(l,f):Na(l)}function Na(l){return Nr({point:function(f,o){f=l(f,o),this.stream.point(f[0],f[1])}})}function Sa(l,f){function o(v,c,y,p,w,F,b,x,E,C,I,N,T,R){var D=b-v,O=x-c,L=D*D+O*O;if(L>4*f&&T--){var z=p+C,q=w+I,B=F+N,V=wt(z*z+q*q+B*B),J=vt(B/=V),X=Ie(Ie(B)-1)<ce||Ie(y-E)<ce?(y+E)/2:It(q,z),ue=l(X,J),se=ue[0],le=ue[1],_e=se-v,Y=le-c,ne=O*_e-D*Y;(ne*ne/L>f||Ie((D*_e+O*Y)/L-.5)>.3||p*C+w*I+F*N<Ia)&&(o(v,c,y,p,w,F,se,le,X,z/=V,q/=V,B,T,R),R.point(se,le),o(se,le,X,z,q,B,b,x,E,C,I,N,T,R))}}return function(v){var c,y,p,w,F,b,x,E,C,I,N,T,R={point:D,lineStart:O,lineEnd:z,polygonStart:function(){v.polygonStart(),R.lineStart=q},polygonEnd:function(){v.polygonEnd(),R.lineStart=O}};function D(J,X){J=l(J,X),v.point(J[0],J[1])}function O(){E=NaN,R.point=L,v.lineStart()}function L(J,X){var ue=Nt([J,X]),se=l(J,X);o(E,C,x,I,N,T,E=se[0],C=se[1],x=J,I=ue[0],N=ue[1],T=ue[2],lr,v),v.point(E,C)}function z(){R.point=D,v.lineEnd()}function q(){O(),R.point=B,R.lineEnd=V}function B(J,X){L(c=J,X),y=E,p=C,w=I,F=N,b=T,R.point=L}function V(){o(E,C,x,I,N,T,y,p,c,w,F,b,lr,v),R.lineEnd=z,z()}return R}}var wa=Nr({point:function(l,f){this.stream.point(l*Ge,f*Ge)}});function Ta(l){return Ca(function(){return l})()}function Ca(l){var f,o=150,v=480,c=250,y,p,w=0,F=0,b=0,x=0,E=0,C,I,N=null,T=or,R=null,D,O,L,z=ar,q=.5,B=hr(se,q),V,J;function X(Y){return Y=I(Y[0]*Ge,Y[1]*Ge),[Y[0]*o+y,p-Y[1]*o]}function ue(Y){return Y=I.invert((Y[0]-y)/o,(p-Y[1])/o),Y&&[Y[0]*it,Y[1]*it]}function se(Y,ne){return Y=f(Y,ne),[Y[0]*o+y,p-Y[1]*o]}X.stream=function(Y){return V&&J===Y?V:V=wa(T(C,B(z(J=Y))))},X.clipAngle=function(Y){return arguments.length?(T=+Y?xa(N=Y*Ge,6*Ge):(N=null,or),_e()):N*it},X.clipExtent=function(Y){return arguments.length?(z=Y==null?(R=D=O=L=null,ar):ga(R=+Y[0][0],D=+Y[0][1],O=+Y[1][0],L=+Y[1][1]),_e()):R==null?null:[[R,D],[O,L]]},X.scale=function(Y){return arguments.length?(o=+Y,le()):o},X.translate=function(Y){return arguments.length?(v=+Y[0],c=+Y[1],le()):[v,c]},X.center=function(Y){return arguments.length?(w=Y[0]%360*Ge,F=Y[1]%360*Ge,le()):[w*it,F*it]},X.rotate=function(Y){return arguments.length?(b=Y[0]%360*Ge,x=Y[1]%360*Ge,E=Y.length>2?Y[2]%360*Ge:0,le()):[b*it,x*it,E*it]},X.precision=function(Y){return arguments.length?(B=hr(se,q=Y*Y),_e()):wt(q)},X.fitExtent=function(Y,ne){return Sr(X,Y,ne)},X.fitSize=function(Y,ne){return Ea(X,Y,ne)};function le(){I=_r(C=oa(b,x,E),f);var Y=f(w,F);return y=v-Y[0]*o,p=c+Y[1]*o,_e()}function _e(){return V=J=null,X}return function(){return f=l.apply(this,arguments),X.invert=f.invert&&ue,le()}}function wr(l){return function(f,o){var v=me(f),c=me(o),y=l(v*c);return[y*c*de(f),y*de(o)]}}function Tr(l){return function(f,o){var v=wt(f*f+o*o),c=l(v),y=de(c),p=me(c);return[It(f*y,v*p),vt(v&&o*y/v)]}}var La=wr(function(l){return wt(2/(1+l))});La.invert=Tr(function(l){return 2*vt(l/2)});var Cr=wr(function(l){return(l=dr(l))&&l/de(l)});Cr.invert=Tr(function(l){return l});function Ra(){return Ta(Cr).scale(79.4188).clipAngle(180-.001)}function cr(l,f){return[l,f]}cr.invert=cr;var{BufferOp:Oa,GeoJSONReader:ba,GeoJSONWriter:Ma}=na;function Wa(l,f,o){o=o||{};var v=o.units||"kilometers",c=o.steps||8;if(!l)throw new Error("geojson is required");if(typeof o!="object")throw new Error("options must be an object");if(typeof c!="number")throw new Error("steps must be an number");if(f===void 0)throw new Error("radius is required");if(c<=0)throw new Error("steps must be greater than 0");var y=[];switch(l.type){case"GeometryCollection":return mr(l,function(p){var w=hn(p,f,v,c);w&&y.push(w)}),Xn(y);case"FeatureCollection":return Ji(l,function(p){var w=hn(p,f,v,c);w&&Ji(w,function(F){F&&y.push(F)})}),Xn(y)}return hn(l,f,v,c)}function hn(l,f,o,v){var c=l.properties||{},y=l.type==="Feature"?l.geometry:l;if(y.type==="GeometryCollection"){var p=[];return mr(l,function(T){var R=hn(T,f,o,v);R&&p.push(R)}),Xn(p)}var w=Pa(y),F={type:y.type,coordinates:Rr(y.coordinates,w)},b=new ba,x=b.read(F),E=ra(sa(f,o),"meters"),C=Oa.bufferOp(x,E,v),I=new Ma;if(C=I.write(C),!Lr(C.coordinates)){var N={type:C.type,coordinates:Or(C.coordinates,w)};return ia(N,c)}}function Lr(l){return Array.isArray(l[0])?Lr(l[0]):isNaN(l[0])}function Rr(l,f){return typeof l[0]!="object"?f(l):l.map(function(o){return Rr(o,f)})}function Or(l,f){return typeof l[0]!="object"?f.invert(l):l.map(function(o){return Or(o,f)})}function Pa(l){var f=$s(l).geometry.coordinates,o=[-f[0],-f[1]];return Ra().rotate(o).scale(Ce)}function Aa(l){if(!l)throw new Error("geojson is required");switch(l.type){case"Feature":return br(l);case"FeatureCollection":return Da(l);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Kn(l);default:throw new Error("unknown GeoJSON type")}}function br(l){const f={type:"Feature"};return Object.keys(l).forEach(o=>{switch(o){case"type":case"properties":case"geometry":return;default:f[o]=l[o]}}),f.properties=Mr(l.properties),l.geometry==null?f.geometry=null:f.geometry=Kn(l.geometry),f}function Mr(l){const f={};return l&&Object.keys(l).forEach(o=>{const v=l[o];typeof v=="object"?v===null?f[o]=null:Array.isArray(v)?f[o]=v.map(c=>c):f[o]=Mr(v):f[o]=v}),f}function Da(l){const f={type:"FeatureCollection"};return Object.keys(l).forEach(o=>{switch(o){case"type":case"features":return;default:f[o]=l[o]}}),f.features=l.features.map(o=>br(o)),f}function Kn(l){const f={type:l.type};return l.bbox&&(f.bbox=l.bbox),l.type==="GeometryCollection"?(f.geometries=l.geometries.map(o=>Kn(o)),f):(f.coordinates=Pr(l.coordinates),f)}function Pr(l){const f=l;return typeof f[0]!="object"?f.slice():f.map(o=>Pr(o))}function Fa(l){return l!==null&&typeof l=="object"&&!Array.isArray(l)}function Ga(l,f){var o,v,c,y,p,w,F,b,x,E,C=0,I=l.type==="FeatureCollection",N=l.type==="Feature",T=I?l.features.length:1;for(o=0;o<T;o++){for(w=I?l.features[o].geometry:N?l.geometry:l,b=I?l.features[o].properties:N?l.properties:{},x=I?l.features[o].bbox:N?l.bbox:void 0,E=I?l.features[o].id:N?l.id:void 0,F=w?w.type==="GeometryCollection":!1,p=F?w.geometries.length:1,c=0;c<p;c++){if(y=F?w.geometries[c]:w,y===null){if(f(null,C,b,x,E)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(f(y,C,b,x,E)===!1)return!1;break}case"GeometryCollection":{for(v=0;v<y.geometries.length;v++)if(f(y.geometries[v],C,b,x,E)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}C++}}function qa(l,f){var o=l[0]-f[0],v=l[1]-f[1];return o*o+v*v}function Ya(l,f,o){var v=f[0],c=f[1],y=o[0]-v,p=o[1]-c;if(y!==0||p!==0){var w=((l[0]-v)*y+(l[1]-c)*p)/(y*y+p*p);w>1?(v=o[0],c=o[1]):w>0&&(v+=y*w,c+=p*w)}return y=l[0]-v,p=l[1]-c,y*y+p*p}function za(l,f){for(var o=l[0],v=[o],c,y=1,p=l.length;y<p;y++)c=l[y],qa(c,o)>f&&(v.push(c),o=c);return o!==c&&v.push(c),v}function Jn(l,f,o,v,c){for(var y=v,p,w=f+1;w<o;w++){var F=Ya(l[w],l[f],l[o]);F>y&&(p=w,y=F)}y>v&&(p-f>1&&Jn(l,f,p,v,c),c.push(l[p]),o-p>1&&Jn(l,p,o,v,c))}function Ba(l,f){var o=l.length-1,v=[l[0]];return Jn(l,0,o,f,v),v.push(l[o]),v}function mn(l,f,o){if(l.length<=2)return l;var v=f!==void 0?f*f:1;return l=o?l:za(l,v),l=Ba(l,v),l}function Ja(l,f={}){var o,v,c;if(f=f??{},!Fa(f))throw new Error("options is invalid");const y=(o=f.tolerance)!=null?o:1,p=(v=f.highQuality)!=null?v:!1,w=(c=f.mutate)!=null?c:!1;if(!l)throw new Error("geojson is required");if(y&&y<0)throw new Error("invalid tolerance");return w!==!0&&(l=Aa(l)),Ga(l,function(F){Xa(F,y,p)}),l}function Xa(l,f,o){const v=l.type;if(v==="Point"||v==="MultiPoint")return l;if(Js(l,{mutate:!0}),v!=="GeometryCollection")switch(v){case"LineString":l.coordinates=mn(l.coordinates,f,o);break;case"MultiLineString":l.coordinates=l.coordinates.map(c=>mn(c,f,o));break;case"Polygon":l.coordinates=fr(l.coordinates,f,o);break;case"MultiPolygon":l.coordinates=l.coordinates.map(c=>fr(c,f,o))}return l}function fr(l,f,o){return l.map(function(v){if(v.length<4)throw new Error("invalid polygon");let c=f,y=mn(v,c,o);for(;!Ua(y);)c-=c*.01,y=mn(v,c,o);return(y[y.length-1][0]!==y[0][0]||y[y.length-1][1]!==y[0][1])&&y.push(y[0]),y})}function Ua(l){return l.length<3?!1:!(l.length===3&&l[2][0]===l[0][0]&&l[2][1]===l[0][1])}let Be=[],rt=0;const an=4;let Qn=l=>{let f=[],o={get(){return o.lc||o.listen(()=>{})(),o.value},lc:0,listen(v){return o.lc=f.push(v),()=>{for(let y=rt+an;y<Be.length;)Be[y]===v?Be.splice(y,an):y+=an;let c=f.indexOf(v);~c&&(f.splice(c,1),--o.lc||o.off())}},notify(v,c){let y=!Be.length;for(let p of f)Be.push(p,o.value,v,c);if(y){for(rt=0;rt<Be.length;rt+=an)Be[rt](Be[rt+1],Be[rt+2],Be[rt+3]);Be.length=0}},off(){},set(v){let c=o.value;c!==v&&(o.value=v,o.notify(c))},subscribe(v){let c=o.listen(v);return v(o.value),c},value:l};return o};const Ka=Qn({name:"",data:null}),Qa=Qn({distance:500,activeTags:["potable","filter"]}),$a=Qn({pois:null});var Bn={exports:{}},gr;function Va(){return gr||(gr=1,function(l){(function(f){f.version="0.5.0",f.defaults={doThrows:{invalidGeometry:!1}};function o(){var T=1<=arguments.length?[].slice.call(arguments,0):[],R=T.shift(),D=T.shift();Error.apply(this,T),this.message=this.message||"Invalid Geometry: item: "+JSON.stringify(R)+", params: "+JSON.stringify(D)}o.prototype=Error,f.errors={InvalidGeometryError:o},f.isGeometryValid=function(T){return!T||!Object.keys(T).length?!1:!!T.type&&!!T.coordinates&&Array.isArray(T.coordinates)&&!!T.coordinates.length},f.parse=function(T,R,D){var O,L=y(R,this.defaults),z;if(c.length=0,F(L),z=I(L),Array.isArray(T)?(O={type:"FeatureCollection",features:[]},T.forEach(function(q){O.features.push(x({item:q,params:L,propFunc:z}))}),p(O,L)):(O=x({item:T,params:L,propFunc:z}),p(O,L)),D&&typeof D=="function")D(O);else return O};var v=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeoJSON"],c=[];function y(T,R){var D=T||{};for(var O in R)R.hasOwnProperty(O)&&!D[O]&&(D[O]=R[O]);return D}function p(T,R){if(R.crs&&w(R.crs)&&(R.isPostgres?T.geometry.crs=R.crs:T.crs=R.crs),R.bbox&&(T.bbox=R.bbox),R.extraGlobal){T.properties={};for(var D in R.extraGlobal)T.properties[D]=R.extraGlobal[D]}}function w(T){if(T.type==="name"){if(T.properties&&T.properties.name)return!0;throw new Error('Invalid CRS. Properties must contain "name" key')}else if(T.type==="link"){if(T.properties&&T.properties.href&&T.properties.type)return!0;throw new Error('Invalid CRS. Properties must contain "href" and "type" key')}else throw new Error('Invald CRS. Type attribute must be "name" or "link"')}function F(T){T.geom={};for(var R in T)T.hasOwnProperty(R)&&v.indexOf(R)!==-1&&(T.geom[R]=T[R],delete T[R]);b(T.geom)}function b(T){for(var R in T)T.hasOwnProperty(R)&&(typeof T[R]=="string"?c.push(T[R]):typeof T[R]=="object"&&(c.push(T[R][0]),c.push(T[R][1])));if(c.length===0)throw new Error("No geometry attributes specified")}function x(T){var R=T.item,D=T.params,O=T.propFunc,L={type:"Feature"};return L.geometry=C(R,D),L.properties=O.call(R),L}function E(T){return/^.+\..+$/.test(T)}function C(T,R){var D={};for(var O in R.geom){var L=R.geom[O];if(typeof L=="string"&&T.hasOwnProperty(L))O==="GeoJSON"?D=T[L]:(D.type=O,D.coordinates=T[L]);else if(typeof L=="object"&&!Array.isArray(L)){var z=Object.keys(L).map(function(ue){var se=L[ue],le=T[ue];return C(le,{geom:{Point:se}})});D.type=O,D.coordinates=[].concat(z.map(function(ue){return ue.coordinates}))}else if(Array.isArray(L)&&T.hasOwnProperty(L[0])&&T.hasOwnProperty(L[1]))D.type=O,D.coordinates=[Number(T[L[1]]),Number(T[L[0]])];else if(Array.isArray(L)&&E(L[0])&&E(L[1])){for(var q=[],B=0;B<L.length;B++){for(var V=L[B].split("."),J=T,X=0;X<V.length;X++){if(!J.hasOwnProperty(V[X]))return!1;J=J[V[X]]}q[B]=J}D.type=O,D.coordinates=[Number(q[1]),Number(q[0])]}}if(R.doThrows&&R.doThrows.invalidGeometry&&!f.isGeometryValid(D))throw new o(T,R);return D}function I(T){var R;return!T.exclude&&!T.include?R=function(D){for(var O in this)this.hasOwnProperty(O)&&c.indexOf(O)===-1&&(D[O]=this[O])}:T.include?R=function(D){T.include.forEach(function(O){D[O]=this[O]},this)}:T.exclude&&(R=function(D){for(var O in this)this.hasOwnProperty(O)&&c.indexOf(O)===-1&&T.exclude.indexOf(O)===-1&&(D[O]=this[O])}),function(){var D={};return R.call(this,D),T.extra&&N(D,T.extra),D}}function N(T,R){for(var D in R)R.hasOwnProperty(D)&&(T[D]=R[D]);return T}})(l.exports)}(Bn)),Bn.exports}Va();export{Wa as a,Hs as b,Qa as c,Za as j,$a as p,Ja as s,Ka as t};
